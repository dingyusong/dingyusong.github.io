(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{106:function(e,t,i){"use strict";i.r(t),i.d(t,"frontMatter",(function(){return u})),i.d(t,"metadata",(function(){return c})),i.d(t,"toc",(function(){return p})),i.d(t,"default",(function(){return d}));var n=i(3),o=i(7),a=(i(0),i(331)),r=["components"],u={},c={unversionedId:"\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u64ad\u653e",id:"\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u64ad\u653e",isDocsHomePage:!1,title:"\u97f3\u9891\u64ad\u653e",description:"\u97f3\u9891\u64ad\u653e",source:"@site/docs/\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u64ad\u653e.md",slug:"/\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u64ad\u653e",permalink:"/docs/\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u64ad\u653e",editUrl:"dys-typora-open://mine/survival/docs/\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u64ad\u653e.md",version:"current",sidebar:"\u97f3\u89c6\u9891",previous:{title:"\u97f3\u9891\u7f16\u89e3\u7801",permalink:"/docs/\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u7f16\u89e3\u7801"},next:{title:"Video",permalink:"/docs/\u97f3\u89c6\u9891/Video/Video"}},p=[{value:"\u64ad\u653e\u97f3\u9891\u6d41",id:"\u64ad\u653e\u97f3\u9891\u6d41",children:[]},{value:"\u64ad\u653e\u97f3\u9891\u6587\u4ef6",id:"\u64ad\u653e\u97f3\u9891\u6587\u4ef6",children:[{value:"\u64ad\u653ecaf\u6587\u4ef6",id:"\u64ad\u653ecaf\u6587\u4ef6",children:[]},{value:"\u64ad\u653emp3\u6587\u4ef6",id:"\u64ad\u653emp3\u6587\u4ef6",children:[]}]},{value:"AudioUnit",id:"audiounit",children:[{value:"\u63a8\u8350AUGraph",id:"\u63a8\u8350augraph",children:[]}]},{value:"AudioQueue",id:"audioqueue",children:[]},{value:"\u7591\u96be\u6742\u75c7",id:"\u7591\u96be\u6742\u75c7",children:[]},{value:"\u53c2\u8003\u6587\u6863",id:"\u53c2\u8003\u6587\u6863",children:[]}],l={toc:p};function d(e){var t=e.components,u=Object(o.a)(e,r);return Object(a.b)("wrapper",Object(n.a)({},l,u,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h1",{id:"\u97f3\u9891\u64ad\u653e"},"\u97f3\u9891\u64ad\u653e"),Object(a.b)("p",null,"\u64ad\u653e\u95ee\u9898\uff1f"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"\u600e\u6837\u5b9e\u73b0\u8033\u8fd4\uff1f"),Object(a.b)("li",{parentName:"ol"},"\u600e\u6837\u64ad\u653e\u4e00\u4e2a\u6587\u4ef6\uff1f"),Object(a.b)("li",{parentName:"ol"},"\u600e\u4e48\u64ad\u653e\u4e00\u4e2a\u6587\u4ef6\uff0c\u6df7\u7740\u9ea6\u514b\u98ce\u7684\u58f0\u97f3\uff1f"),Object(a.b)("li",{parentName:"ol"},"\u600e\u4e48\u6837\u7075\u6d3b\u7684\u6dfb\u52a0\u548c\u5220\u9664\u4e00\u4e2a\u58f0\u97f3\u5355\u5143\uff0c\u6bd4\u5982\u591a\u4eba\u89c6\u9891\u7684\u65f6\u5019\uff1f"),Object(a.b)("li",{parentName:"ol"},"\u5982\u4f55\u5904\u7406\u4e2d\u65ad\u6062\u590d\uff1f"),Object(a.b)("li",{parentName:"ol"},"\u5982\u4f55\u5904\u7406\u7cfb\u7edf\u97f3\u9891\u670d\u670d\u52a1\u5d29\u6e83\u91cd\u542f\uff1f"),Object(a.b)("li",{parentName:"ol"},"\u5982\u4f55\u548c\u522b\u7684\u5e94\u7528\u7684\u58f0\u97f3\u5171\u5b58\uff1f"),Object(a.b)("li",{parentName:"ol"},"\u5982\u4f55\u5207\u6362\u5230\u626c\u58f0\u5668\uff1f\u7136\u540e\u5728\u5207\u6362\u56de\u6765\u3002\u6bd4\u5982\u97f3\u9891APP\uff0c\u5982\u4f55\u9ed8\u8ba4\u5c31\u662f\u7528\u626c\u58f0\u5668\uff1f"),Object(a.b)("li",{parentName:"ol"},"\u5982\u4f55\u5904\u7406\u8f93\u51fa\u8bbe\u5907\u5207\u6362\uff1f\u6bd4\u5982\u6709\u7ebf\u8033\u673a\u548c\u84dd\u7259\u8033\u673a?")),Object(a.b)("h2",{id:"\u64ad\u653e\u97f3\u9891\u6d41"},"\u64ad\u653e\u97f3\u9891\u6d41"),Object(a.b)("h2",{id:"\u64ad\u653e\u97f3\u9891\u6587\u4ef6"},"\u64ad\u653e\u97f3\u9891\u6587\u4ef6"),Object(a.b)("h3",{id:"\u64ad\u653ecaf\u6587\u4ef6"},"\u64ad\u653ecaf\u6587\u4ef6"),Object(a.b)("h4",{id:"\u4f7f\u7528audiounit\u64ad\u653ecaf"},"\u4f7f\u7528AudioUnit\u64ad\u653ecaf"),Object(a.b)("p",null,"\u53c2\u8003\uff1a",Object(a.b)("a",{parentName:"p",href:"https://github.com/huisedediao/XBVoiceTool"},"https://github.com/huisedediao/XBVoiceTool")," \u7684",Object(a.b)("inlineCode",{parentName:"p"},"[self play]")),Object(a.b)("h3",{id:"\u64ad\u653emp3\u6587\u4ef6"},"\u64ad\u653emp3\u6587\u4ef6"),Object(a.b)("h4",{id:"\u4f7f\u7528audiounit\u64ad\u653emp3"},"\u4f7f\u7528AudioUnit\u64ad\u653emp3"),Object(a.b)("p",null,"\u53c2\u8003\uff1a",Object(a.b)("a",{parentName:"p",href:"https://github.com/huisedediao/XBVoiceTool"},"https://github.com/huisedediao/XBVoiceTool")," \u7684",Object(a.b)("inlineCode",{parentName:"p"},"[self play]")),Object(a.b)("h2",{id:"audiounit"},"AudioUnit"),Object(a.b)("p",null,Object(a.b)("a",{parentName:"p",href:"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/ConstructingAudioUnitApps/ConstructingAudioUnitApps.html#//apple_ref/doc/uid/TP40009492-CH16-SW8"},"AudioUnit\u7684\u56fa\u5b9a\u5957\u8def")),Object(a.b)("p",null,"No matter which design pattern you choose, the steps for constructing an audio unit hosting app are basically the same:"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Configure your audio session."),Object(a.b)("li",{parentName:"ol"},"Specify audio units."),Object(a.b)("li",{parentName:"ol"},"Create an audio processing graph, then obtain the audio units."),Object(a.b)("li",{parentName:"ol"},"Configure the audio units."),Object(a.b)("li",{parentName:"ol"},"Connect the audio unit nodes."),Object(a.b)("li",{parentName:"ol"},"Provide a user interface."),Object(a.b)("li",{parentName:"ol"},"Initialize and then start the audio processing graph.")),Object(a.b)("p",null,"\u64ad\u653e\u6309\u7167",Object(a.b)("a",{parentName:"p",href:"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/ConstructingAudioUnitApps/ConstructingAudioUnitApps.html#//apple_ref/doc/uid/TP40009492-CH16-SW5"},"Design Pattern:Output-Only with a Render Callback Function")),Object(a.b)("p",null,"\u56e0\u4e3a\u662f\u64ad\u653e\uff0c\u6240\u4ee5\u4e0a\u9762\u7684\u56fa\u5b9a\u5957\u8def\u53ef\u4ee5\u7b80\u5316\u3002"),Object(a.b)("p",null,"\u4f7f\u7528Audio Unit \u6709\u4e24\u79cd\u9009\u62e9\uff1a\u53c2\u8003\uff1a"),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},Object(a.b)("a",{parentName:"strong",href:"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/AudioUnitHostingFundamentals/AudioUnitHostingFundamentals.html#//apple_ref/doc/uid/TP40009492-CH3-SW42"},"Use the Two Audio Unit APIs in Concert"))),Object(a.b)("p",null,"iOS has one API for working with audio units directly and another for manipulating audio processing graphs. When you host audio units in your app, you use both APIs in concert."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"To work with audio units directly\u2014configuring and controlling them\u2014use the functions described in ",Object(a.b)("em",{parentName:"li"},Object(a.b)("a",{parentName:"em",href:"https://developer.apple.com/documentation/audiounit/audio_unit_component_services"},"Audio Unit Component Services Reference")),"."),Object(a.b)("li",{parentName:"ul"},"To create and configure an audio processing graph (a processing chain of audio units) use the functions described in ",Object(a.b)("em",{parentName:"li"},Object(a.b)("a",{parentName:"em",href:"https://developer.apple.com/documentation/audiotoolbox/audio_unit_processing_graph_services"},"Audio Unit Processing Graph Services Reference")),".")),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Obtaining an audio unit instance using the audio unit API"),Object(a.b)("li",{parentName:"ol"},"Obtaining an audio unit instance using the audio processing graph API")),Object(a.b)("h3",{id:"\u63a8\u8350augraph"},"\u63a8\u8350AUGraph"),Object(a.b)("p",null,"\u5bf9AudioUnit\u7684\u7ba1\u7406\uff0c\u5b98\u65b9\u63a8\u8350\u4f7f\u7528AUGraph\uff0c\u56e0\u4e3a\u4ed6\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u3002"),Object(a.b)("p",null,"\u53c2\u8003\uff1a",Object(a.b)("a",{parentName:"p",href:"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/AudioUnitHostingFundamentals/AudioUnitHostingFundamentals.html#//apple_ref/doc/uid/TP40009492-CH3-SW5"},"Audio Processing Graphs Provide Thread Safety")),Object(a.b)("p",null,"\u5b9e\u9a8c\uff1a"),Object(a.b)("p",null,"\u5728AUGraph\u542f\u52a8\u7684\u65f6\u5019\uff0c\u65b0\u589e\u4e00\u4e2aAudioUnitApi\u7684AudioUnit\u4f1aCrash\u3002\u6240\u4ee5\u8981\u7528AUGraph\u3002"),Object(a.b)("p",null,Object(a.b)("img",{alt:"image-20210806155151308",src:i(454).default})),Object(a.b)("p",null,"\u53ef\u4ee5\u7528\u4e00\u4e2aAudioUnit\u505aInput\u548cOutput\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e24\u4e2aAudioUnit\u4e00\u4e2a\u662fInput\u4e00\u4e2a\u662fOutput\u3002"),Object(a.b)("p",null,Object(a.b)("a",{parentName:"p",href:"https://github.com/superpoweredSDK/Low-Latency-Android-iOS-Linux-Windows-tvOS-macOS-Interactive-Audio-Platform/issues/362"},"https://github.com/superpoweredSDK/Low-Latency-Android-iOS-Linux-Windows-tvOS-macOS-Interactive-Audio-Platform/issues/362")),Object(a.b)("p",null,Object(a.b)("a",{parentName:"p",href:"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/AudioUnitHostingFundamentals/AudioUnitHostingFundamentals.html#//apple_ref/doc/uid/TP40009492-CH3-SW5"},"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/AudioUnitHostingFundamentals/AudioUnitHostingFundamentals.html#//apple_ref/doc/uid/TP40009492-CH3-SW5")),Object(a.b)("p",null,"\u5b9e\u9a8c1\uff1a"),Object(a.b)("p",null,"\u800c\u60f3\u7528\u4e00\u4e2aAudioUnit\u6765\u63a7\u5236\u5f55\u5236\u548c\u64ad\u653e\uff0c\u4e0d\u80fd\u5355\u72ec\u63a7\u5236\u64ad\u653e\u548c\u5f55\u5236\u7684\u6682\u505c\u548c\u5f00\u59cb\u3002"),Object(a.b)("p",null,Object(a.b)("a",{parentName:"p",href:"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/UsingSpecificAudioUnits/UsingSpecificAudioUnits.html#//apple_ref/doc/uid/TP40009492-CH17-SW6"},"Voice-Processing I/O Unit")),Object(a.b)("h2",{id:"audioqueue"},"AudioQueue"),Object(a.b)("p",null,Object(a.b)("a",{parentName:"p",href:"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AQRecord/RecordingAudio.html#//apple_ref/doc/uid/TP40005343-CH4-SW1"},"Audio Queue Services Programming Guide-Recording Audio")),Object(a.b)("h2",{id:"\u7591\u96be\u6742\u75c7"},"\u7591\u96be\u6742\u75c7"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"\u5f55\u5236\u548c\u64ad\u653e\u540c\u65f6\u8fdb\u884c\u65f6\uff0c\u5f55\u5236\u5173\u95ed\u7684\u8bdd\uff0c\u64ad\u653e\u7684\u58f0\u97f3\u4f1a\u53d7\u5230\u538b\u5236")),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-objective-c"},"    AudioComponentDescription ioUnitDesc;\n    ioUnitDesc.componentType          = kAudioUnitType_Output;\n//    ioUnitDesc.componentSubType       = kAudioUnitSubType_RemoteIO;\n    ioUnitDesc.componentSubType       = kAudioUnitSubType_VoiceProcessingIO;\n    ioUnitDesc.componentManufacturer  = kAudioUnitManufacturer_Apple;\n    ioUnitDesc.componentFlags         = 0;\n    ioUnitDesc.componentFlagsMask     = 0;\n")),Object(a.b)("p",null,"Recorder \u7684 Audio Unit \u9009\u62e9 kAudioUnitSubType_VoiceProcessingIO \u7684\u65f6\u5019\uff0c\u5f55\u5236\u6253\u5f00\uff0c\u64ad\u653e\u58f0\u97f3\u4f1a\u5f97\u5230\u589e\u5f3a\uff0c\u5f55\u5236\u5173\u95ed\uff0c\u64ad\u653e\u58f0\u97f3\u4f1a\u53d7\u5230\u538b\u5236\u3002"),Object(a.b)("p",null,"\u6539\u4e3a kAudioUnitSubType_RemoteIO \u5c31\u597d\u4e86\u3002\u4e0d\u4f1a\u51fa\u73b0\u58f0\u97f3\u538b\u5236\u7684\u60c5\u51b5\u3002"),Object(a.b)("h2",{id:"\u53c2\u8003\u6587\u6863"},"\u53c2\u8003\u6587\u6863"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",{parentName:"li",href:"https://cz-it.gitbooks.io/play-and-record-with-coreaudio/content/"},"https://cz-it.gitbooks.io/play-and-record-with-coreaudio/content/"))),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("a",{parentName:"p",href:"https://github.com/huisedediao/XBVoiceTool"},"https://github.com/huisedediao/XBVoiceTool")),Object(a.b)("p",{parentName:"li"},"\u57fa\u4e8eAudio Unit \u5199\u7684\u4e00\u4e9bdemo,\u6301\u7eed\u66f4\u65b0\u3002\u76ee\u524d\u5305\u62ec\uff1a\n\u5f55\u97f3\n\u64ad\u653ePCM\u6570\u636e\n\u64ad\u653eMP3|AAC\n\u9ea6\u514b\u98ce\u8f93\u5165\u548c\u4f20\u5165\u7684PCM\u6570\u636e\u6df7\u97f3\n\u7528mixUnit\u6df7\u97f3\n\u4f20\u5165\u4e24\u4e2a\u97f3\u9891\u6587\u4ef6\uff0c\u83b7\u53d6\u6df7\u97f3\u6587\u4ef6\uff08\u642c\u8fd0\uff09"),Object(a.b)("p",{parentName:"li"},"\u5907\u4efd\uff1a",Object(a.b)("a",{parentName:"p",href:"https://gitee.com/dingyusong/XBVoiceTool"},"https://gitee.com/dingyusong/XBVoiceTool"))),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("a",{parentName:"p",href:"http://blog.danthought.com/programming/2020/07/02/ios-audio-unit-record-play/"},"iOS Audio Unit \u5f55\u5236\u97f3\u9891\u6587\u4ef6\u548c\u64ad\u653e\u97f3\u9891\u6587\u4ef6"))),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("a",{parentName:"p",href:"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/Introduction/Introduction.html"},"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/Introduction/Introduction.html")))),Object(a.b)("p",null,"AudioUnit\u7684 Start by Choosing a Design Pattern"),Object(a.b)("p",null,"\u9009\u62e9\uff1aOutput-Only with a Render Callback Function"))}d.isMDXComponent=!0},331:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return m}));var n=i(0),o=i.n(n);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}var p=o.a.createContext({}),l=function(e){var t=o.a.useContext(p),i=t;return e&&(i="function"==typeof e?e(t):u(u({},t),e)),i},d=function(e){var t=l(e.components);return o.a.createElement(p.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},s=o.a.forwardRef((function(e,t){var i=e.components,n=e.mdxType,a=e.originalType,r=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=l(i),s=n,m=d["".concat(r,".").concat(s)]||d[s]||b[s]||a;return i?o.a.createElement(m,u(u({ref:t},p),{},{components:i})):o.a.createElement(m,u({ref:t},p))}));function m(e,t){var i=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=i.length,r=new Array(a);r[0]=s;var u={};for(var c in t)hasOwnProperty.call(t,c)&&(u[c]=t[c]);u.originalType=e,u.mdxType="string"==typeof e?e:n,r[1]=u;for(var p=2;p<a;p++)r[p]=i[p];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,i)}s.displayName="MDXCreateElement"},454:function(e,t,i){"use strict";i.r(t),t.default=i.p+"assets/images/image-20210806155151308-9111c18ffb16ac65d36c48f39ad1b1cb.png"}}]);