(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{256:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return b})),a.d(t,"toc",(function(){return c})),a.d(t,"default",(function(){return p}));var n=a(3),i=a(7),r=(a(0),a(329)),o=["components"],l={},b={unversionedId:"\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u91c7\u96c6",id:"\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u91c7\u96c6",isDocsHomePage:!1,title:"\u97f3\u9891\u91c7\u96c6",description:"iOS/macOS \u97f3\u9891\u91c7\u96c6",source:"@site/docs/\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u91c7\u96c6.md",slug:"/\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u91c7\u96c6",permalink:"/docs/\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u91c7\u96c6",editUrl:"dys-typora-open://mine/survival/docs/\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u91c7\u96c6.md",version:"current",sidebar:"\u97f3\u89c6\u9891",previous:{title:"Audio",permalink:"/docs/\u97f3\u89c6\u9891/Audio/Audio"},next:{title:"\u97f3\u9891\u5b58\u50a8",permalink:"/docs/\u97f3\u89c6\u9891/Audio/\u97f3\u9891\u5b58\u50a8"}},c=[{value:"\u91c7\u96c6\u7ba1\u7406",id:"\u91c7\u96c6\u7ba1\u7406",children:[]},{value:"\u91c7\u96c6\u7684\u8f93\u5165",id:"\u91c7\u96c6\u7684\u8f93\u5165",children:[]},{value:"\u91c7\u96c6\u7684\u8f93\u51fa",id:"\u91c7\u96c6\u7684\u8f93\u51fa",children:[]},{value:"\u91c7\u96c6",id:"\u91c7\u96c6",children:[{value:"\u6570\u636e\u683c\u5f0f",id:"\u6570\u636e\u683c\u5f0f",children:[]},{value:"\u4ece\u9ea6\u514b\u98ce\u91c7\u96c6",id:"\u4ece\u9ea6\u514b\u98ce\u91c7\u96c6",children:[]},{value:"\u4ece\u6587\u4ef6\u91c7\u96c6",id:"\u4ece\u6587\u4ef6\u91c7\u96c6",children:[]}]},{value:"\u7ecf\u9a8c\u603b\u7ed3",id:"\u7ecf\u9a8c\u603b\u7ed3",children:[]},{value:"\u901a\u8fc7\u547d\u4ee4\u884c\u91c7\u96c6",id:"\u901a\u8fc7\u547d\u4ee4\u884c\u91c7\u96c6",children:[]},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",children:[]}],u={toc:c};function p(e){var t=e.components,l=Object(i.a)(e,o);return Object(r.b)("wrapper",Object(n.a)({},u,l,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"iosmacos-\u97f3\u9891\u91c7\u96c6"},"iOS/macOS \u97f3\u9891\u91c7\u96c6"),Object(r.b)("p",null,"\u91c7\u96c6\u5e38\u89c1\u95ee\u9898\uff1f"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"\u51e0\u4e2a\u58f0\u9053\u4e00\u8d77\u91c7\u96c6\uff1f")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"\u4e00\u79d2\u91c7\u96c6\u591a\u5c11\u6b21\uff1f")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"\u4e00\u4e2a\u70b9\u7528\u591a\u5c11\u4f4d\u6765\u8868\u793a\uff1f")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"\u91c7\u96c6\u51fa\u6765\u7684\u6570\u636e\u591a\u4e45\u5f80\u5916\u9001\u4e00\u6b21\uff1f\u4e00\u6b21\u9001\u7684\u6570\u636e\u6709\u591a\u5927\uff1f")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"\u5982\u679c\u662f\u53cc\u58f0\u9053\uff0c\u5f80\u5916\u9001\u7684\u6570\u636e\u683c\u5f0f\u662f\u600e\u6837\u7684\uff1f")),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"\u5982\u4f55\u5904\u7406\u8f93\u5165\u8bbe\u5907\u5207\u6362\u4e86\uff1f"))),Object(r.b)("h2",{id:"\u91c7\u96c6\u7ba1\u7406"},"\u91c7\u96c6\u7ba1\u7406"),Object(r.b)("p",null,"\u8c01\u6765\u7ba1\u7406\u91c7\u96c6\uff1f\u91c7\u96c6\u7684\u5f00\u59cb\u548c\u7ed3\u675f\uff0c\u91c7\u96c6\u7684\u914d\u7f6e\u5de5\u4f5c\u7b49\u3002"),Object(r.b)("h2",{id:"\u91c7\u96c6\u7684\u8f93\u5165"},"\u91c7\u96c6\u7684\u8f93\u5165"),Object(r.b)("p",null,"\u65e2\u7136\u8981\u91c7\u96c6\u6570\u636e\uff0c\u6570\u636e\u5728\u54ea\u91cc\uff0c\u4ece\u54ea\u91cc\u6765\uff1f"),Object(r.b)("h2",{id:"\u91c7\u96c6\u7684\u8f93\u51fa"},"\u91c7\u96c6\u7684\u8f93\u51fa"),Object(r.b)("p",null,"\u91c7\u96c6\u5230\u7684\u6570\u636e\uff0c\u600e\u4e48\u8f93\u51fa\uff0c\u653e\u5230\u4ec0\u4e48\u5730\u65b9\uff1f"),Object(r.b)("h4",{id:"\u97f3\u9891\u91c7\u96c6"},"\u97f3\u9891\u91c7\u96c6"),Object(r.b)("h5",{id:"audio-unit"},"Audio Unit"),Object(r.b)("p",null,"\u867d\u7136\u82f9\u679c\u6709\u4e00\u4e2aAudio Unit \u6846\u67b6\uff0c\u4f46\u662f\u53ef\u4ee5\u4ece\u5934\u6587\u4ef6\u91cc\u770b\u51fa\uff0cAudio Unit\u6240\u6709\u5934\u6587\u4ef6\u90fd\u662f\u5bf9AudioToolbox\u5934\u6587\u4ef6\u7684\u5c01\u88c5\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5b66\u4e60AudioToolbox\u6846\u67b6\u3002"),Object(r.b)("p",null,Object(r.b)("img",{alt:"image-20210202220017241",src:a(880).default})),Object(r.b)("p",null,Object(r.b)("img",{alt:"image-20210202220404351",src:a(881).default})),Object(r.b)("p",null,"Audio Unit\u91c7\u96c6\u97f3\u9891\u53ef\u4ee5\u770b AudioToolbox \u7684AudioUnit v2 API\u90e8\u5206\uff0c\u548cDeprecated Symbols \u7684",Object(r.b)("inlineCode",{parentName:"p"},"AUGraph")),Object(r.b)("p",null,Object(r.b)("img",{alt:"image-20210202220833714",src:a(882).default})),Object(r.b)("p",null,"\u91cd\u70b9\u7c7b\uff1aAudioUnit\uff0cAUGraph, AudioStreamBasicDescription, AVAudioFormat"),Object(r.b)("p",null,"\u5b66\u4e60\u91cd\u70b9\uff1a"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\u719f\u7ec3\u638c\u63e1AudioToolbox\u6846\u67b6\u4e0bAudioUnit v2 API\u90e8\u5206"),Object(r.b)("li",{parentName:"ul"},"\u719f\u7ec3\u638c\u63e1AudioToolbox\u6846\u67b6\u4e0bAudio Queue Services\u90e8\u5206"),Object(r.b)("li",{parentName:"ul"},"\u719f\u7ec3\u638c\u63e1AudioToolbox\u6846\u67b6\u4e0bDeprecated Symbols\u90e8\u5206\u7684 Audio Unit Processing Graph Services\u90e8\u5206"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",{parentName:"li",href:"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009492"},"Audio Unit Hosting Guide for iOS"))),Object(r.b)("p",null,"\u8bbe\u8ba1\u5230\u7684\u6846\u67b6"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},"AudioToolbox"),"\uff1aAudioUnit\uff0cAUGraph")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},"CoreAudioTypes"),"->",Object(r.b)("inlineCode",{parentName:"p"},"CoreAudioType Structures"),"->",Object(r.b)("inlineCode",{parentName:"p"},"AudioStreamBasicDescription"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},"AVFoundation"),"->",Object(r.b)("inlineCode",{parentName:"p"},"Audio Playback, Recording, and Processing")," ->",Object(r.b)("inlineCode",{parentName:"p"},"AVAudioEngine"),"->",Object(r.b)("inlineCode",{parentName:"p"},"Audio Settings and Formats"),"->",Object(r.b)("inlineCode",{parentName:"p"},"AVAudioFormat")),Object(r.b)("p",{parentName:"li"},"\u793a\u4f8b\u4ee3\u7801\uff1a"))),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"\u8033\u8fd4  \u4f7f\u7528AUGraph\u5b9e\u73b0\u9ea6\u514b\u98ce\u8f93\u5165\uff0c\u8033\u673a\u8f93\u51fa"),Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},"ios_demos/audio/demo/audio_unit_demo/audio_unit_ios/IOPassThrough"))),Object(r.b)("li",{parentName:"ol"},Object(r.b)("p",{parentName:"li"},"\u5f55\u97f3"),Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},"ios_demos/audio/demo/audio_unit_demo/audio_unit_ios/InputOnly")))),Object(r.b)("h5",{id:"pcm"},"pcm"),Object(r.b)("p",null,"\u91c7\u6837\u683c\u5f0f"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-objective-c"},"/*! \n    @enum       AVAudioCommonFormat\n    @constant   AVAudioOtherFormat\n                    A format other than one of the common ones below.\n    @constant   AVAudioPCMFormatFloat32\n                    Native-endian floats (this is the standard format).\n    @constant   AVAudioPCMFormatFloat64\n                    Native-endian doubles.\n    @constant   AVAudioPCMFormatInt16\n                    Signed 16-bit native-endian integers.\n    @constant   AVAudioPCMFormatInt32\n                    Signed 32-bit native-endian integers.\n*/\ntypedef NS_ENUM(NSUInteger, AVAudioCommonFormat) {\n    AVAudioOtherFormat = 0,\n    AVAudioPCMFormatFloat32 = 1,\n    AVAudioPCMFormatFloat64 = 2,\n    AVAudioPCMFormatInt16 = 3,\n    AVAudioPCMFormatInt32 = 4\n} NS_ENUM_AVAILABLE(10_10, 8_0);\n\n\nrecorderInfo.outputStreamDesc = *([[AVAudioFormat alloc] initWithCommonFormat:AVAudioPCMFormatInt16 sampleRate:16000 channels:1 interleaved:NO].streamDescription);\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\u91c7\u6837\u53c2\u6570")),Object(r.b)("p",null,"\u600e\u4e48\u91c7\u6837\uff1f"),Object(r.b)("p",null,"\u91c7\u6837\u7387\u591a\u5c11\uff1f"),Object(r.b)("p",null,"44100HZ"),Object(r.b)("p",null,"\u51e0\u4e2a\u58f0\u9053\u91c7\u6837\uff1f"),Object(r.b)("p",null,"\u91c7\u6837\u70b9\u7528\u591a\u5c11\u4f4d\u6570\u636e\u8bb0\u5f55\uff1f"),Object(r.b)("p",null,"\u7ecf\u5e38\u89c1\u5230\u8fd9\u6837\u7684\u63cf\u8ff0: 44100HZ 16bit stereo \u6216\u8005 22050HZ 8bit mono \u7b49\u7b49.\n","-"," 44100HZ 16bit stereo:\n\u6bcf\u79d2\u949f\u6709 44100 \u6b21\u91c7\u6837, \u91c7\u6837\u6570\u636e\u7528 16 \u4f4d(2\u5b57\u8282)\u8bb0\u5f55, \u53cc\u58f0\u9053(\u7acb\u4f53\u58f0);\n","-"," 22050HZ 8bit  mono:\n\u6bcf\u79d2\u949f\u6709 22050 \u6b21\u91c7\u6837, \u91c7\u6837\u6570\u636e\u7528 8 \u4f4d(1\u5b57\u8282)\u8bb0\u5f55, \u5355\u58f0\u9053;"),Object(r.b)("p",null,"\u4f5c\u8005\uff1aFlyingPenguin\n\u94fe\u63a5\uff1a",Object(r.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/e568f94cdf6a"},"https://www.jianshu.com/p/e568f94cdf6a"),"\n\u6765\u6e90\uff1a\u7b80\u4e66\n\u8457\u4f5c\u6743\u5f52\u4f5c\u8005\u6240\u6709\u3002\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"PCM\u6570\u636e\u5b58\u50a8\u683c\u5f0f")),Object(r.b)("p",null,Object(r.b)("img",{alt:"img",src:a(883).default})),Object(r.b)("p",null,Object(r.b)("a",{parentName:"p",href:"https://developer.apple.com/documentation/avfaudio/avaudiocommonformat?language=objc"},"https://developer.apple.com/documentation/avfaudio/avaudiocommonformat?language=objc")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},Object(r.b)("strong",{parentName:"p"},"\u5e26P\u548c\u4e0d\u5e26P\u7684\u6570\u636e\u7c7b\u578b\u7684\u533a\u522b\uff1a")),Object(r.b)("p",{parentName:"blockquote"},"P\u8868\u793aPlanar\uff08\u5e73\u9762\uff09\uff0c\u5176\u6570\u636e\u683c\u5f0f\u6392\u5217\u65b9\u5f0f\u4e3a :"),Object(r.b)("p",{parentName:"blockquote"},"LLLLLLRRRRRRLLLLLLRRRRRRLLLLLLRRRRRRL...\uff08 ",Object(r.b)("strong",{parentName:"p"},"*","*","\u6bcf\u4e2aLLLLLLRRRRRR\u4e3a\u4e00\u4e2a\u97f3\u9891\u5e27","*","*"),"\uff09"),Object(r.b)("p",{parentName:"blockquote"},"\u800c\u4e0d\u5e26P\u7684\u6570\u636e\u683c\u5f0f\uff08\u5373\u4ea4\u9519\u6392\u5217\uff09\u6392\u5217\u65b9\u5f0f\u4e3a\uff1a"),Object(r.b)("p",{parentName:"blockquote"},"LRLRLRLRLRLRLRLRLRLRLRLRLRLRLRLRLRLRL... \uff08 ",Object(r.b)("strong",{parentName:"p"},"\u6bcf\u4e2aLR\u4e3a\u4e00\u4e2a\u97f3\u9891\u6837\u672c")," \uff09"),Object(r.b)("p",{parentName:"blockquote"},Object(r.b)("strong",{parentName:"p"},"\u6ce8\uff1a"),"L\u8868\u793a\u5de6\u58f0\u9053\u4e00\u4e2a\u91c7\u6837\u70b9\u6570\u636e\uff0cR\u8868\u793a\u53f3\u58f0\u9053\u4e00\u4e2a\u91c7\u6837\u70b9\u6570\u636e")),Object(r.b)("p",null,'\u6bcf\u4e2a\u58f0\u9053\u90fd\u662f16\u4e2abit,\u7136\u540eLRLRLRLR,\u4e0d\u8fc7\u6b64\u5904\u9700\u8981\u6ce8\u610f\u8fd9\u53eb\u505a"\u4ea4\u9519\u7acb\u4f53\u58f0\u5b58\u50a8",\u8fd8\u6709\u4e00\u79cd\u5b58\u50a8\u65b9\u5f0f\u53eb\u505a"\u53cc\u5355\u58f0\u9053",\u6bd4\u8f83\u5c11\u89c1\u65e5\u5e38\u53ef\u4ee5\u6682\u65f6\u5f53\u5b83\u4e0d\u5b58\u5728,\u662f\u4ee5LLLLLLLLLLLLLLL.....RRRRRRRRRRRRRR......\u5b58\u50a8\u7684.'),Object(r.b)("p",null,"\u53c2\u8003\uff1a",Object(r.b)("a",{parentName:"p",href:"https://www.zhihu.com/question/29721784"},"https://www.zhihu.com/question/29721784")),Object(r.b)("p",null,"iOS \u4e2dAVAudioFormat\u6709\u4e2a\u5c5e\u6027 interleaved \u4ea4\u9519\uff0c\u5e38\u7528\u5e94\u8be5\u662fyes\u3002\u4e5f\u5c31\u662f AVAudioPCMFormatInt16 \u4e0d\u5e26p\u7684\u3002"),Object(r.b)("h2",{id:"\u91c7\u96c6"},"\u91c7\u96c6"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"\u51e0\u4e2a\u58f0\u9053\u4e00\u8d77\u91c7\u96c6\uff1f\u91c7\u6837sample\uff0c\u6570\u636e\u5e27frame\uff0c\u6570\u636e\u5305packet\uff0c\u662f\u4ec0\u4e48\u610f\u601d\uff1f\u6709\u4ec0\u4e48\u5173\u7cfb\uff1f")),Object(r.b)("p",null,"Channel\uff1a \u4e00\u4e2a\u58f0\u9053\u662f\u5355\u58f0\u9053\uff0c\u4e24\u4e2a\u58f0\u9053\u662f\u53cc\u58f0\u9053\u3002\u5bf9\u5e94 ",Object(r.b)("inlineCode",{parentName:"p"},"AudioStreamBasicDescription")," \u4e2d\u7684 ",Object(r.b)("inlineCode",{parentName:"p"},"mChannelsPerFrame")," \u5b57\u6bb5\u3002"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\u5728\u97f3\u9891\u6570\u636e\u4e2d\uff0c \u4e00\u4e2a\u91c7\u6837\u5c31\u662f n \u4e2a\u901a\u9053\u7684\u4e00\u4e2a\u6570\u636e\u96c6\u5408\uff0c\u4e00\u4e2a\u6570\u636e\u5e27\u5c31\u662f\u4e00\u4e2a\u91c7\u6837 one frame = one sample\u3002"),Object(r.b)("li",{parentName:"ul"},"\u5728 pcm \u97f3\u9891\u4e2d one packet = one frame"),Object(r.b)("li",{parentName:"ul"},"\u5728\u538b\u7f29\u97f3\u9891\u4e2d one packet = n frame, \u5982 one AAC packet = 1024 sample frames")),Object(r.b)("ol",{start:2},Object(r.b)("li",{parentName:"ol"},"\u4e00\u79d2\u91c7\u96c6\u591a\u5c11\u6b21\uff1f")),Object(r.b)("p",null,"SampleRate\uff1a \u91c7\u6837\u7387\u3002\u5bf9\u5e94 ",Object(r.b)("inlineCode",{parentName:"p"},"AudioStreamBasicDescription")," \u4e2d\u7684 ",Object(r.b)("inlineCode",{parentName:"p"},"mSampleRate")," \u5b57\u6bb5\u3002"),Object(r.b)("ol",{start:3},Object(r.b)("li",{parentName:"ol"},"\u4e00\u4e2a\u70b9\u7528\u591a\u5c11\u4f4d\u6765\u8868\u793a\uff1f\u4e00\u5e27\u6570\u636e\u6709\u591a\u5c11\u5b57\u8282\uff1f")),Object(r.b)("p",null,"\u4f4d\u5bbd\uff1a\u5bf9\u5e94 ",Object(r.b)("inlineCode",{parentName:"p"},"AudioStreamBasicDescription")," \u4e2d\u7684 ",Object(r.b)("inlineCode",{parentName:"p"},"mBitsPerChannel")," \u5b57\u6bb5\u3002\u8fd9\u4e2a\u5f88\u597d\u7406\u89e3\uff0c\u9700\u8981\u752801\u4e8c\u8fdb\u5236\u6807\u8bc6\u6a21\u62df\u4fe1\u53f7\u7684\u9ad8\u4f4e\u503c\uff0c\u90a3\u4e48\u7528\u591a\u5c11\u4f4d\u6765\u8868\u793a\u5462\uff1f\u8fd9\u4e2a\u4f4d\u6570\u53eb\u4f4d\u5bbd\u3002\u5f88\u663e\u7136\u4f4d\u6570\u8d8a\u5927\uff0c\u80fd\u8868\u793a\u7684\u8303\u56f4\u4e5f\u5c31\u8d8a\u5e7f\uff0c\u58f0\u97f3\u8868\u793a\u4e5f\u5c31\u8d8a\u7cbe\u7ec6\uff0c\u4f46\u662f\u540c\u65f6\uff0c\u6570\u636e\u91cf\u4e5f\u5c31\u8d8a\u5927\u3002ios\u4e00\u822c\u752816\u4f4d\u6574\u5f62\u8868\u793a\u3002\u4e00\u4e2a\u58f0\u9053\uff0c\u91c7\u4e00\u6b21\u662f2\u5b57\u8282\u3002"),Object(r.b)("p",null,"\u4e00\u5e27\u6570\u636e\u6709\u591a\u5c11\u5b57\u8282\uff1a\u5bf9\u5e94 ",Object(r.b)("inlineCode",{parentName:"p"},"AudioStreamBasicDescription")," \u4e2d\u7684 ",Object(r.b)("inlineCode",{parentName:"p"},"mBytesPerFrame")," \u5b57\u6bb5\u3002 \u4e00\u5e27\u5c31\u662f\u4e00\u4e2a\u91c7\u6837\u3002\u4e00\u4e2a\u91c7\u6837\u5c31\u662f\u6240\u6709\u901a\u9053\u91c7\u96c6\u4e00\u6b21\u7684\u6570\u636e\u96c6\u5408\u3002"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\u4ea4\u9519\u7c7b\u578b mBitsPerChannel / 8 * mChannelsPerFrame"),Object(r.b)("li",{parentName:"ul"},"\u975e\u4ea4\u9519\u7c7b\u578b mBitsPerChannel / 8")),Object(r.b)("ol",{start:4},Object(r.b)("li",{parentName:"ol"},"\u91c7\u51fa\u6765\u7684\u6570\u636e\u662f\u4ec0\u4e48\u683c\u5f0f\u7684\uff1f")),Object(r.b)("p",null,"\u5bf9\u5e94 ",Object(r.b)("inlineCode",{parentName:"p"},"AudioStreamBasicDescription")," \u4e2d\u7684 ",Object(r.b)("inlineCode",{parentName:"p"},"mFormatID")," \u5b57\u6bb5\u3002\u6700\u5e38\u89c1\u7684\u662fpcm\u4e5f\u5c31\u662f\u7b2c\u4e00\u4e2a\u3002"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"kAudioFormatLinearPCM               = 'lpcm',\nkAudioFormatMPEG4AAC                = 'aac ',\nkAudioFormatMPEGLayer3              = '.mp3',\n")),Object(r.b)("p",null,"\u8fd9\u4e2a\u683c\u5f0f\u662f\u6700\u540e\u5f62\u6210\u7684\u6587\u4ef6\u7684\u683c\u5f0f\u3002pcm\u662f\u672a\u538b\u7f29\u7684\u539f\u59cb\u6570\u636e\u3002aac\u548cmp3\u662f\u538b\u7f29\u8fc7\u7684\u6570\u636e\u3002\u8fd8\u6709\u4e00\u4e2a\u683c\u5f0f\u662f\u91c7\u96c6\u51fa\u6765\u7684\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u683c\u5f0f\u3002"),Object(r.b)("ol",{start:5},Object(r.b)("li",{parentName:"ol"},"\u91c7\u96c6\u51fa\u6765\u653e\u5230\u7f13\u51b2\u533a\u4e2d\u7684\u6570\u636e\u662f\u600e\u4e48\u653e\u7684\uff1f")),Object(r.b)("p",null,"\u5bf9\u5e94 ",Object(r.b)("inlineCode",{parentName:"p"},"AudioStreamBasicDescription")," \u4e2d\u7684 ",Object(r.b)("inlineCode",{parentName:"p"},"mFormatFlags")," \u5b57\u6bb5"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"    m_streamFormat.mFormatFlags     = kLinearPCMFormatFlagIsSignedInteger | kLinearPCMFormatFlagIsPacked;\n")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"kAudioFormatFlagIsFloat")),Object(r.b)("p",null,"\u662f\u5426\u662f\u6d6e\u70b9\u6570\uff0c \u6ca1\u6709\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u662f int \u7c7b\u578b"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"kAudioFormatFlagIsBigEndian")),Object(r.b)("p",null,"\u662f\u5426\u662f\u5927\u7aef\uff0c \u6ca1\u6709\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u662f\u5c0f\u7aef"),Object(r.b)("p",null,Object(r.b)("a",{parentName:"p",href:"https://www.cnblogs.com/pure/archive/2013/04/21/3034066.html"},"Big-Endian & Little-Endian")),Object(r.b)("p",null,"\u5927\u7aef\u6a21\u5f0fBig-Endian\u5c31\u662f\u9ad8\u4f4d\u5b57\u8282\u6392\u653e\u5728\u5185\u5b58\u7684\u4f4e\u5730\u5740\u7aef\uff0c\u4f4e\u4f4d\u5b57\u8282\u6392\u653e\u5728\u5185\u5b58\u7684\u9ad8\u5730\u5740\u7aef\u3002"),Object(r.b)("p",null,"\u5c0f\u7aef\u6a21\u5f0fLittle-Endian\u5c31\u662f\u4f4e\u4f4d\u5b57\u8282\u6392\u653e\u5728\u5185\u5b58\u7684\u4f4e\u5730\u5740\u7aef\uff0c\u9ad8\u4f4d\u5b57\u8282\u6392\u653e\u5728\u5185\u5b58\u7684\u9ad8\u5730\u5740\u7aef\u3002"),Object(r.b)("p",null,Object(r.b)("img",{alt:"image-20210218221422118",src:a(884).default})),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"kAudioFormatFlagIsSignedInteger")),Object(r.b)("p",null,"\u662f\u5426\u662f signed int\uff0c \u6ca1\u6709\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u662f unsigned int"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"kAudioFormatFlagIsPacked")),Object(r.b)("p",null,"\u662f\u5426mBitsPerChannel \u4f1a\u5360\u6ee1\u6574\u4e2a\u901a\u9053\uff0c\u5982\u679c\u6ca1\u6709\u5360\u6ee1\uff0c \u5c31\u4f1a\u4f9d\u9ad8\u4f4d\u5bf9\u9f50\u6216\u4f4e\u4f4d\u5bf9\u9f50\u3002"),Object(r.b)("p",null,"\u6ca1\u6709\u8bbe\u7f6e\u7684\u65f6\u5019\uff0c\u6ee1\u8db3 ((mBitsPerSample / 8) * mChannelsPerFrame) == mBytesPerFrame \u7684\u6761\u4ef6\uff0c\u9ed8\u8ba4\u4f1a\u8bbe\u7f6e\u6b64\u9009\u9879\u3002"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"kAudioFormatFlagIsNonInterleaved")),Object(r.b)("p",null,"\u662f\u5426\u662f\u5e73\u9762\u7c7b\u578b\uff0c\u662f\u5426\u662f\u4ea4\u9519\u7c7b\u578b\u3002"),Object(r.b)("p",null,"\u53cc\u58f0\u9053\u7684\u60c5\u51b5"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\u4ea4\u9519\u7c7b\u578b\u7684\u5b58\u50a8\u4e3a,\u53ea\u6709\u4e00\u4e2a\u901a\u9053\uff0c\u901a\u9053\u5185\u5de6\u53f3\u58f0\u9053\u4ea4\u9519\u5b58\u50a8 LRLRLRLRLRLR"),Object(r.b)("li",{parentName:"ul"},"\u975e\u4ea4\u9519\u60c5\u51b5\u4e3a\uff0c \u5de6\u53f3\u58f0\u9053\u5206\u5f00\u5b58\u50a8\uff0c\u6bcf\u4e2a\u5e73\u9762\uff0c\u5b58\u5355\u72ec\u7684\u58f0\u9053",Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},"\u5e73\u97621 LLLLLLLL"),Object(r.b)("li",{parentName:"ul"},"\u5e73\u97622 RRRRRRR")))),Object(r.b)("ol",{start:6},Object(r.b)("li",{parentName:"ol"},"\u4e00\u4e2a\u6570\u636e\u5305\u542b\u591a\u5c11\u4e2a\u91c7\u6837?\u6216\u8005\u53eb\u4e00\u4e2a\u6570\u636e\u5305\u542b\u591a\u5c11\u5e27\uff1f\u4e00\u4e2a\u6570\u636e\u5305\u5305\u542b\u591a\u5c11\u5b57\u8282\u6570\uff1f")),Object(r.b)("p",null,"mFramesPerPacket"),Object(r.b)("p",null,"\u6bcf\u4e2a\u6570\u636e\u5305\uff0c\u5305\u542b\u7684\u91c7\u6837\u6570"),Object(r.b)("p",null,"pcm \u7c7b\u578b"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\u4ea4\u9519 mFramesPerPacket = 1"),Object(r.b)("li",{parentName:"ul"},"\u975e\u4ea4\u9519 mFramesPerPacket = mChannelsPerFrame")),Object(r.b)("p",null,"mBytesPerPacket"),Object(r.b)("p",null,"\u6bcf\u4e2a\u6570\u636e\u5305\uff0c\u5305\u542b\u7684\u5b57\u8282\u6570\npcm \u7c7b\u578b mBytesPerPacket = mFramesPerPacket * mBytesPerFrame"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"}),Object(r.b)("li",{parentName:"ol"},"\u91c7\u96c6\u51fa\u6765\u7684\u6570\u636e\u591a\u4e45\u5f80\u5916\u9001\u4e00\u6b21\uff1f\u4e00\u6b21\u9001\u7684\u6570\u636e\u6709\u591a\u5927\uff1f")),Object(r.b)("ol",{start:4},Object(r.b)("li",{parentName:"ol"},"\u4e00\u5206\u949f\u5927\u6982\u6709\u591a\u5c11\u6570\u636e\u91cf\uff1f"),Object(r.b)("li",{parentName:"ol"},"\u5982\u679c\u662f\u53cc\u58f0\u9053\uff0c\u5f80\u5916\u9001\u7684\u6570\u636e\u683c\u5f0f\u662f\u600e\u6837\u7684\uff1f"),Object(r.b)("li",{parentName:"ol"},"\u5982\u4f55\u5904\u7406\u8f93\u5165\u8bbe\u5907\u5207\u6362\u4e86\uff1f")),Object(r.b)("p",null,"AudioStreamBasicDescription"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-c++"},"struct AudioStreamBasicDescription\n{\n    Float64             mSampleRate;\n    AudioFormatID       mFormatID;\n    AudioFormatFlags    mFormatFlags;\n    UInt32              mBytesPerPacket;\n    UInt32              mFramesPerPacket;\n    UInt32              mBytesPerFrame;\n    UInt32              mChannelsPerFrame;\n    UInt32              mBitsPerChannel;\n    UInt32              mReserved;\n};\ntypedef struct AudioStreamBasicDescription  AudioStreamBasicDescription;\n")),Object(r.b)("p",null,"\u53c2\u8003\uff1a",Object(r.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/40089d76ea10"},"\u5982\u4f55\u8bbe\u7f6eAudioStreamBasicDescription - \u7b80\u4e66")),Object(r.b)("h3",{id:"\u6570\u636e\u683c\u5f0f"},"\u6570\u636e\u683c\u5f0f"),Object(r.b)("h4",{id:"linear-pcm"},"Linear PCM"),Object(r.b)("p",null,"PCM \u662f\u6700\u5e38\u7528\u7684\u65e0\u635f\u538b\u7f29\u6570\u5b57\u97f3\u9891\u683c\u5f0f\u6570\u636e\u3002"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"sample\uff1a\u91c7\u6837\u3002\u4e00\u4e2a\u91c7\u6837\u70b9\u5bf9\u5355\u58f0\u9053\u91c7\u96c6\u5230\u58f0\u97f3\u7684\u6570\u503c\u3002")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"frame\uff1a\u5e27\u3002\u4e00\u5e27\u6570\u636e\u662f\u4e00\u7ec4\u65f6\u95f4\u4e00\u81f4\u7684samples\uff0c\u53cc\u58f0\u9053\u58f0\u97f3\u6587\u4ef6\u4e2d\u4e00\u5e27\u6709\u4e24\u4e2asamples\uff0c\u4e00\u4e2a\u5de6\u58f0\u9053\uff0c\u4e00\u4e2a\u53f3\u58f0\u9053\u3002")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"packet\uff1a\u5305\u3002\u4e00\u4e2a\u6216\u591a\u4e2a\u8fde\u7eed\u5e27\u7684\u96c6\u5408\u3002\u5728\u7ebf\u6027PCM\u4e2d\u3002\u4e00\u4e2apacket\u91cd\u89c6\u5355\u5e27\uff0c\u5176\u4ed6\u538b\u7f29\u683c\u5f0f\u4e2d\uff0c\u4e00\u4e2apacket\u5b9a\u4e49\u7ed9\u5b9a\u97f3\u9891\u6570\u636e\u683c\u5f0f\u7684\u6700\u5c0f\u6709\u610f\u4e49\u7684\u5e27\u7ec4\u3002"))),Object(r.b)("p",null,"PCM: Pluse Code Modulation\u3002\u8109\u51b2\u7f16\u7801\u8c03\u5236"),Object(r.b)("p",null,"PCM: ",Object(r.b)("a",{parentName:"p",href:"https://baike.baidu.com/item/PCM/1568054?fr=aladdin"},"https://baike.baidu.com/item/PCM/1568054?fr=aladdin")),Object(r.b)("p",null,"pcm\u7f16\u7801: ",Object(r.b)("a",{parentName:"p",href:"https://baike.baidu.com/item/pcm%E7%BC%96%E7%A0%81/10865033?fr=aladdin"},"https://baike.baidu.com/item/pcm%E7%BC%96%E7%A0%81/10865033?fr=aladdin")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"PCM \u5373\u8109\u51b2\u7f16\u7801\u8c03\u5236 (Pulse Code Modulation)\u3002\u5728PCM \u8fc7\u7a0b\u4e2d\uff0c\u5c06\u8f93\u5165\u7684\u6a21\u62df\u4fe1\u53f7\u8fdb\u884c\u91c7\u6837\u3001\u91cf\u5316\u548c\u7f16\u7801\uff0c\u7528\u4e8c\u8fdb\u5236\u8fdb\u884c\u7f16\u7801\u7684\u6570\u6765\u4ee3\u8868\u6a21\u62df\u4fe1\u53f7\u7684\u5e45\u5ea6 \uff1b\u63a5\u6536\u7aef\u518d\u5c06\u8fd9\u4e9b\u7f16\u7801\u8fd8\u539f\u4e3a\u539f\u6765\u7684\u6a21\u62df\u4fe1\u53f7\u3002\u5373\u6570\u5b57\u97f3\u9891\u7684 A/D \u8f6c\u6362\u5305\u62ec\u4e09\u4e2a\u8fc7\u7a0b \uff1a\u91c7\u6837\uff0c\u91cf\u5316\uff0c\u7f16\u7801\u3002")),Object(r.b)("h4",{id:"aif"},"AIF"),Object(r.b)("p",null,"Audio Interchange File Format\uff1a\u97f3\u9891\u4ea4\u6362\u6587\u4ef6\u683c\u5f0f\u3002"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"\u662fApple\u516c\u53f8\u5f00\u53d1\u7684\u4e00\u79cd\u58f0\u97f3\u6587\u4ef6\u683c\u5f0f\uff0c\u88abMacintosh\u5e73\u53f0\u53ca\u5176\u5e94\u7528\u7a0b\u5e8f\u6240\u652f\u6301\uff0cNetscape Navigator\u6d4f\u89c8\u5668\u4e2d\u7684LiveAudio\u4e5f\u652f\u6301AIFF\u683c\u5f0f\uff0cSGI\u53ca\u5176\u5b83\u4e13\u4e1a\u97f3\u9891\u8f6f\u4ef6\u5305\u4e5f\u540c\u6837\u652f\u6301AIFF\u683c\u5f0f\u3002AIFF\u652f\u6301ACE2\u3001ACE8\u3001MAC3\u548cMAC6\u538b\u7f29\uff0c\u652f\u630116\u4f4d44.1kHz\u7acb\u4f53\u58f0\u3002")),Object(r.b)("h3",{id:"\u4ece\u9ea6\u514b\u98ce\u91c7\u96c6"},"\u4ece\u9ea6\u514b\u98ce\u91c7\u96c6"),Object(r.b)("h4",{id:"augraph\u91c7\u96c6"},"AUGraph\u91c7\u96c6"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\u5173\u4e8e AudioBufferList \uff1a")),Object(r.b)("p",null,Object(r.b)("a",{parentName:"p",href:"https://developer.apple.com/documentation/audiotoolbox/kaudiounitproperty_shouldallocatebuffer"},"https://developer.apple.com/documentation/audiotoolbox/kaudiounitproperty_shouldallocatebuffer")),Object(r.b)("p",null," Default value is true, which means that the associated audio unit element creates a buffer for rendering into."),Object(r.b)("p",null," If true, the element will create a buffer for rendering into."),Object(r.b)("p",null," If false, the element will not create a buffer for rendering."),Object(r.b)("p",null," For example, if the audio unit is only ever going to have a connection as its input and never a callback, then it should not need to create a buffer (the API contract expects an audio unit to provide a buffer for callbacks, but no buffer for connections)."),Object(r.b)("p",null," If the audio unit is always going to be pulled for audio with the client providing audio data buffers to the AudioUnitRender call, then it will never need to create an audio buffer on the output side."),Object(r.b)("p",null," So, this property can be used to control the default allocation strategy of an audio unit. If the audio unit needs a buffer, but one hasn't been allocated, then an error will be thrown from that call to AudioUnitRender."),Object(r.b)("p",null," This property cannot be set on initialized audio units as it may end up reallocating memory."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"\u5173\u4e8e \u662f\u5426disable output")),Object(r.b)("p",null,"\u8fd9\u4e2a\u8981\u770b\u60c5\u51b5\uff0c\u4e00\u822c\u7684\u5f55\u5236\u9700\u8981disable\uff0c\u5982\u679c\u9700\u8981\u64ad\u653e\u7684\u5219\u4e0d\u9700\u8981"),Object(r.b)("p",null,"\u53c2\u89c1\uff1a",Object(r.b)("inlineCode",{parentName:"p"},"audio_demo"),"\u5de5\u7a0b ",Object(r.b)("inlineCode",{parentName:"p"},"DYSAudioCaptureManager")," \u7c7b"),Object(r.b)("h4",{id:"audiounit\u91c7\u96c6"},"AudioUnit\u91c7\u96c6"),Object(r.b)("p",null,"Apple\u4e0d\u63a8\u8350\u76f4\u63a5\u4f7f\u7528\u3002\u63a8\u8350\u4f7f\u7528AUGraph\u7684API\uff0c\u56e0\u4e3a\u4ed6\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u3002"),Object(r.b)("p",null,"\u53c2\u89c1\uff1a",Object(r.b)("inlineCode",{parentName:"p"},"audio_demo"),"\u5de5\u7a0b ",Object(r.b)("inlineCode",{parentName:"p"},"DYSAudioCaptureManager")," \u7c7b"),Object(r.b)("h4",{id:"audioqueue\u91c7\u96c6"},"AudioQueue\u91c7\u96c6"),Object(r.b)("p",null,Object(r.b)("a",{parentName:"p",href:"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005343-CH1-SW1"},"Audio Queue Services Programming Guide")),Object(r.b)("p",null,"\u53c2\u8003\uff1a ",Object(r.b)("a",{parentName:"p",href:"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/ConstructingAudioUnitApps/ConstructingAudioUnitApps.html#//apple_ref/doc/uid/TP40009492-CH16-SW22"},"Other Audio Unit Hosting Design Patterns")),Object(r.b)("p",null,"[AppleAudioQueue\u7b14\u8bb0]","(\u97f3\u89c6\u9891/\u5b66\u4e60\u8d44\u6599/\u6559\u7a0b/Audio Queue Services Programming Guide.md)"),Object(r.b)("p",null,"There are two other main design patterns for audio units hosting. To record or analyze audio, create an input-only app with a render callback function. The callback function is invoked by your application, and it in turn invokes the render method of the Remote I/O unit\u2019s input element. However, in most cases, a better choice for an app like this is to use an input audio queue object (of type ",Object(r.b)("inlineCode",{parentName:"p"},"AudioQueueRef")," instantiated using the ",Object(r.b)("inlineCode",{parentName:"p"},"AudioQueueNewInput")," function), as explained in ",Object(r.b)("em",{parentName:"p"},Object(r.b)("a",{parentName:"em",href:"https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005343"},"Audio Queue Services Programming Guide")),". Using an audio queue object provides a great deal more flexibility because its render callback function is not on a realtime thread."),Object(r.b)("p",null,"\u5982\u679c\u662f\u5f55\u5236\u6216\u8005\u5206\u6790\u97f3\u9891\u8fd9\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u7684\u8bdd\uff0cApple\u63a8\u8350\u4f7f\u7528AudioQueue\u3002"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Recording ",Object(r.b)("ol",{parentName:"li"},Object(r.b)("li",{parentName:"ol"})))),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Playing")),Object(r.b)("p",null,"\u97f3\u9891\u6d41\u6570\u636e\u683c\u5f0f\uff1aASBD\uff1aAudioStreamBasicDescription"),Object(r.b)("p",null,"\u4e3b\u8981\u53c2\u6570\uff1a"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"sampleRate: \u91c7\u6837\u7387\u3002\u6a21\u62df\u4fe1\u53f7\u6570\u5b57\u5316\u7684\u8fc7\u7a0b\uff0c\u91c7\u6837\u9891\u7387\u8d8a\u9ad8\uff0c\u6570\u636e\u91cf\u8d8a\u5927\uff0c\u97f3\u8d28\u8d8a\u597d"),Object(r.b)("li",{parentName:"ul"},"channels: \u58f0\u9053\u6570\u3002\u5373\u5355\u58f0\u9053\u6216\u8005\u53cc\u58f0\u9053\uff08iPhone\u65e0\u6cd5\u76f4\u63a5\u91c7\u96c6\u53cc\u58f0\u9053\uff0c\u4f46\u53ef\u4ee5\u6a21\u62df\uff0c\u5373\u590d\u5236\u4e00\u4efd\u91c7\u96c6\u5230\u7684\u5355\u58f0\u9053\u6570\u636e\uff0cAndroid\u90e8\u5206\u673a\u578b\u53ef\u4ee5\u91c7\u96c6\u53cc\u58f0\u9053\uff09"),Object(r.b)("li",{parentName:"ul"},"format: \u6570\u636e\u683c\u5f0f\u3002iOS\u7aef\u8bbe\u5907\u91c7\u96c6\u7684\u539f\u59cb\u6570\u636e\u4e3a\u7ebf\u6027PCM\u7c7b\u578b\u97f3\u9891\u6570\u636e\u3002"),Object(r.b)("li",{parentName:"ul"},"bitsPerChannel: \u4f4d\u5bbd\u3002\u6bcf\u4e2a\u91c7\u6837\u70b9\u7684\u5927\u5c0f\uff0c\u4f4d\u6570\u8d8a\u591a\u8868\u793a\u8d8a\u7cbe\u7ec6\uff0c\u4e00\u822c\u662f8bit\u6216\u800516bit\u3002")),Object(r.b)("p",null,"\u53c2\u8003\uff1a"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",{parentName:"li",href:"https://juejin.cn/post/6844903889007820813"},"(\u5f3a\u70c8\u63a8\u8350)\u79fb\u52a8\u7aef\u97f3\u89c6\u9891\u4ece\u96f6\u5230\u4e0a\u624b")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",{parentName:"li",href:"https://xiaodongxie1024.github.io/2019/05/11/20190511_AudioUnit_capture/"},"Audio Unit\u91c7\u96c6\u97f3\u9891\u5b9e\u6218")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",{parentName:"li",href:"https://juejin.cn/post/6844903842098872327"},"Audio Unit\u91c7\u96c6\u97f3\u9891\u5b9e\u6218"))),Object(r.b)("p",null,"AudioStreamBasicDescription asbd; "),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-objective-c"},"/*!\n    @struct         AudioStreamBasicDescription\n    @abstract       This structure encapsulates all the information for describing the basic\n                    format properties of a stream of audio data.\n    @discussion     This structure is sufficient to describe any constant bit rate format that  has\n                    channels that are the same size. Extensions are required for variable bit rate\n                    data and for constant bit rate data where the channels have unequal sizes.\n                    However, where applicable, the appropriate fields will be filled out correctly\n                    for these kinds of formats (the extra data is provided via separate properties).\n                    In all fields, a value of 0 indicates that the field is either unknown, not\n                    applicable or otherwise is inapproprate for the format and should be ignored.\n                    Note that 0 is still a valid value for most formats in the mFormatFlags field.\n\n                    In audio data a frame is one sample across all channels. In non-interleaved\n                    audio, the per frame fields identify one channel. In interleaved audio, the per\n                    frame fields identify the set of n channels. In uncompressed audio, a Packet is\n                    one frame, (mFramesPerPacket == 1). In compressed audio, a Packet is an\n                    indivisible chunk of compressed data, for example an AAC packet will contain\n                    1024 sample frames.\n \n    @var            mSampleRate\n                        The number of sample frames per second of the data in the stream.\n    @var            mFormatID\n                        The AudioFormatID indicating the general kind of data in the stream.\n    @var            mFormatFlags\n                        The AudioFormatFlags for the format indicated by mFormatID.\n    @var            mBytesPerPacket\n                        The number of bytes in a packet of data.\n    @var            mFramesPerPacket\n                        The number of sample frames in each packet of data.\n    @var            mBytesPerFrame\n                        The number of bytes in a single sample frame of data.\n    @var            mChannelsPerFrame\n                        The number of channels in each frame of data.\n    @var            mBitsPerChannel\n                        The number of bits of sample data for each channel in a frame of data.\n    @var            mReserved\n                        Pads the structure out to force an even 8 byte alignment.\n*/\nstruct AudioStreamBasicDescription\n{\n    Float64             mSampleRate;\n    AudioFormatID       mFormatID;\n    AudioFormatFlags    mFormatFlags;\n    UInt32              mBytesPerPacket;\n    UInt32              mFramesPerPacket;\n    UInt32              mBytesPerFrame;\n    UInt32              mChannelsPerFrame;\n    UInt32              mBitsPerChannel;\n    UInt32              mReserved;\n};\ntypedef struct AudioStreamBasicDescription  AudioStreamBasicDescription;\n")),Object(r.b)("h3",{id:"\u4ece\u6587\u4ef6\u91c7\u96c6"},"\u4ece\u6587\u4ef6\u91c7\u96c6"),Object(r.b)("h2",{id:"\u7ecf\u9a8c\u603b\u7ed3"},"\u7ecf\u9a8c\u603b\u7ed3"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Start\u4e24\u4e2aAUGraph\uff0c",Object(r.b)("inlineCode",{parentName:"li"},"status = AUGraphStart(processingGraph);")," \u4f1a\u8fd4\u56de66635\u3002\u5f00\u542f\u5f55\u5236\u5931\u8d25\u3002")),Object(r.b)("p",null,"\u4e24\u4e2a AUGraph\u3002"),Object(r.b)("p",null,"ios14\u6ca1\u95ee\u9898\u3002ios12\u5d29\u6e83"),Object(r.b)("p",null,"\u4e00\u4e2aAUGraph\uff0c\u4e00\u4e2aAudioUnit"),Object(r.b)("p",null,"\u90fd\u5d29\u6e83"),Object(r.b)("h2",{id:"\u901a\u8fc7\u547d\u4ee4\u884c\u91c7\u96c6"},"\u901a\u8fc7\u547d\u4ee4\u884c\u91c7\u96c6"),Object(r.b)("p",null,"TODO:"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre"},"ffmpeg -f avfoundation -i :0 out.wav\nffplay out.wav\n")),Object(r.b)("h2",{id:"\u53c2\u8003\u8d44\u6599"},"\u53c2\u8003\u8d44\u6599"),Object(r.b)("p",null,"1 hour to learn: the simplest iOS live streaming (5) yuv, pcm data introduction and acquisition ",Object(r.b)("a",{parentName:"p",href:"https://www.programmersought.com/article/9015850852/"},"https://www.programmersought.com/article/9015850852/")))}p.isMDXComponent=!0},329:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return s}));var n=a(0),i=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var c=i.a.createContext({}),u=function(e){var t=i.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=u(e.components);return i.a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,o=e.parentName,c=b(e,["components","mdxType","originalType","parentName"]),p=u(a),d=n,s=p["".concat(o,".").concat(d)]||p[d]||m[d]||r;return a?i.a.createElement(s,l(l({ref:t},c),{},{components:a})):i.a.createElement(s,l({ref:t},c))}));function s(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,o=new Array(r);o[0]=d;var l={};for(var b in t)hasOwnProperty.call(t,b)&&(l[b]=t[b]);l.originalType=e,l.mdxType="string"==typeof e?e:n,o[1]=l;for(var c=2;c<r;c++)o[c]=a[c];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"},880:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/image-20210202220017241-caa7bb302d3a9098779f1f2c71ba48ae.png"},881:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/image-20210202220404351-f888399c44ca9496d9cf2a8404dabc0e.png"},882:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/image-20210202220833714-959fe4cce1cf7ed2a6ce898046fd434b.png"},883:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/1720840-ab85a155d2061835-96fd9fb7919ab4153be01e3bd2aa9874.png"},884:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/image-20210218221422118-8d39589e905f671901787ab178962a3f.png"}}]);