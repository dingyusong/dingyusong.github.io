<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Blog Atom Feed"><title data-react-helmet="true">TSL协议 | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="TSL协议 | My Site"><meta data-react-helmet="true" name="description" content="TSL协议"><meta data-react-helmet="true" property="og:description" content="TSL协议"><meta data-react-helmet="true" property="og:url" content="http://localhost:9999//docs/编程基础/计算机网络/TSL协议"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://localhost:9999//docs/编程基础/计算机网络/TSL协议"><link rel="stylesheet" href="/styles.8cfbcdec.css">
<link rel="preload" href="/styles.1004da7c.js" as="script">
<link rel="preload" href="/runtime~main.74d3fe56.js" as="script">
<link rel="preload" href="/main.b81ad7fb.js" as="script">
<link rel="preload" href="/1.2fe752e0.js" as="script">
<link rel="preload" href="/259.96e24fb8.js" as="script">
<link rel="preload" href="/260.8c75c7b8.js" as="script">
<link rel="preload" href="/935f2afb.8492b0e9.js" as="script">
<link rel="preload" href="/258.d78093f4.js" as="script">
<link rel="preload" href="/37af918a.cb6284e9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">基础</a><a class="navbar__item navbar__link" href="/docs/编程语言/编程语言">语言</a><a class="navbar__item navbar__link" href="/docs/工具/常用工具">工具</a><a class="navbar__item navbar__link" href="/docs/应用开发/应用开发">应用开发</a><a class="navbar__item navbar__link" href="/docs/Apple/iOS开发/iOS开发">Apple</a><a class="navbar__item navbar__link" href="/docs/音视频/音视频">音视频</a><a class="navbar__item navbar__link" href="/docs/项目/项目">项目</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">基础</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/编程语言/编程语言">语言</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/工具/常用工具">工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/应用开发/应用开发">应用开发</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Apple/iOS开发/iOS开发">Apple</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/音视频">音视频</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/项目/项目">项目</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">TSL协议</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tsl协议"></a>TSL协议<a class="hash-link" href="#tsl协议" title="Direct link to heading">#</a></h1><p>TLS(Transport Layer Security)，译为:传输层安全性协议 前身是SSL(Secure Sockets Layer)，译为:安全套接层</p><p>历史版本信息</p><ul><li>SSL 1.0:因存在严重的安全漏洞，从未公开过 </li><li>SSL 2.0:1995年，已于2011年弃用(<a href="https://datatracker.ietf.org/doc/html/rfc6167" target="_blank" rel="noopener noreferrer">RFC 6176</a>) </li><li>SSL 3.0:1996年，已于2015年弃用(<a href="https://datatracker.ietf.org/doc/html/rfc7568" target="_blank" rel="noopener noreferrer">RFC 7568</a>) </li><li>TLS 1.0:1999年(<a href="https://datatracker.ietf.org/doc/html/rfc2246" target="_blank" rel="noopener noreferrer">RFC 2246</a>)</li><li>TLS 1.1:2006年(<a href="https://datatracker.ietf.org/doc/html/rfc4346" target="_blank" rel="noopener noreferrer">RFC 4346</a>)</li><li>TLS 1.2:2008年(<a href="https://datatracker.ietf.org/doc/html/rfc5246" target="_blank" rel="noopener noreferrer">RFC 5246</a>)</li><li>TLS 1.3:2018年(<a href="https://datatracker.ietf.org/doc/html/rfc8446" target="_blank" rel="noopener noreferrer">RFC 8446</a>)</li></ul><p>有没有发现:TLS的RFC文档编号都是以46结尾</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tls12"></a>TLS1.2<a class="hash-link" href="#tls12" title="Direct link to heading">#</a></h2><p><a href="https://datatracker.ietf.org/doc/html/rfc5246" target="_blank" rel="noopener noreferrer">https://datatracker.ietf.org/doc/html/rfc5246</a></p><p><img alt="img" src="/assets/images/v2-4da93c38f9b07d63413a2d05dbb49d43_720w-ab3b605a3a9933bc161ccaf71ffd89a0.jpg"></p><p>从上图可以看出，使用 TLS 1.2 需要两次往返（ 2-RTT ）才能完成握手，然后才能发送请求。</p><p>分为两部分</p><ol><li><p>Record 记录协议</p><p>对称加密</p></li><li><p>Handshake 握手协议</p><p>验证通讯双方身份</p><p>交换加密安全套件</p><p>协商加密参数</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="wireshark抓包通讯过程"></a>Wireshark抓包通讯过程<a class="hash-link" href="#wireshark抓包通讯过程" title="Direct link to heading">#</a></h3><p>参考：TLS1.2抓包文件。</p><p>目的：双方得到一个相同的用于对称加密的密钥。</p><p>No4~18是 TLS1.2 协商的整个过程。</p><p><img alt="image-20210813143649356" src="/assets/images/image-20210813143649356-8c9bb55851779876ed8774f2becf589c.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="客户端-client-hello"></a>客户端-Client Hello<a class="hash-link" href="#客户端-client-hello" title="Direct link to heading">#</a></h4><p><img alt="image-20210813143831147" src="/assets/images/image-20210813143831147-f9e97185863b44bee29a5f5e8278915f.png"></p><p>客户端发送了如下信息</p><ul><li>Version：TSL 1.2 。支持的协议版本TLS1.2。<code>我用的是TLS1.2</code></li><li>Cipher Suites：支持的加密套件22个。<code>我支持这么多，你看着选择一个</code></li><li>Random：客户端随机数。<code>给你我的随机数，后面用于协商对称加密的密钥用</code></li></ul><p>No5是服务器对client hello的确认。</p><p>5,6,7,8的ACK是相同的。可以认为是对同一个请求的响应。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="服务端-server-hello"></a>服务端-Server Hello<a class="hash-link" href="#服务端-server-hello" title="Direct link to heading">#</a></h4><p><img alt="image-20210813144405538" src="/assets/images/image-20210813144405538-cc266dc2039ea825895496d979361da8.png"></p><p>服务端发送了如下信息：</p><ul><li><p>Version：TLS 1.2 。<code>你支持TLS1.2，我也支持TLS1.2，那么确定了就用TLS1.2.</code></p></li><li><p>Random：服务端随机数。<code>给你我的随机数，后面用于协商对称加密的密钥用</code></p></li><li><p>Cipher Suite：<code>我从你支持的加密套件列表中，选择了一个我也支持的，我们后面就用它。</code></p></li></ul><p><img alt="image-20210813150550499" src="/assets/images/image-20210813150550499-0df744ee20f47b78b3c6e09018d2cfb4.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="服务端-certificate"></a>服务端-Certificate<a class="hash-link" href="#服务端-certificate" title="Direct link to heading">#</a></h4><p>这是我的公钥，用来表明我的身份的，你验证一下。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="服务端-server-key-exchange"></a>服务端-Server Key Exchange<a class="hash-link" href="#服务端-server-key-exchange" title="Direct link to heading">#</a></h4><p>Pubkey：基于Server Hello阶段选择的ECDHE交换密钥算法，发送椭圆曲线生成的公钥。</p><p>3 签名 。和RSA握手不同，RSA情况下， 只要能值正常协商密钥，那么必然服务器端有证书对应的私钥，也间接表明了服务器拥有该证书。
DHE/ECDHE不同，证书对应的私钥并不参与密钥协商，如果要证明服务器拥有证书，则必然有签名的操作（就像双向认证的情况下，客户端需要发送certificate verify）。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="服务端-server-hello-done"></a>服务端-Server Hello Done<a class="hash-link" href="#服务端-server-hello-done" title="Direct link to heading">#</a></h4><p>服务端结束打招呼阶段</p><p>到这个阶段：</p><p>此时客户端可以根据</p><ol><li>自己的私钥</li><li>服务端传递过来的公钥（Server Key Exchange 阶段）</li><li>服务端的随机数（Server Hello 阶段）</li></ol><p>这3个参数和ECDHE算法算出一个密钥。</p><p><strong>协商对称加密密钥的过程说明：</strong></p><ul><li>ECDHE算法会根据自己的私钥、客户端/服务端传递过来的公钥、客户端/服务端的随机数生成密钥；</li><li>客户端与服务端通过离散对数的幂运算生成的密钥是一样的；</li><li>由此客户端/服务端生成的对称加密密钥是一致的，但还是会发送一条由此密钥加密的消息让对方进行验证；</li></ul><p>9是对6的确认</p><p>10是对7的确认</p><p>11是对8的确认</p><p>12是TCP的窗口调整，不用管。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="客户端-client-key-exchange"></a>客户端-Client Key Exchange<a class="hash-link" href="#客户端-client-key-exchange" title="Direct link to heading">#</a></h4><p><img alt="image-20210813151843208" src="/assets/images/image-20210813151843208-29c34520158965e50747167889b6ab01.png"></p><p>客户端：“你的证书我验证过了，没问题。“</p><p>Pubkey：这是我的公钥。你拿去。</p><p>14是服务器对13的确认。</p><p>到这个阶段：</p><p>此时服务端可以根据</p><ol><li>自己的私钥</li><li>客户端传递过来的公钥（Client Key Exchange 阶段）</li><li>客户端的随机数（Client Hello 阶段）</li></ol><p>这3个参数和ECDHE算法算出一个密钥。至此：服务端也可以生成自己的用于对称加密的密钥了。</p><p>那么，我们双方算的密钥能不能用呢？还得校验一下。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="客户端-change-cipher-spec-encrypted-handshake-message"></a>客户端-Change Cipher Spec, Encrypted Handshake Message<a class="hash-link" href="#客户端-change-cipher-spec-encrypted-handshake-message" title="Direct link to heading">#</a></h4><p><img alt="image-20210813152415251" src="/assets/images/image-20210813152415251-1056902f0fdb2efdf65de8c517ec86cd.png"></p><p>Change Cipher Spec：变更密码规范协议，它非常简单，就是一条通知消息，告知对方以后的通信都是加密的；</p><p>Enctypted Handshare Message：生成对称加密密钥之后，发送一条加密的数据，让服务端解密验证，如果能验证通过，说明前面商量的密钥没有问题。可以继续。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="服务端-change-cipher-spec-encrypted-handshake-message"></a>服务端-Change Cipher Spec, Encrypted Handshake Message<a class="hash-link" href="#服务端-change-cipher-spec-encrypted-handshake-message" title="Direct link to heading">#</a></h4><p>Change Cipher Spec：告诉客户端以后的通信是加密的；</p><p>Enctypted Handshare Message：发送一条经过密钥加密的数据，让客户端验证；验证通过则开始进行加密通信；</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="applicatiion-data"></a>Applicatiion Data<a class="hash-link" href="#applicatiion-data" title="Direct link to heading">#</a></h4><p>Applicatiion Data：表示客户端/服务端已经开始基于TLS进行通信了；</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="图示协商过程"></a>图示协商过程<a class="hash-link" href="#图示协商过程" title="Direct link to heading">#</a></h3><p><img alt="img" src="/assets/images/F7DB8A8DCD7E4014A4C5A021D4A1AB2C-c2e41309248b0be3ebef16f6932ba122.png"></p><p>参考：<a href="https://www.cnblogs.com/HKUI/p/13866663.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/HKUI/p/13866663.html</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="文字版协商过程"></a>文字版协商过程<a class="hash-link" href="#文字版协商过程" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">第一阶段：C/S两端共享Client Random、Server Random 和 Server Params信息</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">客户端---&gt;服务器：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">客户端的版本号、支持的密码套件，还有一个随机数（Client Random）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">服务端---&gt;客户端：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">客户端的版本号、选择的客户端列表的密码套件如：TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384、随机数随机数（Server Random）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">服务端---&gt;客户端：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">服务端证书（Server Certificate）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">服务端---&gt;客户端：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">发送Server Key Exchange类型的请求，携带椭圆曲线的公钥（Server Params）用以实现密钥交换算法，另附私钥签名</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">服务端---&gt;客户端：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">发送完毕</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">第二阶段：证书验证</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">前验条件：客户端证书链逐级验证、证书公钥验证签名，服务端身份验证成功（证书合法）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">客户端---&gt;服务端</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">发送Client Key Exchange类型的请求，携带椭圆曲线的公钥（Client Params）用以实现秘钥交换算法</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">第三阶段：主密钥生成</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">客户端、服务端分别使用Client Params、Server Params通过ECDHE算法计算出随机值pre-master，然后用</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Client Random、Server Random 和 Pre-Master三个值作为原材料，用PRF伪随机数函数（利用密码套件的摘要算法再次强化结果</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">值maser secert的随机性）计算出主密钥Master Secret，</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">主密钥并不是会话秘钥，还会再用PRF扩展出更多的密钥，比如客户端发送用的会话密钥（client_write_key）、服务器发送用的会话密钥（server_write_key）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">客户端---&gt;服务端:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">客户端发一个“Change Cipher Spec”，然后再发一个“Finished”消息，把之前所有发送的数据做个摘要，再加密一下，让服务器做个验证.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">服务端---&gt;客户端：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">服务器也是同样的操作，发“Change Cipher Spec”和“Finished”消息，双方都验证加密解密 OK，握手正式结束.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tsl-12--协议组成部分"></a>TSL 1.2  协议组成部分<a class="hash-link" href="#tsl-12--协议组成部分" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="记录协议"></a>记录协议<a class="hash-link" href="#记录协议" title="Direct link to heading">#</a></h4><p>Record Protocol ,规定了TLS收发数据的基本单位。它有点类似TCP里的segment,所有的其它子协议都需要通过记录协议发出
但是多个记录数据可以在1个TCP包里一次性发出，也并不需要像TCP那样返回ACK</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="警报协议"></a>警报协议<a class="hash-link" href="#警报协议" title="Direct link to heading">#</a></h4><p>Alert protocol 职责是向对方发出警报信息,类似http协议里的状态码。
比如protocol_version 就死不支持旧版本 bad_certificate就是证书有问题
收到警报后，另一方可以选择终止连接，也可以选择继续</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="握手协议"></a>握手协议<a class="hash-link" href="#握手协议" title="Direct link to heading">#</a></h4><p>（Handshake Protocol）是 TLS 里最复杂的子协议，要比 TCP 的 SYN/ACK 复杂的多，浏览器和服务器会在握手过程中协商</p><ul><li>TLS 版本号、</li><li>随机数、</li><li>密码套件等信息，</li></ul><p>然后交换证书和密钥参数，最终双方协商得到会话密钥，用于后续的混合加密系统</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="变更密码规范协议"></a>变更密码规范协议<a class="hash-link" href="#变更密码规范协议" title="Direct link to heading">#</a></h4><p>（Change Cipher Spec Protocol），它非常简单，就是一个“通知”，告诉对方，后续的数据都将使用加密保护。那么反过来，在它之前，数据都是明文的</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tls13"></a>TLS1.3<a class="hash-link" href="#tls13" title="Direct link to heading">#</a></h2><p><a href="https://tools.ietf.org/html/rfc8446" target="_blank" rel="noopener noreferrer">https://tools.ietf.org/html/rfc8446</a></p><p><img alt="img" src="/assets/images/v2-92d195e62d01c0e085952c6e6c90a75d_720w-5cb8c8c317069b10d49e6ca84a48880c.jpg"></p><p>TLS 1.3 的握手不再支持静态的 RSA 密钥交换，这意味着必须使用带有前向安全的 Diffie-Hellman 进行全面握手。从上图可以看出，使用 TLS 1.3 协议只需要一次往返（ 1-RTT ）就可以完成握手。</p><p>相比 TLS 1.2，TLS 1.3 的握手时间减半。这意味着访问一个移动端网站，使用 TLS 1.3 协议，可能会减少将近 100ms 的时间。</p><p>参考：TLS1.3抓包文件。</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="dys-typora-open://mine/survival/docs/编程基础/计算机网络/TSL协议.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tls12" class="table-of-contents__link">TLS1.2</a><ul><li><a href="#wireshark抓包通讯过程" class="table-of-contents__link">Wireshark抓包通讯过程</a></li><li><a href="#图示协商过程" class="table-of-contents__link">图示协商过程</a></li><li><a href="#文字版协商过程" class="table-of-contents__link">文字版协商过程</a></li><li><a href="#tsl-12--协议组成部分" class="table-of-contents__link">TSL 1.2  协议组成部分</a></li></ul></li><li><a href="#tls13" class="table-of-contents__link">TLS1.3</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.1004da7c.js"></script>
<script src="/runtime~main.74d3fe56.js"></script>
<script src="/main.b81ad7fb.js"></script>
<script src="/1.2fe752e0.js"></script>
<script src="/259.96e24fb8.js"></script>
<script src="/260.8c75c7b8.js"></script>
<script src="/935f2afb.8492b0e9.js"></script>
<script src="/258.d78093f4.js"></script>
<script src="/37af918a.cb6284e9.js"></script>
</body>
</html>