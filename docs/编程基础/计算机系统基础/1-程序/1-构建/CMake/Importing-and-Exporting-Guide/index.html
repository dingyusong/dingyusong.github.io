<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Blog Atom Feed"><title data-react-helmet="true">Importing-and-Exporting-Guide | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Importing-and-Exporting-Guide | My Site"><meta data-react-helmet="true" name="description" content="Importing and Exporting Guide"><meta data-react-helmet="true" property="og:description" content="Importing and Exporting Guide"><meta data-react-helmet="true" property="og:url" content="http://localhost:9999//docs/编程基础/计算机系统基础/1-程序/1-构建/CMake/Importing-and-Exporting-Guide"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://localhost:9999//docs/编程基础/计算机系统基础/1-程序/1-构建/CMake/Importing-and-Exporting-Guide"><link rel="stylesheet" href="/styles.8cfbcdec.css">
<link rel="preload" href="/styles.9f2bd08d.js" as="script">
<link rel="preload" href="/runtime~main.b9916a1e.js" as="script">
<link rel="preload" href="/main.aad198f0.js" as="script">
<link rel="preload" href="/1.c6142e7c.js" as="script">
<link rel="preload" href="/259.bd219e04.js" as="script">
<link rel="preload" href="/260.8c75c7b8.js" as="script">
<link rel="preload" href="/935f2afb.b83995d3.js" as="script">
<link rel="preload" href="/258.77a3145c.js" as="script">
<link rel="preload" href="/4d75c06c.c159ca40.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">基础</a><a class="navbar__item navbar__link" href="/docs/编程语言/编程语言">语言</a><a class="navbar__item navbar__link" href="/docs/工具/常用工具">工具</a><a class="navbar__item navbar__link" href="/docs/应用开发/应用开发">应用开发</a><a class="navbar__item navbar__link" href="/docs/Apple/iOS开发/iOS开发">Apple</a><a class="navbar__item navbar__link" href="/docs/音视频/音视频">音视频</a><a class="navbar__item navbar__link" href="/docs/项目/项目">项目</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">基础</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/编程语言/编程语言">语言</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/工具/常用工具">工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/应用开发/应用开发">应用开发</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Apple/iOS开发/iOS开发">Apple</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/音视频">音视频</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/项目/项目">项目</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Importing-and-Exporting-Guide</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="importing-and-exporting-guide"></a>Importing and Exporting Guide<a class="hash-link" href="#importing-and-exporting-guide" title="Direct link to heading">#</a></h1><p>导入和导出指南</p><p>[toc]</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>In this guide, we will present the concept of <code>IMPORTED</code> targets and demonstrate how to import existing executable or library files from disk into a CMake project. We will then show how CMake supports exporting targets from one CMake-based project and importing them into another. Finally, we will demonstrate how to package a project with a configuration file to allow for easy integration into other CMake projects. This guide and the complete example source code can be found in the <code>Help/guide/importing-exporting</code> directory of the CMake source code tree.</p><p>在本指南中，我们将介绍导入目标的概念，并演示如何将现有的可执行文件或库文件从磁盘导入到CMake项目中。然后，我们将展示CMake如何支持从一个基于CMake的项目导出目标并将它们导入到另一个项目中。最后，我们将演示如何用配置文件打包一个项目，以便轻松地集成到其他CMake项目中。本指南和完整的示例源代码可以在CMake源代码树的Help/guide/importing-exporting目录中找到。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="importing-targets"></a>Importing Targets<a class="hash-link" href="#importing-targets" title="Direct link to heading">#</a></h2><p>IMPORTED targets are used to convert files outside of a CMake project into logical targets inside of the project. IMPORTED targets are created using the IMPORTED option of the add_executable() and add_library() commands. No build files are generated for IMPORTED targets. Once imported, IMPORTED targets may be referenced like any other target within the project and provide a convenient, flexible reference to outside executables and libraries.</p><p>By default, the IMPORTED target name has scope in the directory in which it is created and below. We can use the GLOBAL option to extended visibility so that the target is accessible globally in the build system.</p><p>Details about the IMPORTED target are specified by setting properties whose names begin in IMPORTED<em> and INTERFACE</em>. For example, IMPORTED_LOCATION contains the full path to the target on disk.</p><p>导入的目标用于将CMake项目外部的文件转换为项目内部的逻辑目标。导入的目标是使用<code>add_executable()</code>和<code>add_library()</code>命令的IMPORTED选项创建的。没有为导入的目标生成文件。导入后，导入的目标可以像项目中的任何其他目标一样被引用，并提供对外部可执行文件和库的方便、灵活的引用。</p><p>默认情况下，导入的目标名称在创建它的目录及其下具有作用域。我们可以使用GLOBAL选项来扩展可见性，以便在构建系统中全局访问目标。</p><p>有关导入目标的详细信息是通过设置名称以<code>IMPORTED_</code>和<code>INTERFACE_</code>开头的属性来指定的。例如，导入的位置包含磁盘上目标的完整路径。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="importing-executables"></a>Importing Executables<a class="hash-link" href="#importing-executables" title="Direct link to heading">#</a></h3><p>To start, we will walk through a simple example that creates an <code>IMPORTED</code>executable target and then references it from the <code>add_custom_command()</code>command.</p><p>首先，我们将通过一个简单的示例创建一个导入的可执行目标，然后从<code>add_custom_command()</code>命令引用它。</p><p>We’ll need to do some setup to get started. We want to create an executable that when run creates a basic <code>main.cc</code> file in the current directory. The details of this project are not important. Navigate to <code>Help/guide/importing-exporting/MyExe</code>, create a build directory, run<code>cmake</code>and build and install the project.</p><p>我们需要做一些设置才能开始。我们想要创建一个可执行文件，运行起来会创建一个基本的<code>main.cc</code>当前目录中的文件。这个项目的细节并不重要。导航到<code>Help/guide/importing-exporting/MyExe</code>，创建生成目录，运行<code>cmake</code>，生成并安装项目。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cd Help/guide/importing-exporting/MyExe</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ mkdir build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cd build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cmake ..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cmake --build .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cmake --install . --prefix &lt;install location&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ &lt;install location&gt;/myexe</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ls</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[...] main.cc [...]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Now we can import this executable into another CMake project. The source code for this section is available in <code>Help/guide/importing-exporting/Importing</code>. In the CMakeLists file, use the <code>add_executable()</code> command to create a new target called <code>myexe</code>. Use the <code>IMPORTED</code>option to tell CMake that this target references an executable file located outside of the project. No rules will be generated to build it and the <code>IMPORTED</code> target property will be set to <code>true</code>.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_executable(myexe IMPORTED)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Next, set the [<code>IMPORTED_LOCATION</code>](dfile:///Users/dingyusong/Library/Application Support/Dash/DocSets/CMake/CMake.docset/Contents/Resources/Documents/cmake.org/cmake/help/v3.19/prop_tgt/IMPORTED_LOCATION.html#prop_tgt:IMPORTED_LOCATION) property of the target using the [<code>set_property()</code>](dfile:///Users/dingyusong/Library/Application Support/Dash/DocSets/CMake/CMake.docset/Contents/Resources/Documents/cmake.org/cmake/help/v3.19/command/set_property.html#command:set_property) command. This will tell CMake the location of the target on disk. The location may need to be adjusted to the <code>&lt;install location&gt;</code> specified in the previous step.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">set_property(TARGET myexe PROPERTY</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             IMPORTED_LOCATION &quot;../InstallMyExe/bin/myexe&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>We can now reference this [<code>IMPORTED</code>](dfile:///Users/dingyusong/Library/Application Support/Dash/DocSets/CMake/CMake.docset/Contents/Resources/Documents/cmake.org/cmake/help/v3.19/prop_tgt/IMPORTED.html#prop_tgt:IMPORTED) target just like any target built within the project. In this instance, let’s imagine that we want to use the generated source file in our project. Use the [<code>IMPORTED</code>](dfile:///Users/dingyusong/Library/Application Support/Dash/DocSets/CMake/CMake.docset/Contents/Resources/Documents/cmake.org/cmake/help/v3.19/prop_tgt/IMPORTED.html#prop_tgt:IMPORTED) target in the [<code>add_custom_command()</code>](dfile:///Users/dingyusong/Library/Application Support/Dash/DocSets/CMake/CMake.docset/Contents/Resources/Documents/cmake.org/cmake/help/v3.19/command/add_custom_command.html#command:add_custom_command) command:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_custom_command(OUTPUT main.cc COMMAND myexe)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>As <code>COMMAND</code> specifies an executable target name, it will automatically be replaced by the location of the executable given by the [<code>IMPORTED_LOCATION</code>](dfile:///Users/dingyusong/Library/Application Support/Dash/DocSets/CMake/CMake.docset/Contents/Resources/Documents/cmake.org/cmake/help/v3.19/prop_tgt/IMPORTED_LOCATION.html#prop_tgt:IMPORTED_LOCATION) property above.</p><p>Finally, use the output from <code>add_custom_command()</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_executable(mynewexe main.cc)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="importing-libraries"></a>Importing Libraries<a class="hash-link" href="#importing-libraries" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="exporting-targets"></a>Exporting Targets<a class="hash-link" href="#exporting-targets" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="creating-packages"></a>Creating Packages<a class="hash-link" href="#creating-packages" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="creating-a-package-configuration-file"></a>Creating a Package Configuration File<a class="hash-link" href="#creating-a-package-configuration-file" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="creating-a-package-version-file"></a>Creating a Package Version File<a class="hash-link" href="#creating-a-package-version-file" title="Direct link to heading">#</a></h4><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="exporting-targets-from-the-build-tree"></a>Exporting Targets from the Build Tree<a class="hash-link" href="#exporting-targets-from-the-build-tree" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="building-and-installing-a-package"></a>Building and Installing a Package<a class="hash-link" href="#building-and-installing-a-package" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="creating-relocatable-packages"></a>Creating Relocatable Packages<a class="hash-link" href="#creating-relocatable-packages" title="Direct link to heading">#</a></h2><p>创建可重定位包</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="using-the-package-configuration-file"></a>Using the Package Configuration File<a class="hash-link" href="#using-the-package-configuration-file" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="adding-components"></a>Adding Components<a class="hash-link" href="#adding-components" title="Direct link to heading">#</a></h2></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="dys-typora-open://mine/survival/docs/编程基础/计算机系统基础/1-程序/1-构建/CMake/Importing-and-Exporting-Guide.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#importing-targets" class="table-of-contents__link">Importing Targets</a><ul><li><a href="#importing-executables" class="table-of-contents__link">Importing Executables</a></li><li><a href="#importing-libraries" class="table-of-contents__link">Importing Libraries</a></li></ul></li><li><a href="#exporting-targets" class="table-of-contents__link">Exporting Targets</a><ul><li><a href="#creating-packages" class="table-of-contents__link">Creating Packages</a></li><li><a href="#exporting-targets-from-the-build-tree" class="table-of-contents__link">Exporting Targets from the Build Tree</a></li><li><a href="#building-and-installing-a-package" class="table-of-contents__link">Building and Installing a Package</a></li></ul></li><li><a href="#creating-relocatable-packages" class="table-of-contents__link">Creating Relocatable Packages</a></li><li><a href="#using-the-package-configuration-file" class="table-of-contents__link">Using the Package Configuration File</a></li><li><a href="#adding-components" class="table-of-contents__link">Adding Components</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.9f2bd08d.js"></script>
<script src="/runtime~main.b9916a1e.js"></script>
<script src="/main.aad198f0.js"></script>
<script src="/1.c6142e7c.js"></script>
<script src="/259.bd219e04.js"></script>
<script src="/260.8c75c7b8.js"></script>
<script src="/935f2afb.b83995d3.js"></script>
<script src="/258.77a3145c.js"></script>
<script src="/4d75c06c.c159ca40.js"></script>
</body>
</html>