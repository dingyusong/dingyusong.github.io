<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Blog Atom Feed"><title data-react-helmet="true">CMake | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="CMake | My Site"><meta data-react-helmet="true" name="description" content="CMake"><meta data-react-helmet="true" property="og:description" content="CMake"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/ç¼–ç¨‹åŸºç¡€/è®¡ç®—æœºç³»ç»ŸåŸºç¡€/1-ç¨‹åº/1-æ„å»º/CMake/CMake"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/ç¼–ç¨‹åŸºç¡€/è®¡ç®—æœºç³»ç»ŸåŸºç¡€/1-ç¨‹åº/1-æ„å»º/CMake/CMake"><link rel="stylesheet" href="/styles.8cfbcdec.css">
<link rel="preload" href="/styles.9888532b.js" as="script">
<link rel="preload" href="/runtime~main.73fb2e0e.js" as="script">
<link rel="preload" href="/main.a2e30791.js" as="script">
<link rel="preload" href="/1.fa235d9f.js" as="script">
<link rel="preload" href="/2.8423217f.js" as="script">
<link rel="preload" href="/257.8905f2ed.js" as="script">
<link rel="preload" href="/258.3860215e.js" as="script">
<link rel="preload" href="/935f2afb.ce536a1e.js" as="script">
<link rel="preload" href="/17896441.d8a5f7af.js" as="script">
<link rel="preload" href="/86b47624.f254bcf7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/ç¼–ç¨‹åŸºç¡€/ç¼–ç¨‹åŸºç¡€/ç¼–ç¨‹åŸºç¡€">ç¼–ç¨‹åŸºç¡€</a><a class="navbar__item navbar__link" href="/docs/ç¼–ç¨‹è¯­è¨€/ç¼–ç¨‹è¯­è¨€">ç¼–ç¨‹è¯­è¨€</a><a class="navbar__item navbar__link" href="/docs/å·¥å…·/å¸¸ç”¨å·¥å…·">å·¥å…·</a><a class="navbar__item navbar__link" href="/docs/åº”ç”¨å¼€å‘/åº”ç”¨å¼€å‘">åº”ç”¨å¼€å‘</a><a class="navbar__item navbar__link" href="/docs/Apple/iOSå¼€å‘/iOSå¼€å‘">Apple</a><a class="navbar__item navbar__link" href="/docs/éŸ³è§†é¢‘/éŸ³è§†é¢‘">éŸ³è§†é¢‘</a><a class="navbar__item navbar__link" href="/docs/é¡¹ç›®/é¡¹ç›®">é¡¹ç›®</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/ç¼–ç¨‹åŸºç¡€/ç¼–ç¨‹åŸºç¡€/ç¼–ç¨‹åŸºç¡€">ç¼–ç¨‹åŸºç¡€</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ç¼–ç¨‹è¯­è¨€/ç¼–ç¨‹è¯­è¨€">ç¼–ç¨‹è¯­è¨€</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/å·¥å…·/å¸¸ç”¨å·¥å…·">å·¥å…·</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/åº”ç”¨å¼€å‘/åº”ç”¨å¼€å‘">åº”ç”¨å¼€å‘</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Apple/iOSå¼€å‘/iOSå¼€å‘">Apple</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/éŸ³è§†é¢‘/éŸ³è§†é¢‘">éŸ³è§†é¢‘</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/é¡¹ç›®/é¡¹ç›®">é¡¹ç›®</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">CMake</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="cmake"></a>CMake<a class="hash-link" href="#cmake" title="Direct link to heading">#</a></h1><p>[toc]</p><p>æºç æ‰€åœ¨ä½ç½®</p><p><a href="https://github.com/Kitware/CMake" target="_blank" rel="noopener noreferrer">https://github.com/Kitware/CMake</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ç®€ä»‹"></a>ç®€ä»‹<a class="hash-link" href="#ç®€ä»‹" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ä¸ºä½•ç”¨cmakeï¼Ÿ"></a>ä¸ºä½•ç”¨Cmakeï¼Ÿ<a class="hash-link" href="#ä¸ºä½•ç”¨cmakeï¼Ÿ" title="Direct link to heading">#</a></h3><p>åœ¨linuxç¯å¢ƒç¼–å†™ç¨‹åºï¼Œå› æ²¡æœ‰ç±»ä¼¼äºvisual studioã€vs codeç­‰IDE(é›†æˆå¼€å‘ç¯å¢ƒ)ï¼Œé‚£ä¹ˆå¦‚ä½•ç¼–è¯‘ã€è¿è¡Œç¨‹åºå‘¢ï¼Ÿä¸€ç§æ–¹æ³•æ˜¯ç¼–å†™makefileæ–‡ä»¶ï¼Œç”¨makefileæ–‡ä»¶ç®¡ç†ç¨‹åºè„šæœ¬ä¹‹é—´çš„ç›¸äº’ä¾èµ–å…³ç³»ï¼Œå…¶è¯­æ³•ç›¸å¯¹æ¯”è¾ƒå¤æ‚ã€‚å¦ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•å°±æ˜¯åˆ©ç”¨cmakeå·¥å…·ï¼Œè‡ªåŠ¨ç”Ÿæˆmakefileæ–‡ä»¶ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="cmakeæ˜¯ä»€ä¹ˆï¼Ÿ"></a>CMakeæ˜¯ä»€ä¹ˆï¼Ÿ<a class="hash-link" href="#cmakeæ˜¯ä»€ä¹ˆï¼Ÿ" title="Direct link to heading">#</a></h3><p>CMakeæ˜¯ä¸€ä¸ª<strong>è·¨å¹³å°</strong>çš„å®‰è£…ï¼ˆç¼–è¯‘ï¼‰å·¥å…·ï¼Œå¯ä»¥ç”¨ç®€å•çš„è¯­å¥æ¥æè¿°æ‰€æœ‰å¹³å°çš„å®‰è£…(ç¼–è¯‘è¿‡ç¨‹)ã€‚Linux/Ubuntuä¸ŠåŸºæœ¬éƒ½é¢„å…ˆå®‰è£…å¥½äº†cmakeå·¥å…·ï¼Œç”¨ sudo apt-get install ä¹Ÿå¯ä»¥è‡ªåŠ¨å®‰è£…ã€‚è¦ä½¿ç”¨cmakeå¿…é¡»åœ¨å·¥ç¨‹çš„æ¯ä¸ªæ–‡ä»¶å¤¹ä¸­éƒ½ç¼–å†™CMakeLists.txtï¼Œå°¤å…¶æ³¨æ„Cã€Mã€Læ˜¯å¤§å†™ï¼Œå¹¶ä¸”æ˜¯å¤æ•°å½¢å¼ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="åŸºç¡€"></a>åŸºç¡€<a class="hash-link" href="#åŸºç¡€" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è¯­æ³•"></a>è¯­æ³•<a class="hash-link" href="#è¯­æ³•" title="Direct link to heading">#</a></h3><p><a href="http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#cmake-language-variables" target="_blank" rel="noopener noreferrer">http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#cmake-language-variables</a></p><p>å¯ä»¥å°†Cmakeç†è§£ä¸ºä¸€é—¨è¯­è¨€ã€‚</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æ•°æ®"></a>æ•°æ®<a class="hash-link" href="#æ•°æ®" title="Direct link to heading">#</a></h4><p>å˜é‡è®¾ç½®ï¼Œå˜é‡å­˜å–</p><p><a href="http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#cmake-language-variables" target="_blank" rel="noopener noreferrer">http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#cmake-language-variables</a></p><p>Their values are always of string type, though some commands may interpret the strings as values of other types. </p><p>å˜é‡æ€»æ˜¯Stringç±»å‹ã€‚</p><p>å‚è€ƒ - <a href="https://www.cnblogs.com/xianghang123/p/3556425.html" target="_blank" rel="noopener noreferrer">cmake å¸¸ç”¨å˜é‡å’Œå¸¸ç”¨ç¯å¢ƒå˜é‡æŸ¥è¡¨æ‰‹å†Œ---æ•´ç† .</a></p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å†…ç½®çš„å˜é‡"></a>å†…ç½®çš„å˜é‡<a class="hash-link" href="#å†…ç½®çš„å˜é‡" title="Direct link to heading">#</a></h5><h6><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="variables"></a><a href="http://cmake.org/cmake/help/v3.21/manual/cmake-variables.7.html" target="_blank" rel="noopener noreferrer"><strong>variables</strong></a><a class="hash-link" href="#variables" title="Direct link to heading">#</a></h6><p>9ç±»å˜é‡</p><h6><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="env-variables"></a><a href="http://cmake.org/cmake/help/v3.21/manual/cmake-env-variables.7.html" target="_blank" rel="noopener noreferrer"><strong>env-variables</strong></a><a class="hash-link" href="#env-variables" title="Direct link to heading">#</a></h6><p>5ç±»ç¯å¢ƒå˜é‡</p><hr><h6><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="property"></a><a href="http://cmake.org/cmake/help/v3.21/manual/cmake-properties.7.html" target="_blank" rel="noopener noreferrer"><strong>property</strong></a><a class="hash-link" href="#property" title="Direct link to heading">#</a></h6><p>7ç±»property</p><hr><p>å˜é‡å’Œpropertyçš„åŒºåˆ«</p><p>A very short and simple way to think about it is that properties are variables scoped to a targetã€‚</p><p>Propertyæ˜¯ä½œç”¨åœ¨targetä¸Šçš„variablesã€‚</p><p>å‚è€ƒï¼š<a href="https://stackoverflow.com/questions/49958208/what-is-the-difference-between-cmake-variables-and-properties" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/49958208/what-is-the-difference-between-cmake-variables-and-properties</a></p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è‡ªå®šä¹‰å˜é‡"></a>è‡ªå®šä¹‰å˜é‡<a class="hash-link" href="#è‡ªå®šä¹‰å˜é‡" title="Direct link to heading">#</a></h5><p>The set() and unset() commands explicitly set or unset a variable</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(var ...) # æ²¡æœ‰ç¼“å­˜çš„å˜é‡</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(Var ... CACHE) # æ²¡æœ‰ç¼“å­˜æ‰è®¾ç½®ï¼Œç›¸å½“äºMakeFile çš„ ?=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(Var ... FORCE) # å¼ºåˆ¶ä¿®æ”¹å˜é‡ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#egï¼šset(TTTT tttt) # ä½¿ç”¨${TTTT}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><hr><p>å­—ç¬¦ä¸²æ“ä½œ</p><p><a href="http://cmake.org/cmake/help/v3.21/command/string.html" target="_blank" rel="noopener noreferrer">http://cmake.org/cmake/help/v3.21/command/string.html</a></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Found Python: /usr/local/Frameworks/Python.framework/Versions/3.9/bin/python3.9 (found version &quot;3.9.6&quot;) found components: Interpreter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Looking for pthread.h</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Looking for pthread.h - found</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Performing Test CMAKE_HAVE_LIBC_PTHREAD</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Found Threads: TRUE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMake Error at CMakeLists.txt:34 (set_target_properties):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  set_target_properties called with incorrect number of arguments.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Configuring incomplete, errors occurred!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">See also &quot;/Users/dingyusong/Desktop/duobei/rz-logan-oc/build/CMakeFiles/CMakeOutput.log&quot;.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Command line invocation:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    /Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild -project RZLogan.xcodeproj build -target ALL_BUILD -parallelizeTargets -configuration Debug -hideShellScriptEnvironment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">User defaults from command line:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HideShellScriptEnvironment = YES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    IDEPackageSupportUseBuiltinSCM = YES</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">set_target_properties(${LIB_TARGET_NAME} </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PROPERTIES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XCODE_ATTRIBUTE_CLANG_ENABLE_OBJC_ARC YES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PUBLIC_HEADER &quot;${public_headers}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># PUBLIC_HEADER ${public_headers}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># CXX_VISIBILITY_PRESET hidden</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># VISIBILITY_INLINES_HIDDEN 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="scope"></a>Scope<a class="hash-link" href="#scope" title="Direct link to heading">#</a></h5><p>å˜é‡çš„ä½œç”¨åŸŸ</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è¿ç®—"></a>è¿ç®—<a class="hash-link" href="#è¿ç®—" title="Direct link to heading">#</a></h4><p>æ•°æ®çš„è¿ç®—ï¼Œæ‹¼æ¥</p><p><a href="https://cmake.org/cmake/help/v3.21/command/if.html#condition-syntax" target="_blank" rel="noopener noreferrer">https://cmake.org/cmake/help/v3.21/command/if.html#condition-syntax</a></p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="é€»è¾‘è¿ç®—"></a>é€»è¾‘è¿ç®—<a class="hash-link" href="#é€»è¾‘è¿ç®—" title="Direct link to heading">#</a></h5><p><a href="https://cmake.org/cmake/help/v3.21/command/if.html#logic-operators" target="_blank" rel="noopener noreferrer">https://cmake.org/cmake/help/v3.21/command/if.html#logic-operators</a></p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æ¯”è¾ƒè¿ç®—"></a>æ¯”è¾ƒè¿ç®—<a class="hash-link" href="#æ¯”è¾ƒè¿ç®—" title="Direct link to heading">#</a></h5><p><a href="https://cmake.org/cmake/help/v3.21/command/if.html#comparisons" target="_blank" rel="noopener noreferrer">https://cmake.org/cmake/help/v3.21/command/if.html#comparisons</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æ§åˆ¶"></a>æ§åˆ¶<a class="hash-link" href="#æ§åˆ¶" title="Direct link to heading">#</a></h4><p><a href="http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#control-structures" target="_blank" rel="noopener noreferrer">http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#control-structures</a></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(${PLATFORM} MATCHES &quot;MAC&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    project(RZLogan_macOS)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    project(RZLogan_iOS)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">endif()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è¿‡ç¨‹"></a>è¿‡ç¨‹<a class="hash-link" href="#è¿‡ç¨‹" title="Direct link to heading">#</a></h4><p><a href="http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#command-definitions" target="_blank" rel="noopener noreferrer">http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#command-definitions</a></p><p>The <a href="https://cmake.org/cmake/help/v3.21/command/macro.html#command:macro" target="_blank" rel="noopener noreferrer"><code>macro()</code></a>/<a href="https://cmake.org/cmake/help/v3.21/command/endmacro.html#command:endmacro" target="_blank" rel="noopener noreferrer"><code>endmacro()</code></a>, and <a href="https://cmake.org/cmake/help/v3.21/command/function.html#command:function" target="_blank" rel="noopener noreferrer"><code>function()</code></a>/<a href="https://cmake.org/cmake/help/v3.21/command/endfunction.html#command:endfunction" target="_blank" rel="noopener noreferrer"><code>endfunction()</code></a> commands delimit code blocks to be recorded for later invocation as commands.</p><p>ç±»ä¼¼å‡½æ•°ï¼Œè‡ªå®šä¹‰å‡½æ•°ï¼Œå‡½æ•°è°ƒç”¨ç­‰</p><p>cmakeä¸­çš„ç±»ä¼¼çš„æ¦‚å¿µå«commandã€‚</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è‡ªå®šä¹‰å‡½æ•°"></a>è‡ªå®šä¹‰å‡½æ•°<a class="hash-link" href="#è‡ªå®šä¹‰å‡½æ•°" title="Direct link to heading">#</a></h5><p><a href="http://cmake.org/cmake/help/v3.21/command/function.html" target="_blank" rel="noopener noreferrer">http://cmake.org/cmake/help/v3.21/command/function.html</a></p><hr><p><strong>macro</strong></p><p>Start recording a macro for later invocation as a command</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">macro(&lt;name&gt; [&lt;arg1&gt; ...])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;commands&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">endmacro()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Defines a macro named <code>&lt;name&gt;</code> that takes arguments named <code>&lt;arg1&gt;</code>, â€¦ Commands listed after macro, but before the matching [<code>endmacro()</code>], are not executed until the macro is invoked.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cmake codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">macro(set_xcode_property TARGET XCODE_PROPERTY XCODE_VALUE XCODE_RELVERSION)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  set(XCODE_RELVERSION_I &quot;${XCODE_RELVERSION}&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if(XCODE_RELVERSION_I STREQUAL &quot;All&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    set_property(TARGET ${TARGET} PROPERTY</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    XCODE_ATTRIBUTE_${XCODE_PROPERTY} &quot;${XCODE_VALUE}&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  else()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    set_property(TARGET ${TARGET} PROPERTY</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    XCODE_ATTRIBUTE_${XCODE_PROPERTY}[variant=${XCODE_RELVERSION_I}] &quot;${XCODE_VALUE}&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  endif()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">endmacro(set_xcode_property)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å†…ç½®å‡½æ•°"></a>å†…ç½®å‡½æ•°<a class="hash-link" href="#å†…ç½®å‡½æ•°" title="Direct link to heading">#</a></h5><p><a href="http://cmake.org/cmake/help/v3.21/manual/cmake-commands.7.html" target="_blank" rel="noopener noreferrer">http://cmake.org/cmake/help/v3.21/manual/cmake-commands.7.html</a></p><hr><p><strong>æ‰“å°ä¿¡æ¯</strong></p><p>Log a message.</p><p>Synopsis</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">General messages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  message([&lt;mode&gt;] &quot;message text&quot; ...)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Reporting checks</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  message(&lt;checkState&gt; &quot;message text&quot; ...)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ç¯å¢ƒ"></a>ç¯å¢ƒ<a class="hash-link" href="#ç¯å¢ƒ" title="Direct link to heading">#</a></h3><p>ç¯å¢ƒå˜é‡ï¼Œç¯å¢ƒè¿‡ç¨‹ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è§£é‡Šæ‰§è¡Œ"></a>è§£é‡Š/æ‰§è¡Œ<a class="hash-link" href="#è§£é‡Šæ‰§è¡Œ" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-text codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ç¼–å†™æ–‡ä»¶CMakeLists.txt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">æ‰§è¡Œå‘½ä»¤â€œcmake PATHâ€æˆ–è€…â€œccmake PATHâ€ç”ŸæˆMakefile (PATHæ˜¯CMakeLists.txtæ‰€åœ¨çš„ç›®å½•)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ä½¿ç”¨makeå‘½ä»¤è¿›è¡Œç¼–è¯‘æºç ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºæˆ–å…±äº«åº“ï¼ˆso(shared object)ï¼‰</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>cmake æŒ‡å‘CMakeLists.txtæ‰€åœ¨çš„ç›®å½•ï¼Œä¾‹å¦‚ cmake .. è¡¨ç¤ºCMakeLists.txtåœ¨å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•ã€‚cmakeåä¼šç”Ÿæˆå¾ˆå¤šç¼–è¯‘çš„ä¸­é—´æ–‡ä»¶ä»¥åŠmakefileæ–‡ä»¶ï¼Œæ‰€ä»¥ä¸€èˆ¬å»ºè®®æ–°å»ºä¸€ä¸ªæ–°çš„ç›®å½•ï¼Œä¸“é—¨ç”¨æ¥ç¼–è¯‘</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-text codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cmake ..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">make</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ä½¿ç”¨è¯´æ˜"></a>ä½¿ç”¨è¯´æ˜<a class="hash-link" href="#ä½¿ç”¨è¯´æ˜" title="Direct link to heading">#</a></h2><p>cmakeæ˜¯ä»¥å®ŒæˆäºŒè¿›åˆ¶çš„æ„å»ºä¸ºç›®çš„çš„å·¥å…·ã€‚äºŒè¿›åˆ¶çš„æ„å»ºä¸€èˆ¬åˆ†ä¸ºï¼Œé¢„ç¼–è¯‘ï¼Œç¼–è¯‘ï¼Œæ±‡ç¼–ï¼Œé“¾æ¥ï¼Œ4ä¸ªæ­¥éª¤ã€‚å½“ç„¶llvmçš„æ­¥éª¤æ›´å¤šã€‚ä½†æ˜¯å¤§ä½“å¯åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µã€‚</p><ol><li>ç¼–è¯‘<ol><li>éœ€è¦æŒ‡å®šæºç ï¼Œå¤´æ–‡ä»¶ä½ç½®ã€‚</li><li>éœ€è¦æŒ‡å®šä¸€äº›ç¼–è¯‘çš„å‚æ•°ï¼ˆç›®æ ‡å¹³å°ï¼Œæ¶æ„ç­‰ï¼‰</li></ol></li><li>é“¾æ¥<ol><li>éœ€è¦æŒ‡å®šéœ€è¦è¿æ¥çš„åº“å’Œåº“ä½ç½®ã€‚</li></ol></li></ol><p>ä»¥ä¸Šï¼Œä¾¿æ˜¯CMakeå¤§æ¦‚éœ€è¦åšçš„å·¥ä½œã€‚å¦‚æ­¤ä¾¿å¯ä»¥æ›´å¥½çš„ç†è§£CMakeäº†ã€‚</p><p>Modern CMake å›´ç»• <strong>Targets</strong> å’Œ <strong>Properties</strong> å±•å¼€ï¼Œå› æ­¤å¸¸ç”¨çš„å‘½ä»¤å¦‚ä¸‹:</p><p><em>åˆ›å»º target</em></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_library()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_exectutable()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_sources()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><em>ä¸º target æŒ‡å®šå‚æ•°</em></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">## é¢„å¤„ç†å¤´æ–‡ä»¶æœç´¢è·¯å¾„ -I</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_include_directories()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## ç¼–è¯‘å® è‡ªåŠ¨åœ¨æŒ‡å®šçš„å®å‰æ·»åŠ  -D</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_compile_definitions()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## ç¼–è¯‘é€‰é¡¹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_compile_options()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## é“¾æ¥åº“æœç´¢è·¯å¾„ -L</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_link_directories()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## é“¾æ¥é€‰é¡¹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_link_options()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">## é“¾æ¥åº“</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_link_libraries()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="targetå’Œproject"></a>targetå’Œproject<a class="hash-link" href="#targetå’Œproject" title="Direct link to heading">#</a></h3><p>targetæ˜¯æ•´ä¸ªmakeçš„ç›®æ ‡ã€‚targetå¿…é¡»ä¾èµ–projectå­˜åœ¨ï¼Œæ²¡æœ‰projectæ²¡æ³•ç¼–è¯‘ã€‚ç±»ä¼¼Xcodeé¡¹ç›®ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(${PLATFORM} MATCHES &quot;MAC&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    project(RZLogan_macOS)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    project(RZLogan_iOS)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">endif()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ç›¸å½“äºç¼–è¯‘å™¨çš„<code>-o</code>å’Œæºä»£ç åˆ—è¡¨</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">clang -o hello hello.c</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ç­‰ä»·äº</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_executable(hello hello.c)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><a href="http://cmake.org/cmake/help/v3.21/manual/cmake-buildsystem.7.html#binary-targets" target="_blank" rel="noopener noreferrer">http://cmake.org/cmake/help/v3.21/manual/cmake-buildsystem.7.html#binary-targets</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="binary-executables"></a>Binary Executables<a class="hash-link" href="#binary-executables" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_executable(mytool mytool.cpp)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="binary-library"></a>Binary Library<a class="hash-link" href="#binary-library" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_library(archive SHARED archive.cpp zip.cpp lzma.cpp)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_library(archive STATIC archive.cpp zip.cpp lzma.cpp)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_library(MyFramework SHARED MyFramework.cpp)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set_target_properties(MyFramework PROPERTIES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  FRAMEWORK TRUE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  FRAMEWORK_VERSION A # Version &quot;A&quot; is macOS convention</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  MACOSX_FRAMEWORK_IDENTIFIER org.cmake.MyFramework</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><hr><p>è®¾ç½®ä¸€ä¸ªå˜é‡ï¼šæ¥ä¿å­˜æºæ–‡ä»¶åˆ—è¡¨</p><ul><li><p>éœ€è¦ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œæ¥å®šä½æºæ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹</p><p><a href="http://cmake.org/cmake/help/v3.21/manual/cmake-variables.7.html#variables-that-describe-the-system" target="_blank" rel="noopener noreferrer">http://cmake.org/cmake/help/v3.21/manual/cmake-variables.7.html#variables-that-describe-the-system</a></p></li><li><p>éœ€è¦å˜é‡æ¥ä¿å­˜æºæ–‡ä»¶åˆ—è¡¨</p></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(oc_src_folder &quot;${CMAKE_CURRENT_LIST_DIR}&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(oc_src_upload_folder &quot;${CMAKE_CURRENT_LIST_DIR}/Upload&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">file(GLOB logan_oc_source_files </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;${oc_src_folder}/*.m&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;${oc_src_folder}/*.mm&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;${oc_src_folder}/*.h&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;${oc_src_upload_folder}/*.m&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;${oc_src_upload_folder}/*.mm&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;${oc_src_upload_folder}/*.h&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><hr><p>è®¾ç½®ä¸€ä¸ªå˜é‡ï¼šæ¥ä¿å­˜TargetName</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(LIB_TARGET_NAME rzlogan)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è®¾ç½®"></a>è®¾ç½®<a class="hash-link" href="#è®¾ç½®" title="Direct link to heading">#</a></h3><p>Properties</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="é¢„ç¼–è¯‘è®¾ç½®"></a>é¢„ç¼–è¯‘è®¾ç½®<a class="hash-link" href="#é¢„ç¼–è¯‘è®¾ç½®" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æŒ‡å®šå¤´æ–‡ä»¶è·¯å¾„"></a><strong>æŒ‡å®šå¤´æ–‡ä»¶è·¯å¾„</strong><a class="hash-link" href="#æŒ‡å®šå¤´æ–‡ä»¶è·¯å¾„" title="Direct link to heading">#</a></h5><p>include_directories</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">include_directories` vs `target_include_directories</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><blockquote><p><code>include_directories(x/y)</code> affects directory scope. All targets in this CMakeList, as well as those in all subdirectories added after the point of its call, will have the path <code>x/y</code> added to their include path.</p><p><code>target_include_directories(t x/y)</code> has target scopeâ€”it adds <code>x/y</code> to the include path for target <code>t</code>.</p><p>You want the former one if all of your targets use the include directories in question. You want the latter one if the path is specific to a target, or if you want finer control of the path&#x27;s visibility. The latter comes from the fact that <code>target_include_directories()</code> supports the <code>PRIVATE</code>, <code>PUBLIC</code>, and <code>INTERFACE</code> qualifiers.</p></blockquote><p><code>include_directories</code> ä¹‹åï¼Œä¼šå¯¹ä¹‹åçš„targetçš„é€ æˆå½±å“ã€‚æœ‰é¡ºåºå…³ç³»ã€‚</p><p>å¦‚æœæœ‰ä¸åŒç›®å½•ç›¸åŒåç§°çš„å¤´æ–‡ä»¶ä¼šäº§ç”Ÿå½±å“ï¼Œæ‰€ä»¥è¿™é‡Œå»ºè®®é’ˆå¯¹ç‰¹å®šçš„targetè¿›è¡Œæ·»åŠ å¤´æ–‡ä»¶çš„æ“ä½œï¼Œä¸è¦ä½¿ç”¨<code>include_directories</code></p><blockquote><p>If PRIVATE is specified for a certain option/property, then that option/property will only impact the current target. If PUBLIC is specified, then the option/property impacts both the current target and any others that link to it. If INTERFACE is specified, then the option/property does not impact the current target but will propagate to other targets that link to it.</p></blockquote><p>public: å¤´æ–‡ä»¶å¯ä»¥æä¾›ç»™ä¾èµ–çš„åº“å’Œè‡ªå·±ä½¿ç”¨</p><p>interfaceï¼š å¤´æ–‡ä»¶æä¾›ç»™ä¾èµ–çš„åº“ä½¿ç”¨ï¼Œä½†è‡ªå·±ä¸ä½¿ç”¨ï¼Œåœºæ™¯ï¼šå°è£…ä¸€ä¸ªsdkï¼Œä¾›å¤–éƒ¨ä½¿ç”¨çš„å¤´æ–‡ä»¶å’Œå†…éƒ¨ä½¿ç”¨çš„å¤´æ–‡ä»¶ï¼Œè¿™æ—¶å€™å°±å¾ˆæœ‰ç”¨äº†</p><p>privateï¼šå¤´æ–‡ä»¶è‡ªå·±ä½¿ç”¨ï¼Œä¸æä¾›ç»™å¤–éƒ¨ä½¿ç”¨</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cmake codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_include_directories(&lt;target&gt; [SYSTEM] [BEFORE]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &lt;INTERFACE|PUBLIC|PRIVATE&gt; [items1...]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [&lt;INTERFACE|PUBLIC|PRIVATE&gt; [items2...] ...])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>å¦‚ä½•æä¾›ç»™å¤–éƒ¨ä¾èµ–çš„åº“ä½¿ç”¨å‘¢ï¼Ÿ</p><p>é€šè¿‡ä½¿ç”¨ï¼š<code>target_link_libraries</code> æ¥æä¾›ã€‚ä½†æ˜¯è¿™ä¸ªapiä¹Ÿæœ‰publicã€privateã€interfaceï¼Œè¿™ä¸ªè¯·çœ‹ä¸‹æ–‡ã€‚</p><hr><p>å¦‚æœä½ å†™ä¸€ä¸ªåº“ï¼ŒæŒ‡å®šåº“çš„å¤´æ–‡ä»¶æœç´¢è·¯å¾„ã€‚</p><p><a href="https://stackoverflow.com/questions/13703647/how-to-properly-add-include-directories-with-cmake" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/13703647/how-to-properly-add-include-directories-with-cmake</a></p><p>Two things must be done.</p><p>First add the directory to be included:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">target_include_directories</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test PRIVATE $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">YOUR_DIRECTORY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In case you are stuck with a very old CMake version (2.8.10 or older) without support for <code>target_include_directories</code>, you can also use the legacy <code>include_directories</code> instead:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">include_directories</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">YOUR_DIRECTORY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Then you also must add the header files to the list of your source files for the current target, for instance:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SOURCES file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">cpp file2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">cpp $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">YOUR_DIRECTORY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">file1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">h $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">YOUR_DIRECTORY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">file2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">h</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">add_executable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">test $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">SOURCES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This way, the header files will appear as dependencies in the Makefile, and also for example in the generated Visual Studio project, if you generate one.</p><p>How to use those header files for several targets:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">HEADER_FILES $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">YOUR_DIRECTORY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">file1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">h $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">YOUR_DIRECTORY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">file2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">h</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">add_library</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mylib libsrc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">cpp $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">HEADER_FILES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">target_include_directories</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mylib PRIVATE $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">YOUR_DIRECTORY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">add_executable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">myexec execfile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">cpp $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">HEADER_FILES</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">target_include_directories</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">myexec PRIVATE $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">YOUR_DIRECTORY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>First, you use <code>include_directories()</code> to tell CMake to add the directory as <code>-I</code> to the compilation command line. Second, you list the headers in your <code>add_executable()</code> or <code>add_library()</code> call.</p><p>As an example, if your project&#x27;s sources are in <code>src</code>, and you need headers from <code>include</code>, you could do it like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cpp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">include_directories</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">include</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">add_executable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">MyExec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  src</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">c</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  src</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">other_source</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">c</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  include</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">header1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">h</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  include</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">header2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">h</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><hr><p>target_include_directories</p><p>åˆ‡è®°è¿™ä¸ªæ˜¯ä½ æŒ‡å®štargetçš„includeã€‚demo01 çš„ hello_library å¼•ç”¨äº†hello.hã€‚</p><p>è¿™ä¸ªä¸æ˜¯å¿…é¡»ï¼Œè¿™ä¸ªtargetç”¨åˆ°äº†includeå°±ä½¿ã€‚æ­£å¸¸å¤§å‹é¡¹ç›®éƒ½ä¼šç”¨ã€‚ è¿™ä¸ªå’Œå¤–ç•Œä½¿ç”¨åº“æ˜¯ä¸¤å›äº‹ã€‚</p><p>ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š</p><ol><li>.a åº“æ–‡ä»¶ å’Œ .h å¤´æ–‡ä»¶åˆ†ç¦»</li><li>ä¿ç•™äº†æ–‡ä»¶å¤¹ç»“æ„ â€œhello/hello.hâ€</li></ol><p>[https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.3%20%20Static%20Library.html](<a href="https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.3" target="_blank" rel="noopener noreferrer">https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.3</a>  Static Library.html)</p><p>ç¼–è¯‘è¿™ä¸ªåº“çš„æ—¶å€™ å› ä¸ºè¿™ä¸ªåº“hello_libraryç”±Hello.cppç”Ÿæˆï¼ŒHello.cppä¸­å‡½æ•°çš„å®šä¹‰åœ¨Hello.hä¸­ï¼ŒHello.håœ¨è¿™ä¸ªincludeç›®å½•ä¸‹ï¼Œæ‰€ä»¥æ˜¾ç„¶ç¼–è¯‘è¿™ä¸ªåº“çš„æ—¶å€™ï¼Œè¿™ä¸ªç›®å½•ä¼šç”¨åˆ°</p><ul><li>è§åçŸ¥æ„å°±æ˜¯ é‚£ä¸ªtarget æ‰€ç”¨åˆ°çš„ include çš„ directories</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_include_directories(hello_library</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PUBLIC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">${PROJECT_SOURCE_DIR}/include</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Demo2 æ²¡æœ‰ç”¨åˆ° </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// #include &quot;hello/hello.h&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>æ‰€ä»¥demo02 ä¹Ÿä¸å¿…ä½¿ç”¨ target_include_directories æ¥åŒ…å«å¤´æ–‡ä»¶ï¼Œå› ä¸ºé‚£ä¸ªtargetæ²¡æœ‰ç”¨åˆ° includeã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># target_include_directories(hello_library</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># PUBLIC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># ${PROJECT_SOURCE_DIR}/include</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><hr><p>ä½¿ç”¨é™æ€åº“</p><p>åº“çš„å¼•ç”¨çš„å¤´æ–‡ä»¶ç›®å½•</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">æ³¨æ„ header search path æ‰€å¯¼è‡´å¤´æ–‡ä»¶åŒ…å«çš„ä¸åŒã€‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//&quot;$(SRCROOT)/../hello/include/hello&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//#include &lt;hello.h&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//&quot;$(SRCROOT)/../hello/include&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;hello/hello.h&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li>è¿™ä¸ªå¤´æ–‡ä»¶çš„è·¯å¾„ åªå’Œ ä½ å¼•ç”¨çš„æ–¹å¼æœ‰å…³ç³»</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å®"></a>å®<a class="hash-link" href="#å®" title="Direct link to heading">#</a></h5><p>ç¼–è¯‘çš„æ—¶å€™ç”¨åˆ°çš„å‘½ä»¤ï¼š</p><p>å¦‚ï¼š</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c++ codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;iostream&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int main(int argc, char *argv[]) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   std::cout &lt;&lt; &quot;Hello Compile Flags!&quot; &lt;&lt; std::endl;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   // only print if compile flag set</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#ifdef EX2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  std::cout &lt;&lt; &quot;Hello Compile Flag EX2!&quot; &lt;&lt; std::endl;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#endif</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#ifdef EX3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  std::cout &lt;&lt; &quot;Hello Compile Flag EX3!&quot; &lt;&lt; std::endl;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#endif</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   return 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><a href="https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.6%20%20Compile%20Flags.html" target="_blank" rel="noopener noreferrer">https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.6%20%20Compile%20Flags.html</a></p><p><img alt="image-20210506163025949" src="/assets/images/image-20210506163025949-5c3d36844f1aa52b66fd18ea442b8f5f.png"></p><p>å°±å’Œé»˜è®¤ç»™çš„debugçš„å®šä¹‰å·®ä¸å¤šï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ç¼–è¯‘è®¾ç½®"></a>ç¼–è¯‘è®¾ç½®<a class="hash-link" href="#ç¼–è¯‘è®¾ç½®" title="Direct link to heading">#</a></h4><p><strong>æŒ‡å®šç¼–è¯‘å™¨</strong></p><p><code>CPPFLAGS</code> is supposed to be for flags for the <strong>C</strong> <strong>P</strong>re<strong>P</strong>rocessor; <code>CXXFLAGS</code> is for flags for the C++ compiler.</p><p>The default rules in make (on my machine, at any rate) pass <code>CPPFLAGS</code> to just about everything, <code>CFLAGS</code> is only passed when compiling and linking C, and <code>CXXFLAGS</code> is only passed when compiling and linking C++.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMAKE_&lt;LANG&gt;_FLAGS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">eg:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMAKE_C_FLAGS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># è¡¨ç¤ºé¢„ç¼–è¯‘å‚æ•°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMAKE_CPP_FLAGS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># è¡¨ç¤ºç¼–è¯‘å‚æ•°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMAKE_CXX_FLAGS </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><hr><p><strong>åŠ è½½C++å…¨å±€å˜é‡</strong></p><p><a href="https://gamedev.stackexchange.com/questions/37813/variables-in-static-library-are-never-initialized-why" target="_blank" rel="noopener noreferrer">https://gamedev.stackexchange.com/questions/37813/variables-in-static-library-are-never-initialized-why</a></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Use the -all_load linker option to load all members of static libraries. Or for a specific library, use -force_load path_to_archive.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">In Xcode, you&#x27;ll want to add these options under &quot;Other Linker Flags&quot; for your executable (not your static library).</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><hr><p><strong>arcè®¾ç½®</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">set_property (TARGET ${LIB_TARGET_NAME} </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">APPEND_STRING </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PROPERTY </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">COMPILE_FLAGS &quot;-fobjc-arc&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><a href="http://cmake.org/cmake/help/v3.21/prop_tgt/COMPILE_FLAGS.html" target="_blank" rel="noopener noreferrer">http://cmake.org/cmake/help/v3.21/prop_tgt/COMPILE_FLAGS.html</a></p><p><img alt="image-20211014112102164" src="/assets/images/image-20211014112102164-c9102c7f423f52267e91b7e21179bd6b.png"></p><p><img alt="image-20211014112157933" src="/assets/images/image-20211014112157933-fc7911881b23f4e317c686c6c073dbad.png"></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">æ–¹å¼1ï¼š</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set_property (TARGET ${LIB_TARGET_NAME} </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">APPEND_STRING </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PROPERTY </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XCODE_ATTRIBUTE_CLANG_ENABLE_OBJC_ARC YES)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">æ–¹å¼2ï¼š</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set_target_properties(${LIB_TARGET_NAME} </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PROPERTIES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XCODE_ATTRIBUTE_CLANG_ENABLE_OBJC_ARC YES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>äº‰è®ºåœ¨è¿™é‡Œï¼š<a href="https://developer.apple.com/forums/thread/673960" target="_blank" rel="noopener noreferrer">Xcode defaults ARC to off. CMake-based builds leak large amounts of memory.</a></p><p><img alt="image-20211014112748485" src="/assets/images/image-20211014112748485-be63e5ec0f2661e294b5c9dd0c7236d4.png"></p><p>æ–¹å¼2æ›´å¥½ï¼Œç›´æ¥ä¿®æ”¹äº†é¡¹ç›®å·¥ç¨‹æ–‡ä»¶ã€‚</p><p>å…³äº XCODE<em>ATTRIBUTE</em>ï¼š</p><p><a href="http://cmake.org/cmake/help/v3.21/prop_tgt/XCODE_ATTRIBUTE_an-attribute.html" target="_blank" rel="noopener noreferrer">http://cmake.org/cmake/help/v3.21/prop_tgt/XCODE_ATTRIBUTE_an-attribute.html</a></p><p>å…³äºXcodeçš„<code>&lt;an-attribute&gt;</code>çš„å€¼ï¼Œå¯ä»¥å‚è€ƒï¼š</p><p><a href="https://help.apple.com/xcode/mac/current/#/itcaec37c2a6" target="_blank" rel="noopener noreferrer">Build settings reference</a></p><p>xcode çš„build setting æ²¡æœ‰ï¼Œç›´æ¥è®¾ç½®ç›¸å…³å±æ€§åˆ™æ·»åŠ åˆ°User-DefinedåŒºåŸŸé‡Œé¢ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">set_target_properties(${LIB_TARGET_NAME} </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PROPERTIES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XCODE_ATTRIBUTE_CLANG_ENABLE_OBJC_ARC YES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XCODE_ATTRIBUTE_CODE_SIGNING_REQUIRED NO</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XCODE_ATTRIBUTE_CODE_SIGN_STYLE     Manual</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XCODE_ATTRIBUTE_CODE_SIGN_IDENTITY &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">XCODE_ATTRIBUTE_CODE_SIGNING_ALLOWED NO</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PUBLIC_HEADER &quot;${public_headers}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># CXX_VISIBILITY_PRESET hidden</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># VISIBILITY_INLINES_HIDDEN 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PRODUCT_BUNDLE_IDENTIFIER com.rz.logan</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><img alt="image-20211028170632502" src="/assets/images/image-20211028170632502-8cca6f834d653884a999184ae6dbdfa4.png"></p><hr><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è®¾ç½®ç¼–è¯‘é€‰é¡¹"></a><strong>è®¾ç½®ç¼–è¯‘é€‰é¡¹</strong><a class="hash-link" href="#è®¾ç½®ç¼–è¯‘é€‰é¡¹" title="Direct link to heading">#</a></h5><p>ç¼–è¯‘é€‰é¡¹åˆ†ä¸ºå¯¹Cç¼–è¯‘å™¨å’ŒC++ç¼–è¯‘å™¨çš„ç¼–è¯‘é€‰é¡¹è®¾ç½®</p><p>CMAKE_C_COMPILERï¼šæŒ‡å®šCç¼–è¯‘å™¨
CMAKE_CXX_COMPILERï¼šæŒ‡å®šC++ç¼–è¯‘å™¨</p><p>è®¾ç½®ç¼–è¯‘é€‰é¡¹ï¼ˆé…ç½®ç¼–è¯‘å™¨ï¼‰æœ‰å¦‚ä¸‹ä¸‰ç§æ–¹æ³•ï¼š</p><ol><li><p>add_compile_optionså‘½ä»¤</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cmake codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_compile_options(-Wall -Werror -Wstrict-prototypes -Wmissing-prototypes)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ol><ol start="2"><li><p>add_definitionså‘½ä»¤</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cmake codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ADD_DEFINITIONS(&quot;-Wall -Werror -Wstrict-prototypes -Wmissing-prototypes&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ol><ol start="3"><li><p>setå‘½ä»¤ä¿®æ”¹CMAKE_CXX_FLAGSæˆ–CMAKE_C_FLAGS</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cmake codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">set(CMAKE_C_FLAGS &quot;-Wall -Werror -Wstrict-prototypes -Wmissing-prototypes)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ol><p>é’ˆå¯¹æ‰€æœ‰ç¼–è¯‘å™¨ï¼š</p><p>add_compile_options</p><p>add_definitions</p><p>setå‘½ä»¤é’ˆå¯¹æŒ‡å®šç¼–è¯‘å™¨ï¼š</p><p>CMAKE_C_FLAGSï¼šæŒ‡å®šç¼–è¯‘Cæ–‡ä»¶æ—¶ç¼–è¯‘é€‰é¡¹</p><p>CMAKE_CXX_FLAGSï¼šæŒ‡å®šç¼–è¯‘C++æ–‡ä»¶æ—¶ç¼–è¯‘é€‰é¡¹</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="é€‰æ‹©config"></a>é€‰æ‹©config<a class="hash-link" href="#é€‰æ‹©config" title="Direct link to heading">#</a></h5><p><a href="http://cmake.org/cmake/help/v3.21/variable/CMAKE_BUILD_TYPE.html" target="_blank" rel="noopener noreferrer">http://cmake.org/cmake/help/v3.21/variable/CMAKE_BUILD_TYPE.html</a></p><p>This statically specifies what build type (configuration) will be built in this build tree. Possible values are empty, <code>Debug</code>, <code>Release</code>, <code>RelWithDebInfo</code>, <code>MinSizeRel</code>, ... </p><p>æ„å»ºå¯ä»¥è°ƒè¯•çš„ç‰ˆæœ¬</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cmake .. -DCMAKE_BUILD_TYPE=Debug</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">âœ  /Users/dingyusong/mine/gitee/cmake_demos/cmakeç”Ÿæˆé™æ€åº“/demo03/libr2/build git:(master) âœ— cmake .. -DCMAKE_BUILD_TYPE=Debug</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- The C compiler identification is AppleClang 12.0.0.12000032</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- The CXX compiler identification is AppleClang 12.0.0.12000032</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting C compiler ABI info</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting C compiler ABI info - done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Check for working C compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc - skipped</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting C compile features</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting C compile features - done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting CXX compiler ABI info</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting CXX compiler ABI info - done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++ - skipped</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting CXX compile features</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting CXX compile features - done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Configuring done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Generating done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Build files have been written to: /Users/dingyusong/mine/gitee/cmake_demos/cmakeç”Ÿæˆé™æ€åº“/demo03/libr2/build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">âœ  /Users/dingyusong/mine/gitee/cmake_demos/cmakeç”Ÿæˆé™æ€åº“/demo03/libr2/build git:(master) âœ— make</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Scanning dependencies of target hello_library</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[ 50%] Building CXX object CMakeFiles/hello_library.dir/src/hello.cpp.o</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[100%] Linking CXX static library libhello_library.a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[100%] Built target hello_library</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>å¯ä»¥è¿›å…¥åº“ä¸­è°ƒè¯•äº†ï¼</p><p><img alt="image-20210506153151820" src="/assets/images/image-20210506153151820-735495ac38623d8381b20e96f701e3ba.png"></p><p>å¯¹æ¯”å·®å¼‚ï¼š</p><ul><li>å¤§å°å·®å¼‚</li></ul><p>releaseç‰ˆæœ¬ï¼šå¤§å°14KB</p><p>debugç‰ˆæœ¬ï¼šå¤§å°95KB</p><p><img alt="image-20210506153305701" src="/assets/images/image-20210506153305701-b66bf9b1d4715f51aa39dd298c47edc5.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æ±‡ç¼–è®¾ç½®"></a>æ±‡ç¼–è®¾ç½®<a class="hash-link" href="#æ±‡ç¼–è®¾ç½®" title="Direct link to heading">#</a></h4><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="é“¾æ¥è®¾ç½®"></a>é“¾æ¥è®¾ç½®<a class="hash-link" href="#é“¾æ¥è®¾ç½®" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="find_library"></a>find_library<a class="hash-link" href="#find_library" title="Direct link to heading">#</a></h5><p>A short-hand signature is:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">find_library (&lt;VAR&gt; name1 [path1 path2 ...])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ä¸ºä»€ä¹ˆä¸‹é¢çš„æ–¹æ³•åŠ ä¸ª.aå°±ä¸ä¼šæ‰¾åˆ°ç³»ç»Ÿçš„åº“äº†ï¼Ÿ</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">find_library(PROTOBUF_LIBRARIES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        NAMES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            libprotobuf.a protobuf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        HINTS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ${THIRD_PART_LIBS_PATH}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        PATHS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ${THIRD_PART_LIBS_PATH}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        PATH_SUFFIXES</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            lib libs)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="é“¾æ¥ç¬¬ä¸‰æ–¹åº“"></a>é“¾æ¥ç¬¬ä¸‰æ–¹åº“<a class="hash-link" href="#é“¾æ¥ç¬¬ä¸‰æ–¹åº“" title="Direct link to heading">#</a></h5><p><a href="https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.7%20%20Including%20Third%20Party%20Library.html" target="_blank" rel="noopener noreferrer">https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.7%20%20Including%20Third%20Party%20Library.html</a></p><p>æŸ¥æ‰¾ï¼š</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># find a boost install with the libraries filesystem and system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#ä½¿ç”¨åº“æ–‡ä»¶ç³»ç»Ÿå’Œç³»ç»ŸæŸ¥æ‰¾boost install</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">find_package(Boost 1.46.1 REQUIRED COMPONENTS filesystem system)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># check if boost was found</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if(Boost_FOUND)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    message (&quot;boost found&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">else()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    message (FATAL_ERROR &quot;Cannot find Boost&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">endif()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>inclue + link</p><p>æ–¹å¼1ï¼š</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_link_libraries( third_party_include</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      PRIVATE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          Boost::filesystem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>æ–¹å¼2ï¼š</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # Include the boost headers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  target_include_directories( third_party_include</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      PRIVATE ${Boost_INCLUDE_DIRS}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # link against the boost libraries</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  target_link_libraries( third_party_include</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      PRIVATE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ${Boost_SYSTEM_LIBRARY}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ${Boost_FILESYSTEM_LIBRARY}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="é“¾æ¥cmakeå­é¡¹ç›®"></a>é“¾æ¥cmakeå­é¡¹ç›®<a class="hash-link" href="#é“¾æ¥cmakeå­é¡¹ç›®" title="Direct link to heading">#</a></h5><p>subbinaryä¾èµ–lib1å’Œlib2ã€‚ä»–ä»¬éƒ½æ˜¯åŒä¸€çº§åˆ«çš„ã€‚</p><p><a href="https://sfumecjf.github.io/cmake-examples-Chinese/02-sub-projects/A-basic/" target="_blank" rel="noopener noreferrer">https://sfumecjf.github.io/cmake-examples-Chinese/02-sub-projects/A-basic/</a></p><p>add_subdirectory ä¼šè‡ªåŠ¨æ„å»ºå­é¡¹ç›®</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_subdirectory(sublibrary1)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_subdirectory(sublibrary2)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_subdirectory(subbinary)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>é›†æˆä¸€ä¸ªCMakeé¡¹ç›®åˆ°å¦å¤–çš„CMakeé¡¹ç›®</strong></p><p>ä¸ºäº†è®©åˆ«çš„C++é¡¹ç›®åœ¨CMakeLists.txtä¸­ä½¿ç”¨find_packageæ¥å¼•ç”¨è‡ªå·±çš„C++é¡¹ç›®ï¼Œåˆ™éœ€è¦åœ¨è‡ªå·±é¡¹ç›®çš„CMakeLists.txtä¸­ä½¿ç”¨EXPORTè¯­æ³•å’Œinstall(EXPORT ...)è¯­æ³•ã€‚ä¸€ä¸ªç”ŸåŠ¨çš„ä¾‹å­å¯ä»¥å‚è€ƒï¼š</p><ul><li><a href="https://github.com/DeepVAC/libdeepvac/blob/master/CMakeLists.txt" target="_blank" rel="noopener noreferrer">https://github.com/DeepVAC/libdeepvac/blob/master/CMakeLists.txt</a></li><li><a href="https://github.com/DeepVAC/libdeepvac/blob/master/cmake/deepvac-config.cmake" target="_blank" rel="noopener noreferrer">https://github.com/DeepVAC/libdeepvac/blob/master/cmake/deepvac-config.cmake</a></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ç›®å½•æŸ¥æ‰¾"></a>ç›®å½•æŸ¥æ‰¾<a class="hash-link" href="#ç›®å½•æŸ¥æ‰¾" title="Direct link to heading">#</a></h4><p><a href="http://www.voidcn.com/article/p-vowckywc-btg.html" target="_blank" rel="noopener noreferrer">http://www.voidcn.com/article/p-vowckywc-btg.html</a></p><p>å˜é‡ <a href="javascript:void()" target="_blank" rel="noopener noreferrer"><code>CMAKE_CURRENT_SOURCE_DIR</code></a>å’Œ <a href="javascript:void()" target="_blank" rel="noopener noreferrer"><code>CMAKE_CURRENT_LIST_DIR</code></a>å¯ä»¥æŒ‡ä»£ç”±å…·æœ‰ <a href="javascript:void()" target="_blank" rel="noopener noreferrer">include</a>å‘½ä»¤çš„ä¸åŒæ–‡ä»¶åŒ…æ‹¬çš„CMakeåˆ—è¡¨æ–‡ä»¶çš„ä¸åŒç›®å½•.ä¾‹å¦‚,å¦‚æœç›®å½•é¡¹ç›®ä¸­å­˜åœ¨CMakeLists.txtå¹¶ä¸”åŒ…å«ä»¥ä¸‹æŒ‡ä»¤</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">include(src/CMakeLists.txt)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ç„¶ååœ¨å¤„ç†<code>src / CMakeLists.tx</code>tæ—¶,<code>CMAKE_CURRENT_LIST_DIR</code>å°†å¼•ç”¨<code>project / src</code>,è€Œ<code>CMAKE_CURRENT_SOURCE_DIR</code>ä»ç„¶æŒ‡å‘å¤–éƒ¨ç›®å½•é¡¹ç›®.</p><p>å½“æ‚¨éœ€è¦æ‰¾åˆ°å½“å‰æ­£åœ¨å¤„ç†çš„<code>CMakeLists.txt</code>æ–‡ä»¶æ—è¾¹çš„æ¨¡æ¿æ–‡ä»¶æˆ–æ‰¹å¤„ç†è„šæœ¬ç­‰èµ„æºæ–‡ä»¶æ—¶,<code>CMAKE_CURRENT_LIST_DIR</code>ä¼šæ´¾ä¸Šç”¨åœº.</p><hr><ul><li>CMakeä¸­çš„CMAKE_SOURCE_DIRå’ŒPROJECT_SOURCE_DIRæ˜¯å¦ç›¸åŒï¼Ÿ</li></ul><p><em>åŸæ–‡</em>  <a href="javascript:void()" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/32028667/are-cmake-source-dir-and-project-source-dir-the-same-in-cmake</a></p><p>CMakeå·²ç»ä¸ºæˆ‘ä»¬å®šä¹‰äº†å˜é‡.æˆ‘è§‰å¾—æœ‰äº›å˜é‡æ˜¯ä¸€æ ·çš„.ä»¥CMAKE_SOURCE_DIRå’ŒPROJECT_SOURCE_DIRä¸ºä¾‹.å®ƒä»¬æ˜¯ç›¸åŒçš„,æŒ‡çš„æ˜¯å®šä¹‰é¡¶çº§CMakeLists.txtçš„æ–‡ä»¶å¤¹.æ‰€ä»¥æˆ‘çš„é—®é¢˜æ˜¯ï¼šä»–ä»¬ä¹‹é—´æœ‰å¾®å¦™çš„åŒºåˆ«å—ï¼Ÿè°¢è°¢.</p><p>è¿™äº›å˜é‡ä¹‹é—´æœ‰å·®å¼‚. <a href="javascript:void()" target="_blank" rel="noopener noreferrer"><code>CMAKE_SOURCE_DIR</code></a>ç¡®å®æ˜¯æŒ‡å®šä¹‰äº†é¡¶çº§CMakeLists.txtçš„æ–‡ä»¶å¤¹.ä½†æ˜¯, <a href="javascript:void()" target="_blank" rel="noopener noreferrer"><code>PROJECT_SOURCE_DIR</code></a>æ˜¯æŒ‡åŒ…å«æœ€è¿‘çš„project()å‘½ä»¤çš„CMakeLists.txtçš„æ–‡ä»¶å¤¹.</p><p>ä¾‹å¦‚,å‡è®¾ä½ æœ‰ä¸€ä¸ªåä¸ºOuterçš„é¡¶çº§é¡¹ç›®,å®ƒåŒ…å«ä¸€ä¸ªå­ç›®å½•,å…¶è‡ªå·±çš„é¡¹ç›®å«åšInner.å¤–é¢çš„CMakeLists.txtæœ‰ï¼š</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">project(Outer)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_subdirectory(Inner)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>å’Œå†…åœ¨çš„ï¼š</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">project(Inner)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ç„¶ååœ¨è¿™ä¸¤ä¸ªCMakeListsæ–‡ä»¶ä¸­,CMAKE_SOURCE_DIRå°†å¼•ç”¨Outerçš„æºç›®å½•.ä½†æ˜¯å¤–éƒ¨PROJECT_SOURCE_DIRä¹Ÿæ˜¯åŒä¸€ä¸ªç›®å½•,è€ŒInnerå¹¶ä¸æ˜¯è¿™æ ·. Innerçš„PROJECT_SOURCE_DIRæ˜¯åŒ…å«å…¶CMakeLists.txtçš„å­ç›®å½•.</p><p>è¯¥å·®å¼‚é€‚ç”¨äºæ‰€æœ‰<code>PROJECT_&lt; var&gt;</code> vs<code> CMAKE_&lt; var&gt;</code>å˜é‡.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="cmakeç¼–è¯‘æµç¨‹"></a>CMakeç¼–è¯‘æµç¨‹<a class="hash-link" href="#cmakeç¼–è¯‘æµç¨‹" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-text codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ç¼–å†™æ–‡ä»¶CMakeLists.txt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">æ‰§è¡Œå‘½ä»¤â€œcmake PATHâ€æˆ–è€…â€œccmake PATHâ€ç”ŸæˆMakefile (PATHæ˜¯CMakeLists.txtæ‰€åœ¨çš„ç›®å½•)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ä½¿ç”¨makeå‘½ä»¤è¿›è¡Œç¼–è¯‘æºç ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºæˆ–å…±äº«åº“ï¼ˆso(shared object)ï¼‰</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>cmake æŒ‡å‘CMakeLists.txtæ‰€åœ¨çš„ç›®å½•ï¼Œä¾‹å¦‚ cmake .. è¡¨ç¤ºCMakeLists.txtåœ¨å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•ã€‚cmakeåä¼šç”Ÿæˆå¾ˆå¤šç¼–è¯‘çš„ä¸­é—´æ–‡ä»¶ä»¥åŠmakefileæ–‡ä»¶ï¼Œæ‰€ä»¥ä¸€èˆ¬å»ºè®®æ–°å»ºä¸€ä¸ªæ–°çš„ç›®å½•ï¼Œä¸“é—¨ç”¨æ¥ç¼–è¯‘</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-text codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cmake ..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">make</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>makeæ ¹æ®ç”Ÿæˆmakefileæ–‡ä»¶ï¼Œç¼–è¯‘ç¨‹åº</p><p>CMakeè¯­å¥ä¸»è¦æœ‰3ç±»ç”¨æ³•ï¼š</p><ul><li>è®¾ç½®å˜é‡ã€‚è¿™æ ·çš„è¯­å¥æœ‰setã€fileã€listã€find_libraryã€aux_source_directoryã€generator expressionsï¼›</li><li>è®¾ç½®targetã€‚ä¹Ÿå°±æ˜¯æ„å»ºçš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼ˆä½ æ„å»ºä¸ªé¡¹ç›®æ€»å¾—æœ‰ä¸ªç›®æ ‡å§ï¼Œä¸€èˆ¬æ¥è¯´å°±æ˜¯åº“æˆ–è€…å¯æ‰§è¡Œæ–‡ä»¶ï¼‰ï¼›è¿™æ ·çš„è¯­å¥æœ‰add_libraryã€add_executableï¼›</li><li>è®¾ç½®targetçš„å±æ€§ã€‚ä¹Ÿå°±æ˜¯å®šä¹‰å¦‚ä½•ç”Ÿæˆtargetï¼ˆæ¯”å¦‚æºæ–‡ä»¶çš„è·¯å¾„ã€ç¼–è¯‘é€‰é¡¹ã€è¦é“¾æ¥ä»€ä¹ˆåº“......ï¼‰ï¼›è¿™æ ·çš„è¯­å¥æœ‰add_definitionsã€target_link_librariesã€link_directoriesã€include_directoriesã€target_include_directoriesï¼›</li></ul><p>å‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/92928820" target="_blank" rel="noopener noreferrer">ä½¿ç”¨CMakeæ„å»ºC++é¡¹ç›®</a></p><p>èµ°ä¸€étutorial æºç åœ¨è¿™é‡Œï¼š</p><p><a href="https://github.com/Kitware/CMake/tree/master/Help/guide/tutorial" target="_blank" rel="noopener noreferrer">https://github.com/Kitware/CMake/tree/master/Help/guide/tutorial</a></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cmake codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">projectÂ (HELLO)Â Â Â #æŒ‡å®šé¡¹ç›®åç§°ï¼Œç”Ÿæˆçš„VCé¡¹ç›®çš„åç§°ï¼›</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt;ä½¿ç”¨${HELLO_SOURCE_DIR}è¡¨ç¤ºé¡¹ç›®æ ¹ç›®å½•</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">include_directoriesï¼šæŒ‡å®šå¤´æ–‡ä»¶çš„æœç´¢è·¯å¾„ï¼Œç›¸å½“äºæŒ‡å®šgccçš„-Iå‚æ•°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt; include_directories (${HELLO_SOURCE_DIR}/Hello)Â Â #å¢åŠ Helloä¸ºincludeç›®å½•</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">link_directoriesï¼šåŠ¨æ€é“¾æ¥åº“æˆ–é™æ€é“¾æ¥åº“çš„æœç´¢è·¯å¾„ï¼Œç›¸å½“äºgccçš„-Lå‚æ•°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt; link_directories (${HELLO_BINARY_DIR}/Hello)Â Â Â Â Â #å¢åŠ Helloä¸ºlinkç›®å½•</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_subdirectoryï¼šåŒ…å«å­ç›®å½•</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt; add_subdirectory (Hello)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_executableï¼šç¼–è¯‘å¯æ‰§è¡Œç¨‹åºï¼ŒæŒ‡å®šç¼–è¯‘ï¼Œå¥½åƒä¹Ÿå¯ä»¥æ·»åŠ .oæ–‡ä»¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt; add_executable (helloDemo demo.cxx demo_b.cxx)Â Â Â #å°†cxxç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶â€”â€”</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_definitionsï¼šæ·»åŠ ç¼–è¯‘å‚æ•°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt; add_definitions(-DDEBUG)å°†åœ¨gccå‘½ä»¤è¡Œæ·»åŠ DEBUGå®å®šä¹‰ï¼›</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt; add_definitions( â€œ-Wall -ansi â€“pedantic â€“gâ€)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">target_link_librariesï¼šæ·»åŠ é“¾æ¥åº“,ç›¸åŒäºæŒ‡å®š-lå‚æ•°</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt; target_link_libraries(demo Hello) #å°†å¯æ‰§è¡Œæ–‡ä»¶ä¸Helloè¿æ¥æˆæœ€ç»ˆæ–‡ä»¶demo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">add_library:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt;&gt; add_library(Hello hello.cxx)Â Â #å°†hello.cxxç¼–è¯‘æˆé™æ€åº“å¦‚libHello.a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œpotxxxã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/potxxx/article/details/86766378</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ç¬¬ä¸‰æ–¹åº“ä¸»è¦ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼Œå³ a)<strong>å¤´æ–‡ä»¶</strong>ï¼Œ b)<strong>åº“æ–‡ä»¶</strong>ã€‚ å¤´æ–‡ä»¶ä¸€èˆ¬æ˜¯ä¸€ç³»åˆ—åä¸º<code>xxx.h</code>ï¼ˆ<strong>h</strong>eadï¼‰çš„æ–‡ä»¶ï¼Œç›¸å½“äºæš´éœ²å‡ºç¬¬ä¸‰æ–¹åº“æ‰€æä¾›çš„APIæ¥å£ï¼ˆå‡½æ•°ç­¾åï¼‰ã€‚ åº“æ–‡ä»¶ä¸€èˆ¬ä¼šåŒ…å«<strong>é™æ€åº“æ–‡ä»¶</strong>å’Œ<strong>åŠ¨æ€åº“æ–‡ä»¶</strong>ï¼Œç›¸å½“äºç¬¬ä¸‰æ–¹åº“åœ¨åŠŸèƒ½ä¸Šçš„äºŒè¿›åˆ¶å®ç°ã€‚ å…¶ä¸­ï¼Œé™æ€åº“æ–‡ä»¶æ˜¯ä¸€ç³»åˆ—åä¸º<code>libxxx.a</code>ï¼ˆ<strong>a</strong>rchiveï¼‰çš„æ–‡ä»¶ï¼ˆWindowsä¸‹ä¸º<code>libxxx.lib</code>ï¼Œ<strong>lib</strong>raryï¼‰ã€‚ åŠ¨æ€åº“æ–‡ä»¶åˆ™æ˜¯ä¸€ç³»åˆ—åä¸º<code>libxxx.so</code>ï¼ˆ<strong>s</strong>hared <strong>o</strong>bjectï¼‰çš„æ–‡ä»¶ï¼ˆWindowsä¸‹ä¸º<code>libxxx.dll</code>ï¼Œ<strong>d</strong>ynamic <strong>l</strong>ink <strong>l</strong>ibraryï¼ŒmacOSä¸‹ä¸º<code>libxxx.dylib</code>ï¼Œ<strong>dy</strong>namic <strong>lib</strong>raryï¼‰ã€‚ ç³»ç»Ÿè‡ªå¸¦çš„ï¼Œä»¥åŠç”±ç³»ç»ŸåŒ…ç®¡ç†å™¨å®‰è£…çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå…¶å¤´æ–‡ä»¶ä¸€èˆ¬åœ¨<code>/usr/include</code>æˆ–<code>/usr/local/include</code>è·¯å¾„ä¸‹ï¼Œåº“æ–‡ä»¶ä¸€èˆ¬åœ¨<code>/lib</code>ï¼Œ<code>/usr/lib</code>å’Œ<code>/usr/local/lib</code>ç›®å½•ä¸‹ã€‚</p><p>æ­£æ˜¯ç”±äºä»¥ä¸Šå› ç´ çš„å½±å“ï¼ŒGCCå·¥å…·é“¾ä¸è´Ÿè´£ç®¡ç†ç¬¬ä¸‰æ–¹åº“ï¼Œå› æ­¤æ— æ³•åˆ¤å®šC/C++é¡¹ç›®å…·ä½“éœ€è¦ä½¿ç”¨å“ªäº›åº“ï¼Œä»¥åŠè¿™äº›åº“çš„å‡†ç¡®ä¿¡æ¯ï¼Œå¦‚ä½ç½®ã€ç‰ˆæœ¬ç­‰ã€‚ æ‰€ä»¥ï¼Œä»…ä½¿ç”¨GCCï¼Œæ— æ³•å®Œå…¨è‡ªåŠ¨åœ°è§£å†³C/C++é¡¹ç›®ç¬¬ä¸‰æ–¹åº“çš„ä¾èµ–é—®é¢˜ã€‚ æˆ‘ä»¬éœ€è¦äººå·¥åœ°æ·»åŠ å„ç§ç¼–è¯‘å‚æ•°ï¼Œå¦‚<code>-I</code>ï¼Œ<code>-l</code>ä»¥åŠ<code>-L</code>ï¼Œå°†æ‰€ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“çš„ç›¸å…³ä¿¡æ¯ï¼Œä¼ é€’ç»™<code>gcc</code>ç¼–è¯‘å™¨ã€‚ å…¶ä¸­<code>-I</code>ä¼ é€’çš„æ˜¯å¤´æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œ<code>-l</code>ä¼ é€’çš„æ˜¯éœ€è¦é“¾æ¥çš„åº“çš„åç§°ï¼Œ<code>-L</code>ä¼ é€’çš„æ˜¯åº“æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ã€‚</p><p><a href="https://zhuanlan.zhihu.com/p/342151242" target="_blank" rel="noopener noreferrer">GCC/Make/CMake ä¹‹ GCC</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="cmakeå·¥ç¨‹ç›®å½•ç»“æ„"></a>cmakeå·¥ç¨‹ç›®å½•ç»“æ„<a class="hash-link" href="#cmakeå·¥ç¨‹ç›®å½•ç»“æ„" title="Direct link to heading">#</a></h3><p><img alt="img" src="/assets/images/12730381-d319a7e97d4390af-b57f2d5a9c1b3f90e6bd2d2beeacc336.jpg"></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">lib: ç”Ÿæˆçš„åº“æ–‡ä»¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> src: æºæ–‡ä»¶ï¼ˆ*.cpp *.ccï¼‰</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> include: å¤´æ–‡ä»¶ï¼ˆ*.h *.hppï¼‰</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> build: ä¸€èˆ¬åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œcmake ..(..ä¹‹å‰æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œè¡¨ç¤ºä½ è¦ä½¿ç”¨çš„CMakeLists.txtæ–‡ä»¶åœ¨å½“å‰çš„ä¸Šå±‚è·¯å¾„)ï¼Œç”Ÿæˆçš„Makefileæ–‡ä»¶ä¹Ÿåœ¨è¿™ä¸ªè·¯å¾„ä¸‹ã€‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> bin: ä¸€èˆ¬æ”¾ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> CMakeLists.txt: cmakeçš„é…ç½®æ–‡ä»¶ï¼Œå…³äºé…ç½®æ–‡ä»¶æ€ä¹ˆå†™çš„æ•™ç¨‹ï¼ˆ[http://blog.csdn.net/kaizi318/article/details/7721624](https://links.jianshu.com/go?to=http%3A%2F%2Fblog.csdn.net%2Fkaizi318%2Farticle%2Fdetails%2F7721624)ï¼‰</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-cmake codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#äº•å¥½è¡¨ç¤ºæ³¨é‡Š</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMAKE_MINIMUM_REQUIRED( VERSION 2.8 ) #è®¾å®šæœ€å°ç‰ˆæœ¬å·</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PROJECT( test )                       #è®¾å®šå·¥ç¨‹å</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">SET(CMAKE_CXX_COMPILER &quot;g++&quot;)         #è®¾ç½®ç¼–è¯‘å™¨ï¼ˆå¯é€‰çš„æœ‰gccï¼Œg++ï¼‰</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># è®¾ç½®ç”¨debugè¿˜æ˜¯releaseæ¨¡å¼ã€‚debugå…è®¸æ–­ç‚¹ï¼Œè€Œreleaseæ›´å¿«</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#set( CMAKE_BUILD_TYPE Debug )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set( CMAKE_BUILD_TYPE Release )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># è®¾ç½®ç¼–è¯‘é€‰é¡¹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># å…è®¸c++11æ ‡å‡†ã€O3ä¼˜åŒ–ã€å¤šçº¿ç¨‹ã€‚matché€‰é¡¹å¯é¿å…ä¸€äº›cpuä¸Šçš„é—®é¢˜</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">set( CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -std=c++11 -march=native -O3 -pthread&quot; )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#è®¾å®šå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„ç›®å½•</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">SET( EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin) </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#è®¾å®šå­˜æ”¾ç¼–è¯‘å‡ºæ¥çš„åº“æ–‡ä»¶çš„ç›®å½•</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">SET( LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib) </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#å¹¶ä¸”æŠŠè¯¥ç›®å½•è®¾ä¸ºè¿æ¥ç›®å½•</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">LINK_DIRECTORIES( ${PROJECT_SOURCE_DIR}/lib)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">find_package (Threads REQUIRED)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#è®¾å®šå¤´æ–‡ä»¶ç›®å½•</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">INCLUDE_DIRECTORIES( ${PROJECT_SOURCE_DIR}/include)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#å¢åŠ å­æ–‡ä»¶å¤¹(æ³¨æ„æˆ‘ä»¬çš„srcè·¯å¾„æ˜¯é€šè¿‡å­æ–‡ä»¶å¤¹çš„å½¢å¼æ·»åŠ çš„ï¼Œåœ¨è¿™é‡Œé¢ä¹Ÿæ˜¯å¯ä»¥äº›CMakeLists.txtçš„)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ADD_SUBDIRECTORY( ${PROJECT_SOURCE_DIR}/src)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">æˆ–åˆ™æ˜¯ADD_SUBDIRECTORY( src)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ä½œè€…ï¼šCaiaolun
é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/2287ed1080c3" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/2287ed1080c3</a>
æ¥æºï¼šç®€ä¹¦
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p><p>CMake   install ä¹‹å</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">âœ  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build git:(master) âœ— cmake --install .                                                                                              (0s)[22:07:53] </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Install configuration: &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Installing: /usr/local/bin/Tutorial</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Installing: /usr/local/include/TutorialConfig.h</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Installing: /usr/local/lib/libMathFunctions.a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Installing: /usr/local/include/MathFunctions.h</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªcmakeé¡¹ç›®æºç ä¸‹è½½ä¸‹æ¥ä¹‹åï¼Œæˆ‘ä»¬è¿›è¡Œç¼–è¯‘å®‰è£…ä¹‹åï¼Œä¼šåˆ°ç³»ç»Ÿçš„/usr/local  ç›®å½•ä¸‹</p><p>æ³¨æ„ï¼š å’Œç³»ç»Ÿæ‰§è¡Œç›®å½•å¦‚å‡ºä¸€è¾™</p><p><img alt="image-20210221221424232" src="/assets/images/image-20210221221424232-4fd51bb3717dfd709ac7e85964fc6838.png"></p><p>cmake æŒ‡å®šå®‰è£…è·¯å¾„</p><p>The CMake variable [<code>CMAKE_INSTALL_PREFIX</code>] is used to determine the root of where the files will be installed. If using the <code>cmake --install</code> command, the installation prefix can be overridden via the <code>--prefix</code> argument. For example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">cmake --install . --prefix &quot;/home/myuser/installdir&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Navigate to the install directory and verify that the installed Tutorial runs.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æµ‹è¯•"></a>æµ‹è¯•<a class="hash-link" href="#æµ‹è¯•" title="Direct link to heading">#</a></h3><p>Rebuild the application and then cd to the binary directory and run the [<code>ctest</code>] executable: <code>ctest -N</code> and <code>ctest -VV</code>.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># æ³¨æ„è¿™ä¸ªtestä¸è¦å†™é”™åœ°æ–¹äº†</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  enable_testing()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # does the application run</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  add_test(NAME Runs COMMAND Tutorial 25)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # does the usage message work?</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  add_test(NAME Usage COMMAND Tutorial)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  set_tests_properties(Usage</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    PROPERTIES PASS_REGULAR_EXPRESSION &quot;Usage:.*number&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # define a function to simplify adding tests</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  function(do_test target arg result)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    add_test(NAME Comp${arg} COMMAND ${target} ${arg})</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    set_tests_properties(Comp${arg}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      PROPERTIES PASS_REGULAR_EXPRESSION ${result}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  endfunction(do_test)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # do a bunch of result based tests</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  do_test(Tutorial 4 &quot;4 is 2&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  do_test(Tutorial 9 &quot;9 is 3&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  do_test(Tutorial 5 &quot;5 is 2.236&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  do_test(Tutorial 7 &quot;7 is 2.645&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  do_test(Tutorial 25 &quot;25 is 5&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  do_test(Tutorial -25 &quot;-25 is [-nan|nan|0]&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  do_test(Tutorial 0.0001 &quot;0.0001 is 0.01&quot;)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>å‚è€ƒcmakeå·¥ç¨‹ï¼š</p><p><a href="https://github.com/Tencent/rapidjson" target="_blank" rel="noopener noreferrer">https://github.com/Tencent/rapidjson</a></p><p>ios-cmake</p><p><a href="https://github.com/leetal/ios-cmake" target="_blank" rel="noopener noreferrer">https://github.com/leetal/ios-cmake</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="äº¤å‰ç¼–è¯‘"></a>äº¤å‰ç¼–è¯‘<a class="hash-link" href="#äº¤å‰ç¼–è¯‘" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å®‰è£…"></a>å®‰è£…<a class="hash-link" href="#å®‰è£…" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">install(TARGETS MyLib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        EXPORT MyLibTargets </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        LIBRARY DESTINATION lib  # åŠ¨æ€åº“å®‰è£…è·¯å¾„</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ARCHIVE DESTINATION lib  # é™æ€åº“å®‰è£…è·¯å¾„</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        RUNTIME DESTINATION bin  # å¯æ‰§è¡Œæ–‡ä»¶å®‰è£…è·¯å¾„</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        PUBLIC_HEADER DESTINATION include  # å¤´æ–‡ä»¶å®‰è£…è·¯å¾„</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        )</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ol><li><p>ç”Ÿæˆæ„å»ºç³»ç»Ÿ</p><p><code>cmake ../Step4 </code></p></li><li><p>ç¼–è¯‘</p><p><code>cmake --build .</code></p></li><li><p>å®‰è£…</p><p><code>cmake --install . --prefix &quot;des&quot;</code></p></li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">âœ  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2 git:(master) âœ— cmake ../Step4 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- The C compiler identification is AppleClang 12.0.0.12000032</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- The CXX compiler identification is AppleClang 12.0.0.12000032</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting C compiler ABI info</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting C compiler ABI info - done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Check for working C compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc - skipped</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting C compile features</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting C compile features - done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting CXX compiler ABI info</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting CXX compiler ABI info - done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++ - skipped</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting CXX compile features</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Detecting CXX compile features - done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Configuring done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Generating done</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Build files have been written to: /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">âœ  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2 git:(master) âœ— ls</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMakeCache.txt      CMakeFiles          CTestTestfile.cmake Makefile            MathFunctions       TutorialConfig.h    cmake_install.cmake</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">âœ  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2 git:(master) âœ— cmake --install . --prefix &quot;des&quot;              </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Install configuration: &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CMake Error at cmake_install.cmake:41 (file):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  file INSTALL cannot find</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;/Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2/Tutorial&quot;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  No such file or directory.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">âœ  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2 git:(master) âœ— cmake --build .         </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Scanning dependencies of target MathFunctions</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[ 25%] Building CXX object MathFunctions/CMakeFiles/MathFunctions.dir/mysqrt.cxx.o</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[ 50%] Linking CXX static library libMathFunctions.a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[ 50%] Built target MathFunctions</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Scanning dependencies of target Tutorial</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[ 75%] Building CXX object CMakeFiles/Tutorial.dir/tutorial.cxx.o</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[100%] Linking CXX executable Tutorial</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[100%] Built target Tutorial</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">âœ  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2 git:(master) âœ— cmake --install . --prefix &quot;des&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Install configuration: &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Installing: /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2/des/bin/Tutorial</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Installing: /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2/des/include/TutorialConfig.h</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Installing: /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2/des/lib/libMathFunctions.a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Installing: /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2/des/include/MathFunctions.h</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">âœ  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2 git:(master) âœ— </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>å‚è€ƒï¼šCMakeä¹‹installæ–¹æ³•çš„ä½¿ç”¨ï¼š<a href="https://zhuanlan.zhihu.com/p/102955723" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/102955723</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£<a class="hash-link" href="#å‚è€ƒæ–‡æ¡£" title="Direct link to heading">#</a></h2><ul><li><p><a href="https://github.com/ttroy50/cmake-examples" target="_blank" rel="noopener noreferrer">https://github.com/ttroy50/cmake-examples</a></p></li><li><p><a href="https://sfumecjf.github.io/cmake-examples-Chinese/" target="_blank" rel="noopener noreferrer">https://sfumecjf.github.io/cmake-examples-Chinese/</a></p></li><li><p><a href="https://zhjwpku.com/category/2020/04/04/effective-modern-cmake-practice.html" target="_blank" rel="noopener noreferrer">Effective Modern CMake å®è·µ</a></p></li><li><p><a href="https://phenix3443.github.io/notebook/cmake/effective-modern-cmake.html" target="_blank" rel="noopener noreferrer">https://phenix3443.github.io/notebook/cmake/effective-modern-cmake.html</a></p></li><li><p><a href="https://www.jianshu.com/p/9e8e0566ccc5" target="_blank" rel="noopener noreferrer">å¸¦ä½ çœ‹ CMake</a></p></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="dys-typora-open://mine/survival/docs/ç¼–ç¨‹åŸºç¡€/è®¡ç®—æœºç³»ç»ŸåŸºç¡€/1-ç¨‹åº/1-æ„å»º/CMake/CMake.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ç®€ä»‹" class="table-of-contents__link">ç®€ä»‹</a><ul><li><a href="#ä¸ºä½•ç”¨cmakeï¼Ÿ" class="table-of-contents__link">ä¸ºä½•ç”¨Cmakeï¼Ÿ</a></li><li><a href="#cmakeæ˜¯ä»€ä¹ˆï¼Ÿ" class="table-of-contents__link">CMakeæ˜¯ä»€ä¹ˆï¼Ÿ</a></li></ul></li><li><a href="#åŸºç¡€" class="table-of-contents__link">åŸºç¡€</a><ul><li><a href="#è¯­æ³•" class="table-of-contents__link">è¯­æ³•</a></li><li><a href="#ç¯å¢ƒ" class="table-of-contents__link">ç¯å¢ƒ</a></li><li><a href="#è§£é‡Šæ‰§è¡Œ" class="table-of-contents__link">è§£é‡Š/æ‰§è¡Œ</a></li></ul></li><li><a href="#ä½¿ç”¨è¯´æ˜" class="table-of-contents__link">ä½¿ç”¨è¯´æ˜</a><ul><li><a href="#targetå’Œproject" class="table-of-contents__link">targetå’Œproject</a></li><li><a href="#è®¾ç½®" class="table-of-contents__link">è®¾ç½®</a></li><li><a href="#cmakeç¼–è¯‘æµç¨‹" class="table-of-contents__link">CMakeç¼–è¯‘æµç¨‹</a></li><li><a href="#cmakeå·¥ç¨‹ç›®å½•ç»“æ„" class="table-of-contents__link">cmakeå·¥ç¨‹ç›®å½•ç»“æ„</a></li><li><a href="#æµ‹è¯•" class="table-of-contents__link">æµ‹è¯•</a></li></ul></li><li><a href="#äº¤å‰ç¼–è¯‘" class="table-of-contents__link">äº¤å‰ç¼–è¯‘</a></li><li><a href="#å®‰è£…" class="table-of-contents__link">å®‰è£…</a></li><li><a href="#å‚è€ƒæ–‡æ¡£" class="table-of-contents__link">å‚è€ƒæ–‡æ¡£</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.9888532b.js"></script>
<script src="/runtime~main.73fb2e0e.js"></script>
<script src="/main.a2e30791.js"></script>
<script src="/1.fa235d9f.js"></script>
<script src="/2.8423217f.js"></script>
<script src="/257.8905f2ed.js"></script>
<script src="/258.3860215e.js"></script>
<script src="/935f2afb.ce536a1e.js"></script>
<script src="/17896441.d8a5f7af.js"></script>
<script src="/86b47624.f254bcf7.js"></script>
</body>
</html>