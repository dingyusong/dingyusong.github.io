<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Blog Atom Feed"><title data-react-helmet="true">GDB | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="GDB | My Site"><meta data-react-helmet="true" name="description" content="GDB"><meta data-react-helmet="true" property="og:description" content="GDB"><meta data-react-helmet="true" property="og:url" content="http://localhost:9999//docs/ç¼–ç¨‹åŸºç¡€/è®¡ç®—æœºç³»ç»ŸåŸºç¡€/2-ç¨‹åºçš„è¿è¡Œ/è°ƒè¯•å·¥å…·/GDB"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://localhost:9999//docs/ç¼–ç¨‹åŸºç¡€/è®¡ç®—æœºç³»ç»ŸåŸºç¡€/2-ç¨‹åºçš„è¿è¡Œ/è°ƒè¯•å·¥å…·/GDB"><link rel="stylesheet" href="/styles.8cfbcdec.css">
<link rel="preload" href="/styles.aaa24a49.js" as="script">
<link rel="preload" href="/runtime~main.7eeb3d64.js" as="script">
<link rel="preload" href="/main.7a041c89.js" as="script">
<link rel="preload" href="/1.62b3ea65.js" as="script">
<link rel="preload" href="/257.bb7ed37e.js" as="script">
<link rel="preload" href="/258.ed1b30f8.js" as="script">
<link rel="preload" href="/935f2afb.55f5968c.js" as="script">
<link rel="preload" href="/256.a7530d90.js" as="script">
<link rel="preload" href="/ff55abc4.17ee3a2a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">ç¼–ç¨‹åŸºç¡€</a><a class="navbar__item navbar__link" href="/docs/ç¼–ç¨‹è¯­è¨€/ç¼–ç¨‹è¯­è¨€">ç¼–ç¨‹è¯­è¨€</a><a class="navbar__item navbar__link" href="/docs/å·¥å…·/å¸¸ç”¨å·¥å…·">å·¥å…·</a><a class="navbar__item navbar__link" href="/docs/åº”ç”¨å¼€å‘/åº”ç”¨å¼€å‘">åº”ç”¨å¼€å‘</a><a class="navbar__item navbar__link" href="/docs/Apple/iOSå¼€å‘/iOSå¼€å‘">Apple</a><a class="navbar__item navbar__link" href="/docs/éŸ³è§†é¢‘/éŸ³è§†é¢‘">éŸ³è§†é¢‘</a><a class="navbar__item navbar__link" href="/docs/é¡¹ç›®/é¡¹ç›®">é¡¹ç›®</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">ç¼–ç¨‹åŸºç¡€</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ç¼–ç¨‹è¯­è¨€/ç¼–ç¨‹è¯­è¨€">ç¼–ç¨‹è¯­è¨€</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/å·¥å…·/å¸¸ç”¨å·¥å…·">å·¥å…·</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/åº”ç”¨å¼€å‘/åº”ç”¨å¼€å‘">åº”ç”¨å¼€å‘</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Apple/iOSå¼€å‘/iOSå¼€å‘">Apple</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/éŸ³è§†é¢‘/éŸ³è§†é¢‘">éŸ³è§†é¢‘</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/é¡¹ç›®/é¡¹ç›®">é¡¹ç›®</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">GDB</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="gdb"></a>GDB<a class="hash-link" href="#gdb" title="Direct link to heading">#</a></h1><p><a href="https://www.gnu.org/software/gdb/" target="_blank" rel="noopener noreferrer">https://www.gnu.org/software/gdb/</a></p><p><a href="https://www.gnu.org/software/gdb/documentation/" target="_blank" rel="noopener noreferrer">https://www.gnu.org/software/gdb/documentation/</a></p><p>å®˜æ–¹åœ¨çº¿æ–‡æ¡£ï¼š<a href="http://sourceware.org/gdb/current/onlinedocs/gdb/" target="_blank" rel="noopener noreferrer">http://sourceware.org/gdb/current/onlinedocs/gdb/</a> æœ€å®˜æ–¹ï¼Œæœ€å®ç”¨ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> nemu git:(pa1) âœ— gdb ./build/x86-nemu-interpreter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">GNU gdb (Debian 8.2.1-2+b3) 8.2.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Copyright (C) 2018 Free Software Foundation, Inc.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">This is free software: you are free to change and redistribute it.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">There is NO WARRANTY, to the extent permitted by law.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Type &quot;show copying&quot; and &quot;show warranty&quot; for details.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">This GDB was configured as &quot;x86_64-linux-gnu&quot;.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Type &quot;show configuration&quot; for configuration details.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">For bug reporting instructions, please see:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;http://www.gnu.org/software/gdb/bugs/&gt;.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Find the GDB manual and other documentation resources online at:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;http://www.gnu.org/software/gdb/documentation/&gt;.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">For help, type &quot;help&quot;.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Reading symbols from ./build/x86-nemu-interpreter...done.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb) r</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting program: /home/dys/ics2020/nemu/build/x86-nemu-interpreter </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[Thread debugging using libthread_db enabled]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Using host libthread_db library &quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Program received signal SIGSEGV, Segmentation fault.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">parse_args (argv=0x7fffffffe088, argc=1) at src/monitor/monitor.c:88</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">88        *((int*)0) = 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb) bt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#0  parse_args (argv=0x7fffffffe088, argc=1) at src/monitor/monitor.c:88</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#1  init_monitor (argc=1, argv=0x7fffffffe088) at src/monitor/monitor.c:95</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#2  0x0000555555557219 in main (argc=&lt;optimized out&gt;, argv=&lt;optimized out&gt;) at src/main.c:7</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb) layout asm</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æºç å±•ç¤º"></a>æºç å±•ç¤º<a class="hash-link" href="#æºç å±•ç¤º" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">layoutï¼šç”¨äºåˆ†å‰²çª—å£ï¼Œå¯ä»¥ä¸€è¾¹æŸ¥çœ‹ä»£ç ï¼Œä¸€è¾¹æµ‹è¯•ã€‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ç”¨æ³•ï¼š</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">layout srcï¼šæ˜¾ç¤ºæºä»£ç çª—å£</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">layout asmï¼šæ˜¾ç¤ºæ±‡ç¼–çª—å£</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">layout regsï¼šæ˜¾ç¤ºæºä»£ç /æ±‡ç¼–å’Œå¯„å­˜å™¨çª—å£</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">layout splitï¼šæ˜¾ç¤ºæºä»£ç å’Œæ±‡ç¼–çª—å£</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">layout nextï¼šæ˜¾ç¤ºä¸‹ä¸€ä¸ªlayout</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">layout prevï¼šæ˜¾ç¤ºä¸Šä¸€ä¸ªlayout</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ctrl + Lï¼šåˆ·æ–°çª—å£</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ctrl + xï¼Œå†æŒ‰1ï¼šå•çª—å£æ¨¡å¼ï¼Œæ˜¾ç¤ºä¸€ä¸ªçª—å£</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ctrl + xï¼Œå†æŒ‰2ï¼šåŒçª—å£æ¨¡å¼ï¼Œæ˜¾ç¤ºä¸¤ä¸ªçª—å£</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ctrl + xï¼Œå†æŒ‰aï¼šå›åˆ°ä¼ ç»Ÿæ¨¡å¼ï¼Œå³é€€å‡ºlayoutï¼Œå›åˆ°æ‰§è¡Œlayoutä¹‹å‰çš„è°ƒè¯•çª—å£ã€‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œzhangjs0322ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/zhangjs0322/article/details/10152279</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å±•ç¤ºæºç "></a>å±•ç¤ºæºç <a class="hash-link" href="#å±•ç¤ºæºç " title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">layout src</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><img alt="image-20210815090328178" src="/assets/images/image-20210815090328178-bc176724ebfb33f11ca2659d6958375f.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å±•ç¤ºæ±‡ç¼–"></a>å±•ç¤ºæ±‡ç¼–<a class="hash-link" href="#å±•ç¤ºæ±‡ç¼–" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">layout src</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><img alt="image-20210815090410502" src="/assets/images/image-20210815090410502-f87bff04a507023931a7d05a75802e4e.png"></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">gdb</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">The GNU Debugger.More information: https://www.gnu.org/software/gdb.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> - Debug an executable:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   gdb {{executable}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> - Attach a process to gdb:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   gdb -p {{procID}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> - Debug with a core file:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   gdb -c {{core}} {{executable}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> - Execute given GDB commands upon start:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   gdb -ex &quot;{{commands}}&quot; {{executable}}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> - Start gdb and pass arguments to the executable:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   gdb --args {{executable}} {{argument1}} {{argument2}}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="é€€å‡ºå±•ç¤º"></a>é€€å‡ºå±•ç¤º<a class="hash-link" href="#é€€å‡ºå±•ç¤º" title="Direct link to heading">#</a></h4><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤<a class="hash-link" href="#å¸¸ç”¨å‘½ä»¤" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="gdb-å¸¸ç”¨å‘½ä»¤"></a>gdb å¸¸ç”¨å‘½ä»¤<a class="hash-link" href="#gdb-å¸¸ç”¨å‘½ä»¤" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1ï¼Œå¯åŠ¨ç¨‹åº"></a>1ï¼Œå¯åŠ¨ç¨‹åº<a class="hash-link" href="#1ï¼Œå¯åŠ¨ç¨‹åº" title="Direct link to heading">#</a></h4><ul><li>r(un)ï¼šæ‰§è¡Œç¨‹åºï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®æ–­ç‚¹ï¼Œåˆ™ç›´æ¥æŠŠç¨‹åºéƒ½æ‰§è¡Œå®Œ</li><li>startï¼šæ‰§è¡Œç¨‹åºåˆ°mainå‡½æ•°åï¼Œåœä½ã€‚</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2ï¼Œå¸¸ç”¨å‘½ä»¤"></a>2ï¼Œå¸¸ç”¨å‘½ä»¤<a class="hash-link" href="#2ï¼Œå¸¸ç”¨å‘½ä»¤" title="Direct link to heading">#</a></h4><ul><li>n(ext)ï¼šä¸‹ä¸€æ¡æŒ‡ä»¤ï¼ˆä¸è¿›å…¥å‡½æ•°ï¼‰</li><li>s(tep)ï¼šè¿›å…¥å‡½æ•°</li><li>å›è½¦ï¼šæ‰§è¡Œä¸Šä¸€æ¡å‘½ä»¤</li><li>cï¼šæ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹åœä½ï¼Œå¦‚æœåé¢æ²¡æœ‰æ–­ç‚¹ï¼Œç¨‹åºæ‰§è¡Œç»“æŸã€‚</li><li>qï¼šé€€å‡ºgdb</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3ï¼Œè®¾ç½®æ–­ç‚¹"></a>3ï¼Œè®¾ç½®æ–­ç‚¹<a class="hash-link" href="#3ï¼Œè®¾ç½®æ–­ç‚¹" title="Direct link to heading">#</a></h4><ul><li><p>b(reak)ï¼šè®¾ç½®æ–­ç‚¹ï¼Œbåé¢æŒ‡å®šè¡Œå·ã€‚</p><ul><li>æŒ‡å®šè¡Œå·</li><li>æŒ‡å®šæ–‡ä»¶å:è¡Œå·</li><li>æŒ‡å®š å‡½æ•°</li><li>æŒ‡å®šæ–‡ä»¶å:å‡½æ•°</li></ul></li><li><p>è®¾ç½®æ¡ä»¶æ–­ç‚¹</p><ul><li><p>æœ‰ä¸ªå¾ªç¯ï¼Œå½“åªæƒ³åœ¨å¾ªç¯å˜é‡i=2çš„æ—¶å€™ï¼Œç¨‹åºåœä½ï¼šã€b è¡Œå· if i == 2ã€‘</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gdb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> info b</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Num     Type           Disp Enb Address            What</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">       breakpoint     keep y   0x0000555555554748 </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> main at main.c:10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    stop only </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul></li><li><p>è®¾ç½®ä¸´æ—¶æ–­ç‚¹ï¼štbreak args
è®¾ç½®ä¸€ä¸ªåªä¸­æ–­ä¸€æ¬¡çš„æ–­ç‚¹ã€‚args å’Œbreak å‘½ä»¤é‡Œçš„å‚æ•°ä¸€æ ·ï¼Œæ–­ç‚¹è®¾ç½®ä¹Ÿä¸€æ ·ï¼Œä½†æ–­ç‚¹åœ¨ç¬¬ä¸€æ¬¡ç¨‹åºä¸­æ–­åè‡ªåŠ¨ åˆ é™¤ã€‚</p></li><li><p>ç”¨æ­£åˆ™è¡¨è¾¾å¼è®¾ç½®æ–­ç”µï¼šrbreak regex
åœ¨æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼regex çš„å‡½æ•°ä¸Šè®¾ç½®æ–­ç‚¹ã€‚è¿™ä¸ªå‘½ä»¤ä¼šåœ¨æ‰€æœ‰åŒ¹é…çš„å‡½æ•°ä¸Šè®¾ç½®æ— æ¡ä»¶çš„æ–­ç‚¹ï¼Œä¹Ÿæ‰“å°è®¾ç½®çš„æ–­ç‚¹åˆ—è¡¨
æ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•æ˜¯æ ‡å‡†çš„ï¼Œå°±å¦‚<code>grep</code>å·¥å…·ç”¨çš„ä¸€æ ·ã€‚æ³¨æ„ï¼Œå’Œshellç”¨çš„ä¸ä¸€æ ·ï¼Œä¾‹å¦‚foo<em>åŒ¹é…å¼€å¤´æ˜¯foï¼Œæ¥ä¸‹æ¥æœ‰0 æˆ–è€…å¤šä¸ªo çš„å‡½æ•°ã€‚åœ¨ä½ çš„æ­£åˆ™è¡¨è¾¾å¼çš„å¼€å¤´å’Œç»“å°¾æœ‰ä¸ªéšå«çš„.</em>,æ‰€ä»¥è¦æƒ³åªåŒ¹é…foo å¼€å¤´çš„å‡½æ•°ï¼Œç”¨^foo.åœ¨è°ƒè¯•C++ç¨‹åºï¼Œåœ¨éç‰¹å®šç±»çš„æˆå‘˜å‡½æ•°çš„é‡è½½å‡½æ•°çš„è®¾ç½®æ–­ç‚¹ä¸Šï¼Œrbreak å¾ˆæœ‰ç”¨ã€‚
ç›´æ¥è¿è¡Œrbreakï¼šåœ¨æ‰€æœ‰å‡½æ•°ä¸Šè®¾ç½®æ–­ç‚¹ã€‚</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4ï¼ŒæŸ¥çœ‹æºæ–‡ä»¶"></a>4ï¼ŒæŸ¥çœ‹æºæ–‡ä»¶<a class="hash-link" href="#4ï¼ŒæŸ¥çœ‹æºæ–‡ä»¶" title="Direct link to heading">#</a></h4><ul><li>l(list)ï¼šæŸ¥çœ‹æºæ–‡ä»¶<ul><li>æŒ‡å®šè¡Œå·</li><li>æŒ‡å®šæ–‡ä»¶å:è¡Œå·</li><li>æŒ‡å®š å‡½æ•°</li><li>æŒ‡å®šæ–‡ä»¶å:å‡½æ•°</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5ï¼ŒæŸ¥çœ‹è®¾ç½®äº†å“ªäº›æ–­ç‚¹"></a>5ï¼ŒæŸ¥çœ‹è®¾ç½®äº†å“ªäº›æ–­ç‚¹<a class="hash-link" href="#5ï¼ŒæŸ¥çœ‹è®¾ç½®äº†å“ªäº›æ–­ç‚¹" title="Direct link to heading">#</a></h4><ul><li>info b</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="6ï¼Œåˆ é™¤æ–­ç‚¹"></a>6ï¼Œåˆ é™¤æ–­ç‚¹<a class="hash-link" href="#6ï¼Œåˆ é™¤æ–­ç‚¹" title="Direct link to heading">#</a></h4><ul><li>d (el)æ–­ç‚¹çš„å·ç </li></ul><p>ä¾‹å­ï¼šå…ˆç”¨info bæŸ¥çœ‹æœ‰å“ªäº›æ–­ç‚¹ï¼Œæ³¨æ„Numåˆ—ï¼Œå¦‚æœæƒ³åˆ é™¤ã€src/add.c:4ã€‘å¤„çš„æ–­ç‚¹ï¼Œå°±æ‰§è¡Œã€d 2ã€‘</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gdb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> info b</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Num     Type           Disp Enb Address            What</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">       breakpoint     keep y   0x0000555555554667 </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> at src/add.c:4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">       breakpoint     keep y   0x000055555555468b </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> main at main.c:5</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>åˆ é™¤3å·ï¼ˆsrc/add.c:4å¤„çš„ï¼‰æ–­ç‚¹ï¼š</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gdb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> d </span><span class="token number" style="color:rgb(247, 140, 108)">2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>å†ç”¨info bçœ‹çœ‹,å‘ç°2å·æ–­ç‚¹æ²¡æœ‰äº†ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">gdb</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> info b</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Num     Type           Disp Enb Address            What</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain">       breakpoint     keep y   0x000055555555468b </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> main at main.c:5</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="7ï¼ŒæŸ¥çœ‹å˜é‡çš„å€¼å’Œå˜é‡çš„ç±»å‹"></a>7ï¼ŒæŸ¥çœ‹å˜é‡çš„å€¼å’Œå˜é‡çš„ç±»å‹<a class="hash-link" href="#7ï¼ŒæŸ¥çœ‹å˜é‡çš„å€¼å’Œå˜é‡çš„ç±»å‹" title="Direct link to heading">#</a></h4><ul><li>æŸ¥çœ‹ä»»ä½•ä¸œè¥¿ï¼ˆå˜é‡/å‡½æ•°ç­‰ï¼‰çš„å€¼ï¼šp</li><li>æŸ¥çœ‹ä»»ä½•ä¸œè¥¿ï¼ˆå˜é‡/å‡½æ•°ç­‰ï¼‰çš„ç±»å‹ï¼šptype</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="8ï¼Œè®¾ç½®ç¨‹åºçš„å¯åŠ¨å‚æ•°"></a>8ï¼Œè®¾ç½®ç¨‹åºçš„å¯åŠ¨å‚æ•°<a class="hash-link" href="#8ï¼Œè®¾ç½®ç¨‹åºçš„å¯åŠ¨å‚æ•°" title="Direct link to heading">#</a></h4><ul><li>å…ˆæ‰§è¡Œã€set args å‚æ•°1]ï¼Œç„¶åã€rã€‘</li><li>ç›´æ¥æ‰§è¡Œã€r å‚æ•°1ã€‘</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="9ï¼Œä¿®æ”¹å˜é‡çš„å€¼"></a>9ï¼Œä¿®æ”¹å˜é‡çš„å€¼<a class="hash-link" href="#9ï¼Œä¿®æ”¹å˜é‡çš„å€¼" title="Direct link to heading">#</a></h4><ul><li>set var å˜é‡=newValue</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="10ï¼ŒæŸ¥çœ‹å¸®åŠ©"></a>10ï¼ŒæŸ¥çœ‹å¸®åŠ©<a class="hash-link" href="#10ï¼ŒæŸ¥çœ‹å¸®åŠ©" title="Direct link to heading">#</a></h4><ul><li>help å‘½ä»¤åå­—ï¼šæ¯”å¦‚æŸ¥çœ‹setå‘½ä»¤çš„å…·ä½“ç”¨æ³•ï¼Œå¯ä»¥ä½¿ç”¨ã€help setã€‘</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="11ï¼Œæ¯æ¬¡å•æ­¥æ‰§è¡Œéƒ½æƒ³è§‚å¯Ÿå˜é‡çš„å€¼"></a>11ï¼Œæ¯æ¬¡å•æ­¥æ‰§è¡Œéƒ½æƒ³è§‚å¯Ÿå˜é‡çš„å€¼<a class="hash-link" href="#11ï¼Œæ¯æ¬¡å•æ­¥æ‰§è¡Œéƒ½æƒ³è§‚å¯Ÿå˜é‡çš„å€¼" title="Direct link to heading">#</a></h4><p>æ¯æ¬¡å•æ­¥æ‰§è¡Œéƒ½æƒ³è§‚å¯Ÿå˜é‡çš„å€¼,è¯·ä½¿ç”¨ã€displayã€‘ï¼Œä¸æƒ³çœ‹äº†ï¼Œå°±ç”¨ã€undisplayã€‘åŠ Numçš„å·ç </p><ul><li>display å˜é‡çš„åå­—</li><li>undisplay Numï¼ˆå·ç ï¼‰</li><li>info displayï¼šå¯ä»¥æŸ¥çœ‹displayçš„Numï¼ˆå·ç ï¼‰</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="12ï¼Œè°ƒè¯•coreæ–‡ä»¶"></a>12ï¼Œè°ƒè¯•coreæ–‡ä»¶<a class="hash-link" href="#12ï¼Œè°ƒè¯•coreæ–‡ä»¶" title="Direct link to heading">#</a></h4><p>è°ƒè¯•coreæ–‡ä»¶,å½“å‡ºç°ï¼šæ®µé”™è¯¯ï¼ˆæ ¸å¿ƒå·²è½¬å‚¨ï¼‰[Segmentation fault (core dumped)]æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ã€gdb ç¨‹åºå coreæ–‡ä»¶åã€‘åï¼Œå°±èƒ½ç›´æ¥çœ‹åˆ°åœ¨å“ªè¡Œå‡ºé”™ï¼Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºï¼Œå¯ä»¥è¾“å…¥ã€whereã€‘ï¼Œä¹Ÿå¯ä»¥å®šä½åˆ°å“ªè¡Œå‡ºé”™ã€‚</p><p>ä½†æ˜¯coreæ–‡ä»¶é»˜è®¤æ˜¯ä¸è¢«ç”Ÿæˆçš„ï¼Œå¦‚ä½•è®©å®ƒç”Ÿæˆå‘¢ï¼Œ</p><ul><li>é¦–å…ˆç¡®è®¤å½“å‰çŠ¶æ€ï¼šã€ulimit -cã€‘ï¼Œå¦‚æœç»“æœä¸º0ï¼Œè¯´æ˜ä¸èƒ½ç”Ÿæˆcoreæ–‡ä»¶</li><li>é‚£ä¹ˆå°±è®¾ç½®coreæ–‡ä»¶çš„å…è®¸å¤§å°ï¼šã€ulimit -c unlimitedã€‘ï¼Œä¹Ÿå°±æ˜¯coreæ–‡ä»¶å¤§å°æ²¡æœ‰é™åˆ¶ï¼Œè¿™æ ·è®¾ç½®çš„å¥½å¤„æ˜¯å½“coreæ–‡ä»¶ç‰¹åˆ«å¤§çš„æ—¶å€™ä¹Ÿèƒ½å¤Ÿè¢«ç”Ÿæˆã€‚å½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šå…·ä½“çš„å¤§å°ã€ulimit -c 1024000ã€‘ç­‰ã€‚</li></ul><p>ä¹‹åå°±æœ‰äº†ä¸‹é¢çš„é—®é¢˜ï¼š</p><p>ç¨‹åºç¬¬ä¸€æ¬¡æ‰§è¡Œå‡ºäº†[Segmentation fault]é”™è¯¯åï¼Œå°±ä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ªåå­—ä¸ºã€coreã€‘çš„æ–‡ä»¶ï¼Œé—®é¢˜æ¥äº†ï¼Œå¦‚æœåˆæ‰§è¡Œäº†ä¸€æ¬¡ï¼Œåˆå‡ºäº†[Segmentation fault]é”™è¯¯åï¼Œåˆä¼šç”Ÿæˆä¸€ä¸ªã€coreã€‘ï¼Œè¿™æ¬¡çš„ã€coreã€‘å°±ä¼šè¦†ç›–æ‰ä¸Šæ¬¡çš„ã€coreã€‘ï¼Œæ‰€ä»¥å°±éœ€è¦è®¾ç½®å¦‚ä½•ç”Ÿæˆã€coreã€‘çš„æ–‡ä»¶åï¼Œè¾¾åˆ°æ¯æ¬¡ç”Ÿæˆçš„ã€coreã€‘çš„åå­—éƒ½ä¸ç›¸åŒï¼Œå°±ä¸ä¼šè¦†ç›–æ‰ä¸Šæ¬¡çš„coreæ–‡ä»¶äº†ã€‚</p><p>é€‰é¡¹å¦‚ä¸‹ï¼š</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">%pï¼šinsert pid into filename æ·»åŠ pid</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">%uï¼šinsert current uid into filename æ·»åŠ å½“å‰çš„uid</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">%gï¼šinsert current gid into filename æ·»åŠ å½“å‰çš„gid</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">%sï¼šinsert signal that caused the coredump into the filename æ·»åŠ å¯¼è‡´äº§ç”Ÿcoreçš„ä¿¡å·</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">%tï¼šinsert UNIX </span><span class="token function" style="color:rgb(130, 170, 255)">time</span><span class="token plain"> that the coredump occurred into filename æ·»åŠ coreæ–‡ä»¶ç”Ÿæˆæ—¶é—´çš„unixæ—¶é—´</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">%hï¼šinsert </span><span class="token function" style="color:rgb(130, 170, 255)">hostname</span><span class="token plain"> where the coredump happened into filename æ·»åŠ ä¸»æœºåå­—</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">%eï¼šinsert coredumping executable name into filename æ·»åŠ ç¨‹åºå</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ä¿®æ”¹åŠæ³•ï¼š</p><ul><li><p>åˆ‡æ¢åˆ°rootç”¨æˆ·</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">su</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li><li><p>ç¼–è¾‘/proc/sys/kernel/core_patternæ–‡ä»¶ï¼Œåªèƒ½ç”¨ä¸‹é¢çš„æ–¹æ³•</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-shell codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;core-%e-%t&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> /proc/sys/kernel/core_pattern</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ç„¶åç”Ÿæˆçš„coreæ–‡ä»¶çš„åå­—å°±å˜ä¸ºï¼šã€core-app-1555987945ã€‘ï¼Œæ³¨æ„ç¨‹åºçš„åå­—ä¸ºappã€‚</p></li></ul><p>å°†æ–­ç‚¹æ‰“åˆ°æŸä¸ªå‡½æ•°é‚£é‡Œ</p><p>ui_mainloop</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Reading symbols from ./build/x86-nemu-interpreter...done.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb) break ui_mainloop</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Breakpoint 1 at 0x4da0: file src/monitor/debug/ui.c, line 81.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb) r</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Starting program: /home/dys/ics2020/nemu/build/x86-nemu-interpreter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[Thread debugging using libthread_db enabled]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Using host libthread_db library &quot;/lib/x86_64-linux-gnu/libthread_db.so.1&quot;.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[src/monitor/monitor.c,38,load_img] No image is given. Use the default build-in image.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[src/monitor/monitor.c,28,welcome] Debug: OFF</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[src/monitor/monitor.c,31,welcome] Build time: 10:05:18, Aug 15 2021</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Welcome to x86-NEMU!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">For help, type &quot;help&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Breakpoint 1, ui_mainloop () at src/monitor/debug/ui.c:81</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">81        if (is_batch_mode()) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å†…å­˜æ“ä½œ"></a>å†…å­˜æ“ä½œ<a class="hash-link" href="#å†…å­˜æ“ä½œ" title="Direct link to heading">#</a></h4><p>ä»£ç </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">   â”‚89          /* extract the first token as the command */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   â”‚90          char *cmd = strtok(str, &quot; &quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   â”‚91          if (cmd == NULL) { continue; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   â”‚92</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   â”‚93          /* treat the remaining string as the arguments,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   â”‚94           * which may need further parsing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   â”‚95           */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   â”‚96          char *args = cmd + strlen(cmd) + 1;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>cmd ç¬¬ä¸€ä¸ªå­—ç¬¦æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²ã€‚</p><p>*cmd æ˜¯å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚charç±»å‹çš„hï¼Œ10è¿›åˆ¶æ˜¯104ï¼Œ16è¿›åˆ¶æ˜¯0x68ã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb) p cmd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$7 = 0x55555d783150 &quot;help&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb) p strlen(cmd)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$8 = 4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb) p *cmd</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$9 = 104 &#x27;h&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb) x 0x55555d783150</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">0x55555d783150: 0x706c6568</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb) x/d 0x55555d783150</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">0x55555d783150: 1886152040</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb) x/db 0x55555d783150</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">0x55555d783150: 104</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(gdb) x/xb 0x55555d783150</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">0x55555d783150: 0x68</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ç±»å‹ï¼šå¯¹ä¸€æ®µå†…å­˜çš„è§£è¯»æ–¹å¼ã€‚</p><p><strong>C ç¨‹åºæ‰§è¡Œçš„ä¸¤ä¸ªè§†è§’</strong></p><p>é™æ€ï¼šC ä»£ç çš„è¿ç»­ä¸€æ®µæ€»èƒ½å¯¹åº”åˆ°ä¸€æ®µè¿ç»­çš„æœºå™¨æŒ‡ä»¤</p><p>åŠ¨æ€ï¼šC ä»£ç æ‰§è¡Œçš„çŠ¶æ€æ€»èƒ½å¯¹åº”åˆ°æœºå™¨çš„çŠ¶æ€</p><ul><li>æºä»£ç è§†è§’<ul><li>å‡½æ•°ã€å˜é‡ã€æŒ‡é’ˆâ€¦â€¦</li></ul></li><li>æœºå™¨æŒ‡ä»¤è§†è§’<ul><li>å¯„å­˜å™¨ã€å†…å­˜ã€åœ°å€â€¦â€¦</li></ul></li></ul><hr><p>ä¸¤ä¸ªè§†è§’çš„å…±åŒä¹‹å¤„ï¼šå†…å­˜</p><ul><li>ä»£ç ã€å˜é‡ (æºä»£ç è§†è§’) = åœ°å€ + é•¿åº¦ (æœºå™¨æŒ‡ä»¤è§†è§’)</li><li>(ä¸å¤ªä¸¥è°¨åœ°) å†…å­˜ = ä»£ç  + æ•°æ® + å †æ ˆ<ul><li>å› æ­¤ç†è§£ C ç¨‹åºæ‰§è¡Œæœ€é‡è¦çš„å°±æ˜¯å†…å­˜æ¨¡å‹</li></ul></li></ul><p><strong>ä» <code>main</code> å‡½æ•°å¼€å§‹æ‰§è¡Œ</strong></p><p>æ ‡å‡†è§„å®š C ç¨‹åºä» <code>main</code> å¼€å§‹æ‰§è¡Œ</p><ul><li>(æ€è€ƒé¢˜ï¼šè°è°ƒç”¨çš„ <code>main</code>ï¼Ÿè¿›ç¨‹æ‰§è¡Œçš„ç¬¬ä¸€æ¡æŒ‡ä»¤æ˜¯ä»€ä¹ˆï¼Ÿ)</li></ul><hr><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">int main(int argc, char *argv[]);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li>argc (argument count): å‚æ•°ä¸ªæ•°</li><li>argv (argument vector): å‚æ•°åˆ—è¡¨ (NULLç»“æŸ)</li></ul><hr><p>ä¸Šæ¬¡è¯¾å·²ç»æ¼”ç¤ºè¿‡</p><ul><li><code>ls -al</code> (<code>argc = 2, argv = [&quot;ls&quot;, &quot;-al&quot;, NULL]</code>)</li></ul><p><strong><code>main</code>, <code>argc</code> å’Œ <code>argv</code></strong></p><p>ä¸€åˆ‡çš†å¯å–åœ°å€ï¼</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void printptr(void *p) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  printf(&quot;p = %p;  *p = %016lx\n&quot;, p, *(long *)p);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int x;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">int main(int argc, char *argv[]) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  printptr(main);  // ä»£ç </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  printptr(&amp;main);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  printptr(&amp;x);    // æ•°æ®</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  printptr(&amp;argc); // å †æ ˆ</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  printptr(argv);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  printptr(&amp;argv);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  printptr(argv[0]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ç±»å‹ï¼šå¯¹ä¸€æ®µå†…å­˜çš„è§£è¯»æ–¹å¼</p><ul><li>éå¸¸ â€œæ±‡ç¼–â€â€”â€”æ²¡æœ‰ class, polymorphism, type traits, ...</li><li>C é‡Œæ‰€æœ‰çš„æ•°æ®éƒ½å¯ä»¥ç†è§£æˆæ˜¯åœ°å€ (æŒ‡é’ˆ) + ç±»å‹ (å¯¹åœ°å€çš„è§£è¯»)</li></ul><p>è¿›å…¥gdb</p><p>è°ƒè¯•ç¨‹åºæ—¶ï¼Œæœ‰å‡ ç§æ–¹æ³•å¯ä»¥åœ¨gdbä¸‹è¿è¡Œä½ çš„ç¨‹åºï¼š</p><p>gdb ä½ çš„ç¨‹åº</p><p>è¿›å…¥gdbåï¼Œè¾“å…¥run(ç®€å†™r) {arg1} {arg2} â€¦ {argN}</p><p>gdb â€“args ä½ çš„ç¨‹åº arg1 arg2 â€¦ argN è¿›å…¥gdbåï¼Œè¿è¡Œrunã€‚</p><p>gdbè¿›å…¥gdbåï¼Œè¾“å…¥file ä½ çš„ç¨‹åºã€‚</p><p>ç„¶åä½¿ç”¨set args arg1 arg2 â€¦ argN è®¾å®šå¥½ä½ çš„ç¨‹åºå‚æ•°ï¼Œå†è¿è¡Œrunã€‚</p><p>è°ƒè¯•æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼š</p><p>gdb ä½ çš„ç¨‹åº ç¨‹åºpid</p><p>æŸ¥coreï¼šgdb ä½ çš„ç¨‹åº coreæ–‡ä»¶</p><p>é€€å‡ºgdb</p><p>è¾“å…¥quitæˆ–è€…æŒ‰ä¸‹Ctrl-dé€€å‡º</p><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒHonei_Xã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚
åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/xiongxinlei/article/details/78119714" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/xiongxinlei/article/details/78119714</a></p><p><strong>è¡¨ 10.1. gdbåŸºæœ¬å‘½ä»¤1</strong></p><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>backtraceï¼ˆæˆ–btï¼‰</td><td>æŸ¥çœ‹å„çº§å‡½æ•°è°ƒç”¨åŠå‚æ•°</td></tr><tr><td>finish</td><td>è¿ç»­è¿è¡Œåˆ°å½“å‰å‡½æ•°è¿”å›ä¸ºæ­¢ï¼Œç„¶ååœä¸‹æ¥ç­‰å¾…å‘½ä»¤</td></tr><tr><td>frameï¼ˆæˆ–fï¼‰ å¸§ç¼–å·</td><td>é€‰æ‹©æ ˆå¸§</td></tr><tr><td>infoï¼ˆæˆ–iï¼‰ locals</td><td>æŸ¥çœ‹å½“å‰æ ˆå¸§å±€éƒ¨å˜é‡çš„å€¼</td></tr><tr><td>listï¼ˆæˆ–lï¼‰</td><td>åˆ—å‡ºæºä»£ç ï¼Œæ¥ç€ä¸Šæ¬¡çš„ä½ç½®å¾€ä¸‹åˆ—ï¼Œæ¯æ¬¡åˆ—10è¡Œ</td></tr><tr><td>list è¡Œå·</td><td>åˆ—å‡ºä»ç¬¬å‡ è¡Œå¼€å§‹çš„æºä»£ç </td></tr><tr><td>list å‡½æ•°å</td><td>åˆ—å‡ºæŸä¸ªå‡½æ•°çš„æºä»£ç </td></tr><tr><td>nextï¼ˆæˆ–nï¼‰</td><td>æ‰§è¡Œä¸‹ä¸€è¡Œè¯­å¥</td></tr><tr><td>printï¼ˆæˆ–pï¼‰</td><td>æ‰“å°è¡¨è¾¾å¼çš„å€¼ï¼Œé€šè¿‡è¡¨è¾¾å¼å¯ä»¥ä¿®æ”¹å˜é‡çš„å€¼æˆ–è€…è°ƒç”¨å‡½æ•°</td></tr><tr><td>quitï¼ˆæˆ–qï¼‰</td><td>é€€å‡º<code>gdb</code>è°ƒè¯•ç¯å¢ƒ</td></tr><tr><td>set var</td><td>ä¿®æ”¹å˜é‡çš„å€¼</td></tr><tr><td>start</td><td>å¼€å§‹æ‰§è¡Œç¨‹åºï¼Œåœåœ¨<code>main</code>å‡½æ•°ç¬¬ä¸€è¡Œè¯­å¥å‰é¢ç­‰å¾…å‘½ä»¤</td></tr><tr><td>stepï¼ˆæˆ–sï¼‰</td><td>æ‰§è¡Œä¸‹ä¸€è¡Œè¯­å¥ï¼Œå¦‚æœæœ‰å‡½æ•°è°ƒç”¨åˆ™è¿›å…¥åˆ°å‡½æ•°ä¸­</td></tr></tbody></table><p><strong>è¡¨ 10.2. gdbåŸºæœ¬å‘½ä»¤2</strong></p><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>breakï¼ˆæˆ–bï¼‰ è¡Œå·</td><td>åœ¨æŸä¸€è¡Œè®¾ç½®æ–­ç‚¹</td></tr><tr><td>break å‡½æ•°å</td><td>åœ¨æŸä¸ªå‡½æ•°å¼€å¤´è®¾ç½®æ–­ç‚¹</td></tr><tr><td>break ... if ...</td><td>è®¾ç½®æ¡ä»¶æ–­ç‚¹</td></tr><tr><td>continueï¼ˆæˆ–cï¼‰</td><td>ä»å½“å‰ä½ç½®å¼€å§‹è¿ç»­è¿è¡Œç¨‹åº</td></tr><tr><td>delete breakpoints æ–­ç‚¹å·</td><td>åˆ é™¤æ–­ç‚¹</td></tr><tr><td>display å˜é‡å</td><td>è·Ÿè¸ªæŸ¥çœ‹æŸä¸ªå˜é‡ï¼Œæ¯æ¬¡åœä¸‹æ¥éƒ½æ˜¾ç¤ºå®ƒçš„å€¼</td></tr><tr><td>disable breakpoints æ–­ç‚¹å·</td><td>ç¦ç”¨æ–­ç‚¹</td></tr><tr><td>enable æ–­ç‚¹å·</td><td>å¯ç”¨æ–­ç‚¹</td></tr><tr><td>infoï¼ˆæˆ–iï¼‰ breakpoints</td><td>æŸ¥çœ‹å½“å‰è®¾ç½®äº†å“ªäº›æ–­ç‚¹</td></tr><tr><td>runï¼ˆæˆ–rï¼‰</td><td>ä»å¤´å¼€å§‹è¿ç»­è¿è¡Œç¨‹åº</td></tr><tr><td>undisplay è·Ÿè¸ªæ˜¾ç¤ºå·</td><td>å–æ¶ˆè·Ÿè¸ªæ˜¾ç¤º</td></tr></tbody></table><p><strong>è¡¨ 10.3. gdbåŸºæœ¬å‘½ä»¤3</strong></p><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td>watch</td><td>è®¾ç½®è§‚å¯Ÿç‚¹</td></tr><tr><td>infoï¼ˆæˆ–iï¼‰ watchpoints</td><td>æŸ¥çœ‹å½“å‰è®¾ç½®äº†å“ªäº›è§‚å¯Ÿç‚¹</td></tr><tr><td>x</td><td>ä»æŸä¸ªä½ç½®å¼€å§‹æ‰“å°å­˜å‚¨å•å…ƒçš„å†…å®¹ï¼Œå…¨éƒ¨å½“æˆå­—èŠ‚æ¥çœ‹ï¼Œè€Œä¸åŒºåˆ†å“ªä¸ªå­—èŠ‚å±äºå“ªä¸ªå˜é‡</td></tr></tbody></table><p>å‚è€ƒï¼š<a href="https://docs.huihoo.com/c/linux-c-programming/ch10.html" target="_blank" rel="noopener noreferrer">https://docs.huihoo.com/c/linux-c-programming/ch10.html</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="rtfm"></a>RTFM<a class="hash-link" href="#rtfm" title="Direct link to heading">#</a></h2><ul><li><p><a href="https://www.gnu.org/software/gdb/documentation/" target="_blank" rel="noopener noreferrer">GDB: The GNU Project Debugger</a></p></li><li><p><a href="https://sourceware.org/gdb/current/onlinedocs/gdb/" target="_blank" rel="noopener noreferrer">https://sourceware.org/gdb/current/onlinedocs/gdb/</a></p></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="dys-typora-open://mine/survival/docs/ç¼–ç¨‹åŸºç¡€/è®¡ç®—æœºç³»ç»ŸåŸºç¡€/2-ç¨‹åºçš„è¿è¡Œ/è°ƒè¯•å·¥å…·/GDB.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#æºç å±•ç¤º" class="table-of-contents__link">æºç å±•ç¤º</a></li><li><a href="#å¸¸ç”¨å‘½ä»¤" class="table-of-contents__link">å¸¸ç”¨å‘½ä»¤</a></li><li><a href="#gdb-å¸¸ç”¨å‘½ä»¤" class="table-of-contents__link">gdb å¸¸ç”¨å‘½ä»¤</a></li><li><a href="#rtfm" class="table-of-contents__link">RTFM</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.aaa24a49.js"></script>
<script src="/runtime~main.7eeb3d64.js"></script>
<script src="/main.7a041c89.js"></script>
<script src="/1.62b3ea65.js"></script>
<script src="/257.bb7ed37e.js"></script>
<script src="/258.ed1b30f8.js"></script>
<script src="/935f2afb.55f5968c.js"></script>
<script src="/256.a7530d90.js"></script>
<script src="/ff55abc4.17ee3a2a.js"></script>
</body>
</html>