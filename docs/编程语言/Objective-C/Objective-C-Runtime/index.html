<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Blog Atom Feed"><title data-react-helmet="true">Objective-C-Runtime | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Objective-C-Runtime | My Site"><meta data-react-helmet="true" name="description" content="Runtime"><meta data-react-helmet="true" property="og:description" content="Runtime"><meta data-react-helmet="true" property="og:url" content="http://localhost:9999//docs/ç¼–ç¨‹è¯­è¨€/Objective-C/Objective-C-Runtime"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://localhost:9999//docs/ç¼–ç¨‹è¯­è¨€/Objective-C/Objective-C-Runtime"><link rel="stylesheet" href="/styles.8cfbcdec.css">
<link rel="preload" href="/styles.65a50636.js" as="script">
<link rel="preload" href="/runtime~main.b175e2de.js" as="script">
<link rel="preload" href="/main.777b260c.js" as="script">
<link rel="preload" href="/1.5f7a006f.js" as="script">
<link rel="preload" href="/260.fc337f83.js" as="script">
<link rel="preload" href="/261.cd474b1f.js" as="script">
<link rel="preload" href="/935f2afb.42cf00cb.js" as="script">
<link rel="preload" href="/259.fa9b4b3b.js" as="script">
<link rel="preload" href="/8880a44b.9593ef91.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a><a class="navbar__item navbar__link" href="/docs/">åŸºç¡€</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/ç¼–ç¨‹è¯­è¨€/ç¼–ç¨‹è¯­è¨€">è¯­è¨€</a><a class="navbar__item navbar__link" href="/docs/å·¥å…·/å¸¸ç”¨å·¥å…·">å·¥å…·</a><a class="navbar__item navbar__link" href="/docs/åº”ç”¨å¼€å‘/åº”ç”¨å¼€å‘">åº”ç”¨å¼€å‘</a><a class="navbar__item navbar__link" href="/docs/Apple/iOSå¼€å‘/iOSå¼€å‘">Apple</a><a class="navbar__item navbar__link" href="/docs/éŸ³è§†é¢‘/éŸ³è§†é¢‘">éŸ³è§†é¢‘</a><a class="navbar__item navbar__link" href="/docs/é¡¹ç›®/é¡¹ç›®">é¡¹ç›®</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">åŸºç¡€</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/ç¼–ç¨‹è¯­è¨€/ç¼–ç¨‹è¯­è¨€">è¯­è¨€</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/å·¥å…·/å¸¸ç”¨å·¥å…·">å·¥å…·</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/åº”ç”¨å¼€å‘/åº”ç”¨å¼€å‘">åº”ç”¨å¼€å‘</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Apple/iOSå¼€å‘/iOSå¼€å‘">Apple</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/éŸ³è§†é¢‘/éŸ³è§†é¢‘">éŸ³è§†é¢‘</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/é¡¹ç›®/é¡¹ç›®">é¡¹ç›®</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Objective-C-Runtime</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="runtime"></a>Runtime<a class="hash-link" href="#runtime" title="Direct link to heading">#</a></h1><p>Demo: <a href="https://github.com/DingYusong/RunTimeTest" target="_blank" rel="noopener noreferrer">https://github.com/DingYusong/RunTimeTest</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="objective-c"></a>Objective-C++<a class="hash-link" href="#objective-c" title="Direct link to heading">#</a></h2><p><a href="https://developer.apple.com/forums/thread/76892" target="_blank" rel="noopener noreferrer">https://developer.apple.com/forums/thread/76892</a></p><p><a href="https://developer.apple.com/library/archive/technotes/tn2185/_index.html#//apple_ref/doc/uid/DTS10004200" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/archive/technotes/tn2185/_index.html#//apple_ref/doc/uid/DTS10004200</a></p><p><a href="https://clang.llvm.org/docs/AutomaticReferenceCounting.html" target="_blank" rel="noopener noreferrer">https://clang.llvm.org/docs/AutomaticReferenceCounting.html</a></p><p><a href="https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/CppRuntimeEnv/CPPRuntimeEnv.html#//apple_ref/doc/uid/TP40001666" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/CppRuntimeEnv/CPPRuntimeEnv.html#//apple_ref/doc/uid/TP40001666</a></p><p>Using C++ With Objective-C</p><p><a href="http://web.archive.org/web/20101203170217/http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Articles/ocCPlusPlus.html" target="_blank" rel="noopener noreferrer">http://web.archive.org/web/20101203170217/http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Articles/ocCPlusPlus.html</a></p><p>C++ Runtime Environment Programming Guide</p><p><a href="https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/CppRuntimeEnv/CPPRuntimeEnv.html#//apple_ref/doc/uid/TP40001666" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/CppRuntimeEnv/CPPRuntimeEnv.html#//apple_ref/doc/uid/TP40001666</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å †å’Œæ ˆ"></a>å †å’Œæ ˆ<a class="hash-link" href="#å †å’Œæ ˆ" title="Direct link to heading">#</a></h3><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW2" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW2</a></p><p>Objective-C å¯¹è±¡å­˜å‚¨åœ¨å †ä¸Šè€Œä¸æ˜¯æ ˆä¸Š whyï¼Ÿï¼š<a href="https://blog.csdn.net/LIN1986LIN/article/details/88292251" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/LIN1986LIN/article/details/88292251</a></p><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW2" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW2</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æºç "></a>æºç <a class="hash-link" href="#æºç " title="Direct link to heading">#</a></h2><p><a href="https://opensource.apple.com/tarballs/objc4/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/tarballs/objc4/</a></p><ul><li>NSObject(AutoreleasePool çš„å®ç°çš„æºç ï¼Œobjc runtimeçš„æºç )</li></ul><p><a href="https://github.com/opensource-apple" target="_blank" rel="noopener noreferrer">https://github.com/opensource-apple</a></p><p><a href="https://opensource.apple.com/tarballs/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/tarballs/</a></p><p><a href="https://opensource.apple.com/source/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/source/</a></p><p>CoreFoundation: (åŒ…å«CFRunloopå’ŒCFRuntimeçš„æºç ç­‰)</p><p><a href="https://opensource.apple.com/source/CF/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/source/CF/</a></p><p><a href="https://opensource.apple.com/tarballs/CF/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/tarballs/CF/</a></p><p><a href="https://blog.ibireme.com/2015/05/18/runloop/" target="_blank" rel="noopener noreferrer">https://blog.ibireme.com/2015/05/18/runloop/</a></p><p>Swiftçš„Foundationæºç </p><p><a href="https://github.com/apple/swift-corelibs-foundation/" target="_blank" rel="noopener noreferrer">https://github.com/apple/swift-corelibs-foundation/</a></p><p>macOS-10.15æºç </p><p><a href="https://opensource.apple.com/release/macos-1015.html" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/release/macos-1015.html</a></p><p><a href="https://www.jianshu.com/p/2fae148f015f" target="_blank" rel="noopener noreferrer">iOS-åº•å±‚åŸç† 03ï¼šobjc4-781 æºç ç¼–è¯‘ &amp; è°ƒè¯•</a></p><ul><li>å·²ç»é…ç½®å¥½çš„æºç è°ƒè¯•</li></ul><p><a href="https://github.com/LGCooci/objc4_debug" target="_blank" rel="noopener noreferrer">https://github.com/LGCooci/objc4_debug</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å¹¶å‘ç¼–ç¨‹"></a>å¹¶å‘ç¼–ç¨‹<a class="hash-link" href="#å¹¶å‘ç¼–ç¨‹" title="Direct link to heading">#</a></h2><p><a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/archive/documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æšä¸¾"></a>æšä¸¾<a class="hash-link" href="#æšä¸¾" title="Direct link to heading">#</a></h2><p><a href="https://juejin.cn/post/6844903794568855566" target="_blank" rel="noopener noreferrer">OCä¸­æšä¸¾å†™æ³• ä»¥åŠ å­—ç¬¦ä¸²ç±»å‹æšä¸¾å®ç°æ¢ç´¢</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="è¯»ä¹¦ç¬”è®°"></a>è¯»ä¹¦ç¬”è®°<a class="hash-link" href="#è¯»ä¹¦ç¬”è®°" title="Direct link to heading">#</a></h2><p>[Effective Objective-C 20 ç¼–å†™é«˜è´¨é‡iOSä¸OS Xä»£ç çš„52ä¸ªæœ‰æ•ˆæ–¹æ³•.pdf](Objective-C/ç¼–å†™é«˜è´¨é‡iOSä¸OS Xä»£ç çš„52ä¸ªæœ‰æ•ˆæ–¹æ³•.md)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="aspectsé¢å‘åˆ‡é¢ç¼–ç¨‹"></a>Aspectsé¢å‘åˆ‡é¢ç¼–ç¨‹<a class="hash-link" href="#aspectsé¢å‘åˆ‡é¢ç¼–ç¨‹" title="Direct link to heading">#</a></h2><p>iOS AOPæ¡†æ¶Aspectså®ç°åŸç†</p><p>Aspectæ˜¯ä»€ä¹ˆï¼Ÿ</p><p>A delightful, simple library for aspect oriented programming by @steipete.</p><p>ä¸€ä¸ªè½»é‡çº§çš„ï¼ŒOCçš„é¢å‘åˆ‡é¢ç¼–ç¨‹åº“ã€‚</p><p>èƒ½å¹²ä»€ä¹ˆï¼Ÿ</p><p>å…è®¸ä½ åœ¨æ¯ä¸€ä¸ªç±»å’Œå®ä¾‹æ–¹æ³•ä¸­åŠ å…¥ä»»ä½•ä»£ç ã€‚å¯ä»¥åœ¨æ–¹æ³•æ‰§è¡Œä¹‹å‰æˆ–è€…ä¹‹åæ‰§è¡Œ,ä¹Ÿå¯ä»¥æ›¿æ¢æ‰åŸæœ‰çš„æ–¹æ³•ã€‚</p><p>å‚è€ƒæ–‡æ¡£</p><ul><li><p><a href="https://github.com/steipete/Aspects" target="_blank" rel="noopener noreferrer">https://github.com/steipete/Aspects</a></p></li><li><p><a href="http://blog.sina.com.cn/s/blog_b0c5954101017zfr.html" target="_blank" rel="noopener noreferrer">http://blog.sina.com.cn/s/blog_b0c5954101017zfr.html</a>)</p></li><li><p><a href="https://blog.csdn.net/colorapp/article/details/45317347" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/colorapp/article/details/45317347</a>)</p></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="objc"></a>objc<a class="hash-link" href="#objc" title="Direct link to heading">#</a></h1><p>æºç åˆ†æï¼šè§æºç </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="runtime-1"></a>runtime<a class="hash-link" href="#runtime-1" title="Direct link to heading">#</a></h2><p>ä»€ä¹ˆæ˜¯runtimeï¼Ÿ</p><p>ç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯ä¸€ç»„Cè¯­è¨€å‡½æ•°ã€‚æˆ‘ä»¬ç”¨OCè¯­è¨€å†™çš„ä»£ç ï¼Œåœ¨è¿è¡Œæ—¶ä¼šè°ƒç”¨é‚£ç»„Cè¯­è¨€å‡½æ•°ã€‚</p><p>Objective-Cä¸­çš„æ–¹æ³•è°ƒç”¨ï¼Œä¼šè¢«ç¼–è¯‘å™¨è½¬åŒ–ä¸º<code>objc_msgSend(receiver, selector)</code>æ–¹æ³•ã€‚</p><p>ObjC ä¸­æ¶ˆæ¯çš„å‘é€</p><ol><li>ç¼“å­˜å‘½ä¸­</li><li>æŸ¥æ‰¾å½“å‰ç±»çš„ç¼“å­˜åŠæ–¹æ³•</li><li>æŸ¥æ‰¾çˆ¶ç±»çš„ç¼“å­˜åŠæ–¹æ³•</li><li>æ–¹æ³•å†³è®®</li><li>æ¶ˆæ¯è½¬å‘</li></ol><p>ä¸‹é¢çš„ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">`@implementation Son : Father``- (id)init``{``    ``self = [``super` `init];``    ``if` `(self)``    ``{``        ``NSLog(@``&quot;%@&quot;``, NSStringFromClass([self class]));``        ``NSLog(@``&quot;%@&quot;``, NSStringFromClass([``super` `class]));``    ``}``    ``return` `self;``}``@end`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>ç­”æ¡ˆï¼šéƒ½è¾“å‡º Son</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">`2014-11-05 11:06:18.060 Test[8566:568584] NSStringFromClass([self class]) = Son``2014-11-05 11:06:18.061 Test[8566:568584] NSStringFromClass([``super` `class]) = Son`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>è§£æƒ‘ï¼šè¿™ä¸ªé¢˜ç›®ä¸»è¦æ˜¯è€ƒå¯Ÿå…³äºobjcä¸­å¯¹ self å’Œ super çš„ç†è§£ã€‚</p><p>å‚è€ƒæ–‡æ¡£</p><ul><li><a href="http://www.cocoachina.com/ios/20141224/10740.html" target="_blank" rel="noopener noreferrer">åˆ¨æ ¹é—®åº•Objectiveï¼C Runtime</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ç±»å‹ç¼–ç "></a>ç±»å‹ç¼–ç <a class="hash-link" href="#ç±»å‹ç¼–ç " title="Direct link to heading">#</a></h3><p>Objective-C ç±»å‹ç¼–ç </p><p>&quot;è¿”å›å€¼ç±»å‹ + id(@) + sel(:) + [å‚æ•°ç±»å‹]&quot;</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;v@:@&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p> å‰3ä¸ªæ˜¯å¿…é¡»å†™çš„ã€‚</p><p><a href="https://nshipster.cn/type-encodings/" target="_blank" rel="noopener noreferrer">https://nshipster.cn/type-encodings/</a></p><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html</a></p><p>ä¾‹å¦‚ï¼š</p><p>æ·»åŠ ä¸€ä¸ªcæ–¹æ³•ï¼Œéœ€è¦æŒ‡æ˜<code>id self, SEL _cmd</code>ä¸¤ä¸ªå‚æ•°</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void startEngine(id self, SEL _cmd, NSString *brand) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    NSLog(@&quot;my %@ car starts the engine&quot;, brand);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@implementation Car (myCar)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+ (BOOL)resolveInstanceMethod:(SEL)sel {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (sel == @selector(drive)) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        class_addMethod([self class], sel, (IMP)startEngine, &quot;v@:@&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return YES;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return [super resolveInstanceMethod:sel];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>æ·»åŠ ä¸€ä¸ªocæ–¹æ³•ï¼Œä¸éœ€è¦æŒ‡æ˜<code>id self, SEL _cmd</code>ä¸¤ä¸ªå‚æ•°</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@implementation Car (myCar)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+ (BOOL)resolveInstanceMethod:(SEL)sel {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (sel == @selector(drive)) {  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        class_addMethod([self class], sel, class_getMethodImplementation(self, @selector(startEngine:)), &quot;s@:@&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return YES;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return [super resolveInstanceMethod:sel];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- (void)startEngine:(NSString *)brand {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    NSLog(@&quot;my %@ car starts the engine&quot;, brand);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ï½</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/// @return A token which allows to later deregister the aspect.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- (id&lt;AspectToken&gt;)aspect_hookSelector:(SEL)selector</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      withOptions:(AspectOptions)options</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                       usingBlock:(id)block</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            error:(NSError **)error {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return aspect_add(self, selector, options, block, error);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="method-swizzling"></a>Method-Swizzling<a class="hash-link" href="#method-swizzling" title="Direct link to heading">#</a></h3><p>æƒ³åœ¨ç³»ç»Ÿæ–¹æ³•ä¸Šç»Ÿä¸€å¤„ç†ã€‚ä½†æ˜¯é¿å…æ¯ä¸€ä¸ªç±»éƒ½åšåŒæ ·çš„äº‹æƒ…ã€‚è¿™ç±»éœ€æ±‚å¯ä»¥ä½¿ç”¨Method-Swizzlingæ¥å®ç°ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ç±»åœ¨å†…å­˜é‡Œç»´æŠ¤è¿™ä¸€å¼ è¡¨ï¼Œè¿™å¼ è¡¨æ˜¯selectoråˆ°impå®ç°çš„mapè¡¨ã€‚è€Œruntimeç»™æˆ‘æä¾›äº†ç›¸å½“ä¸°å¯Œçš„æ“ä½œmethodçš„æ¥å£ï¼Œè¿™å°±ä¸ºæ–¹æ³•çš„çµæ´»å¤„ç†æä¾›äº†å¤§å¤§çš„æ–¹ä¾¿ã€‚</p><p>åˆ©ç”¨runtimeé‡Œé¢æ–¹æ³•çš„æ›¿æ¢ï¼Œå¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œæ¯”å¦‚ä¸€äº›æ•°ç»„è¶Šç•Œã€‚æˆ‘ä»¬å¯ä»¥åœ¨åº•å±‚å°†objectAtIndex çš„impæŒ‡é’ˆæŒ‡å‘æˆ‘ä»¬è‡ªå·±å†™çš„å®‰å…¨çš„æ–¹æ³•safeObjectAtIndexçš„å®ç°ã€‚</p><p>å†æ¯”å¦‚ï¼Œç›‘å¬deallocçš„é‡Šæ”¾ã€‚</p><p>unrecognized selector sent to class  å´©æºƒçš„å¤„ç†ã€‚å¢å¼ºå¥å£®æ€§ã€‚</p><p>è¡¥ä¸ªDemoã€‚</p><p>å‚è€ƒæ–‡æ¡£</p><ul><li><a href="https://blog.csdn.net/erice_e/article/details/73293905" target="_blank" rel="noopener noreferrer">method-swizzling è¯¦è§£ å’Œä½¿ç”¨</a></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="runtime-2"></a>Runtime<a class="hash-link" href="#runtime-2" title="Direct link to heading">#</a></h1><p>Demo: <a href="https://github.com/DingYusong/RunTimeTest" target="_blank" rel="noopener noreferrer">https://github.com/DingYusong/RunTimeTest</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="arc"></a>ARC<a class="hash-link" href="#arc" title="Direct link to heading">#</a></h2><p><a href="https://clang.llvm.org/docs/AutomaticReferenceCounting.html" target="_blank" rel="noopener noreferrer">https://clang.llvm.org/docs/AutomaticReferenceCounting.html</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æºç -1"></a>æºç <a class="hash-link" href="#æºç -1" title="Direct link to heading">#</a></h2><p><a href="https://opensource.apple.com/tarballs/objc4/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/tarballs/objc4/</a></p><ul><li>NSObject(AutoreleasePool çš„å®ç°çš„æºç ï¼Œobjc runtimeçš„æºç )</li></ul><p><a href="https://github.com/opensource-apple" target="_blank" rel="noopener noreferrer">https://github.com/opensource-apple</a></p><p><a href="https://opensource.apple.com/tarballs/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/tarballs/</a></p><p><a href="https://opensource.apple.com/source/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/source/</a></p><p><a href="https://www.jianshu.com/p/2fae148f015f" target="_blank" rel="noopener noreferrer">iOS-åº•å±‚åŸç† 03ï¼šobjc4-781 æºç ç¼–è¯‘ &amp; è°ƒè¯•</a></p><ul><li>å·²ç»é…ç½®å¥½çš„æºç è°ƒè¯•</li></ul><p><a href="https://github.com/LGCooci/objc4_debug" target="_blank" rel="noopener noreferrer">https://github.com/LGCooci/objc4_debug</a></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£<a class="hash-link" href="#å‚è€ƒæ–‡æ¡£" title="Direct link to heading">#</a></h1><ul><li><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html" target="_blank" rel="noopener noreferrer">ProgrammingWithObjectiveC</a></p></li><li><p><a href="http://wiki.jikexueyuan.com/project/programming-with-objective-c/" target="_blank" rel="noopener noreferrer">ProgrammingWithObjectiveC-ä¸­æ–‡ç‰ˆ</a></p></li><li><p><a href="https://www.yiibai.com/objective_c" target="_blank" rel="noopener noreferrer">https://www.yiibai.com/objective_c</a></p></li><li><p>å®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html</a></p><p>PDFï¼š</p><p><a href="http://cagt.bu.edu/w/images/b/b6/Objective-C_Programming_Language.pdf" target="_blank" rel="noopener noreferrer">http://cagt.bu.edu/w/images/b/b6/Objective-C_Programming_Language.pdf</a></p><p><a href="https://developer.apple.com/documentation/objectivec" target="_blank" rel="noopener noreferrer">https://developer.apple.com/documentation/objectivec</a></p></li></ul><p>åº•å±‚æ–‡ç« </p><ul><li><a href="https://www.jianshu.com/p/ee6a8ebc5bec" target="_blank" rel="noopener noreferrer">iOS-åº•å±‚åŸç† 15ï¼šdyldå‘å±•å²</a></li><li><a href="https://www.jianshu.com/p/2fae148f015f" target="_blank" rel="noopener noreferrer">iOS-åº•å±‚åŸç† 03ï¼šobjc4-781 æºç ç¼–è¯‘ &amp; è°ƒè¯•</a></li></ul><hr><p>åŸåˆ›æ–‡ç« ï¼Œè½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥ï¼Œæœªç»æˆæƒæ‹’ç»è½¬è½½ï¼Œè°¢è°¢ã€‚</p><p>è”ç³»ä½œè€…ï¼š<a href="mailto:dys90@qq.com" target="_blank" rel="noopener noreferrer">dys90@qq.com</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="dys-typora-open://mine/survival/docs/ç¼–ç¨‹è¯­è¨€/Objective-C/Objective-C-Runtime.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#objective-c" class="table-of-contents__link">Objective-C++</a><ul><li><a href="#å †å’Œæ ˆ" class="table-of-contents__link">å †å’Œæ ˆ</a></li></ul></li><li><a href="#æºç " class="table-of-contents__link">æºç </a></li><li><a href="#å¹¶å‘ç¼–ç¨‹" class="table-of-contents__link">å¹¶å‘ç¼–ç¨‹</a></li><li><a href="#æšä¸¾" class="table-of-contents__link">æšä¸¾</a></li><li><a href="#è¯»ä¹¦ç¬”è®°" class="table-of-contents__link">è¯»ä¹¦ç¬”è®°</a></li><li><a href="#aspectsé¢å‘åˆ‡é¢ç¼–ç¨‹" class="table-of-contents__link">Aspectsé¢å‘åˆ‡é¢ç¼–ç¨‹</a></li><li><a href="#runtime-1" class="table-of-contents__link">runtime</a><ul><li><a href="#ç±»å‹ç¼–ç " class="table-of-contents__link">ç±»å‹ç¼–ç </a></li><li><a href="#method-swizzling" class="table-of-contents__link">Method-Swizzling</a></li></ul></li><li><a href="#arc" class="table-of-contents__link">ARC</a></li><li><a href="#æºç -1" class="table-of-contents__link">æºç </a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.65a50636.js"></script>
<script src="/runtime~main.b175e2de.js"></script>
<script src="/main.777b260c.js"></script>
<script src="/1.5f7a006f.js"></script>
<script src="/260.fc337f83.js"></script>
<script src="/261.cd474b1f.js"></script>
<script src="/935f2afb.42cf00cb.js"></script>
<script src="/259.fa9b4b3b.js"></script>
<script src="/8880a44b.9593ef91.js"></script>
</body>
</html>