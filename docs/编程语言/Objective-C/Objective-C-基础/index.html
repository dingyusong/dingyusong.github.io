<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Blog Atom Feed"><title data-react-helmet="true">Objective-C-基础 | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Objective-C-基础 | My Site"><meta data-react-helmet="true" name="description" content="title: Objective-C"><meta data-react-helmet="true" property="og:description" content="title: Objective-C"><meta data-react-helmet="true" property="og:url" content="http://localhost:9999//docs/编程语言/Objective-C/Objective-C-基础"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://localhost:9999//docs/编程语言/Objective-C/Objective-C-基础"><link rel="stylesheet" href="/styles.8cfbcdec.css">
<link rel="preload" href="/styles.aaa24a49.js" as="script">
<link rel="preload" href="/runtime~main.7eeb3d64.js" as="script">
<link rel="preload" href="/main.7a041c89.js" as="script">
<link rel="preload" href="/1.62b3ea65.js" as="script">
<link rel="preload" href="/257.bb7ed37e.js" as="script">
<link rel="preload" href="/258.ed1b30f8.js" as="script">
<link rel="preload" href="/935f2afb.55f5968c.js" as="script">
<link rel="preload" href="/256.a7530d90.js" as="script">
<link rel="preload" href="/d44fe28d.4951b4b5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a><a class="navbar__item navbar__link" href="/docs/">编程基础</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/编程语言/编程语言">编程语言</a><a class="navbar__item navbar__link" href="/docs/工具/常用工具">工具</a><a class="navbar__item navbar__link" href="/docs/应用开发/应用开发">应用开发</a><a class="navbar__item navbar__link" href="/docs/Apple/iOS开发/iOS开发">Apple</a><a class="navbar__item navbar__link" href="/docs/音视频/音视频">音视频</a><a class="navbar__item navbar__link" href="/docs/项目/项目">项目</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">编程基础</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/编程语言/编程语言">编程语言</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/工具/常用工具">工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/应用开发/应用开发">应用开发</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Apple/iOS开发/iOS开发">Apple</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/音视频">音视频</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/项目/项目">项目</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Objective-C-基础</h1></header><div class="markdown"><p>title: Objective-C
toc: true
categories: [iOS]
tags: [Objective-C]
date: 2018-07-02 16:13:52</p><hr><p>[toc]</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="数据类型"></a>数据类型<a class="hash-link" href="#数据类型" title="Direct link to heading">#</a></h2><p><a href="https://developer.apple.com/documentation/objectivec/objective-c_data_types?language=objc" target="_blank" rel="noopener noreferrer">objective-c_data_types</a></p><p>常量和变量。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="基础数据类型"></a>基础数据类型<a class="hash-link" href="#基础数据类型" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="objective-c对象"></a>Objective-C对象<a class="hash-link" href="#objective-c对象" title="Direct link to heading">#</a></h3><p>基础数据类型和OC对象的区别。</p><ul><li>NSString</li></ul><p><code>For NSInteger you should use %td or %tu for NSUInteger</code></p><p><a href="https://stackoverflow.com/questions/28291856/format-specifies-type-unsigned-long-but-the-argument-has-type-int" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/28291856/format-specifies-type-unsigned-long-but-the-argument-has-type-int</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="命名规则"></a>命名规则<a class="hash-link" href="#命名规则" title="Direct link to heading">#</a></h2><p>标识符也叫变量名命名规则：</p><p>字母，数字，下划线，数字不能为开头。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="变量的声明和赋值"></a>变量的声明和赋值<a class="hash-link" href="#变量的声明和赋值" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="变量声明"></a>变量声明<a class="hash-link" href="#变量声明" title="Direct link to heading">#</a></h3><p><code>变量类型</code> <code>变量名</code>; 或者<code>变量类型</code> <code>变量名</code> = <code>变量值</code>;</p><p>例如：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSString *name;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>声明的同时可以赋值。</p><p>例如：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSString *name = @&quot;丁玉松&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="运算符"></a>运算符<a class="hash-link" href="#运算符" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="赋值运算符"></a>赋值运算符<a class="hash-link" href="#赋值运算符" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="逻辑运算符"></a>逻辑运算符<a class="hash-link" href="#逻辑运算符" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="算数运算符"></a>算数运算符<a class="hash-link" href="#算数运算符" title="Direct link to heading">#</a></h2><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="语句"></a>语句<a class="hash-link" href="#语句" title="Direct link to heading">#</a></h1><p>OC的语句必须以 <code>;</code> 分号结束。</p><p>语句块用大括号 <code>{}</code>包括。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="流程控制"></a>流程控制<a class="hash-link" href="#流程控制" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="顺序语句"></a>顺序语句<a class="hash-link" href="#顺序语句" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="条件语句"></a>条件语句<a class="hash-link" href="#条件语句" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="循环语句"></a>循环语句<a class="hash-link" href="#循环语句" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="注释"></a>注释<a class="hash-link" href="#注释" title="Direct link to heading">#</a></h3><p>单行:<code>//注释内容</code></p><p>多行:<code>/* 注释内容 */</code></p><p>下面也可以作为大段注释。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#if 0 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//中间的code完全被编译器忽略</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#end if </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="函数"></a>函数<a class="hash-link" href="#函数" title="Direct link to heading">#</a></h1><p>内存语义 (  返回值类型 )  函数名:(参数类型)参数名... { 函数体 }</p><p>例如：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Override point for customization after application launch.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return YES;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- (void)viewDidLoad {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [super viewDidLoad];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>内存语义：</p><p><code>+</code> 类方法（存储在元类对象-Meta-Class内）</p><p><code>-</code>示例方法（存储在类对象-Class内）</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="参数"></a>参数<a class="hash-link" href="#参数" title="Direct link to heading">#</a></h2><p>参数可以有0个或多个。</p><ul><li>可变参数</li></ul><p>一个函数拥有个数不定的参数。</p><p>常见的：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">FOUNDATION_EXPORT void NSLog(NSString *format, ...) NS_FORMAT_FUNCTION(1,2) NS_NO_TAIL_CALL;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">- (instancetype)initWithTitle:(nullable NSString *)title message:(nullable NSString *)message delegate:(nullable id /*&lt;UIAlertViewDelegate&gt;*/)delegate cancelButtonTitle:(nullable NSString *)cancelButtonTitle otherButtonTitles:(nullable NSString *)otherButtonTitles, ... NS_REQUIRES_NIL_TERMINATION NS_EXTENSION_UNAVAILABLE_IOS(&quot;Use UIAlertController instead.&quot;);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="返回值"></a>返回值<a class="hash-link" href="#返回值" title="Direct link to heading">#</a></h2><p>return 结束函数。</p><p>返回值是void，不必return。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="aspects面向切面编程"></a>Aspects面向切面编程<a class="hash-link" href="#aspects面向切面编程" title="Direct link to heading">#</a></h2><p>iOS AOP框架Aspects实现原理</p><p>Aspect是什么？</p><p>A delightful, simple library for aspect oriented programming by @steipete.</p><p>一个轻量级的，OC的面向切面编程库。</p><p>能干什么？</p><p>允许你在每一个类和实例方法中加入任何代码。可以在方法执行之前或者之后执行,也可以替换掉原有的方法。</p><p>参考文档</p><ul><li><a href="https://github.com/steipete/Aspects" target="_blank" rel="noopener noreferrer">https://github.com/steipete/Aspects</a></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="block"></a>block<a class="hash-link" href="#block" title="Direct link to heading">#</a></h1><p>Block 可以像 Objective-C 对象一样，用于赋值，当做参数传递，放入 NSArray 和 NSDictionary 中，也可以想一个函数一样执行，认为是一种匿名函数。和JS的函数有点像。JS的函数也是一个对象，所以函数也可以像变量一样赋值，传递等。自然这个&quot;变量也&quot;可以执行。</p><p>Demo： <a href="https://github.com/DingYusong/BlockDemo" target="_blank" rel="noopener noreferrer">https://github.com/DingYusong/BlockDemo</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="block的使用"></a>Block的使用<a class="hash-link" href="#block的使用" title="Direct link to heading">#</a></h2><p>理解：</p><p>指针不带执行体，实体带执行体。如下：blockName是一个Block指针，它属于变量名。脱字符^和变量名在一个符号内。变量值，也可以理解为执行体则带大括号，脱字符^在返回值前面，不在括号内,在最前面。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    void (^blockName)(void) = ^void{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        NSLog(@&quot;block running&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [self executeBlock:blockName];</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>认清：</p><ol><li>类名   <code>returnType (^)(parameterTypes)</code></li><li>变量名  <code>blockName</code>  </li><li>变量值  <code>^returnType (parameters) {...}</code> 其中返回值和参数类型为void可以不写。</li></ol><p>可以将脱字符^ 理解为*。</p><p><code>NSInteger (^add)(NSInteger, NSInteger)</code> 相当于 <code>DYSDog *dog</code></p><p>分拆一下：</p><p><code>NSInteger ()(NSInteger, NSInteger)</code>相当于 <code>DYSDog</code></p><p><code>^</code>相当于<code>*</code></p><p><code>add</code>相当于<code>dog</code></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    DYSDog *dog = [DYSDog new];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    NSInteger (^add)(NSInteger, NSInteger) = ^NSInteger(NSInteger a, NSInteger b) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return a+b;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p> Block的语法</p><p> returnType (^blockName)(parameterTypes) 相当于 变量类型 变量名;//也就是变量的声明</p><p> returnType (^)(parameterTypes) = 变量类型;//也就是类</p><p> blockName = 变量名;</p><p> ^returnType (parameters) {...} = 变量值；</p><p> 举例：</p><p> NSInteger (^add)(NSInteger, NSInteger) = DYSDog *dog;</p><p> 变量类型： NSInteger (^)(NSInteger, NSInteger) = DYSDog *;</p><p> 变量名： add = dog;</p><p> 变量值： ^NSInteger(NSInteger a, NSInteger b) {return a+b;} = [DYSDog new];</p><p> typedef NSInteger(^blockNameAdd)(NSInteger, NSInteger) = typedef long NSInteger;</p><p> blockNameAdd 这个类型相当于 NSInteger (^)(NSInteger, NSInteger)。</p><p> blockNameAdd 类比于 DYSDog *。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="局部变量"></a>局部变量<a class="hash-link" href="#局部变量" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">returnType (^blockName)(parameterTypes) = ^returnType(parameters) {...};</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    //</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    void (^btnClick)() = ^void() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if (self.ningboModel.inUrl &amp;&amp; self.ningboModel.inUrl.length &gt; 0) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            YYIWebViewController *vc = [[YYIWebViewController alloc] init];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            vc.urlString = self.ningboModel.inUrl;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            vc.hidesBottomBarWhenPushed = YES;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [self.navigationController pushViewController:vc animated:YES];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        else {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            UIAlertView *alert = [[CVGAlertView alloc] initWithTitle:@&quot;入金提示&quot; message:self.ningboModel.inDesc delegate:self cancelButtonTitle:@&quot;知道了&quot; otherButtonTitles:nil, nil];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            [alert show];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    view.btnClick = btnClick;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="属性"></a>属性<a class="hash-link" href="#属性" title="Direct link to heading">#</a></h3><p>名字不能省略</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@property (nonatomic, copy, nullability) returnType (^blockName)(parameterTypes);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><img src="http://wiso.liwenhui520.com/20190306155186613470204.png" alt="20190306155186613470204.png"></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@property (nonatomic, copy) void (^btnClick)();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@property (nonatomic, copy) NSString *name;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//void (^btnClick)() 相当于 NSString *name; 变量声明。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//btnClick 相当于 name ：变量名</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="函数形参"></a>函数形参<a class="hash-link" href="#函数形参" title="Direct link to heading">#</a></h3><p>方法定义</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">- (void)someMethodThatTakesABlock:(returnType (^nullability)(parameterTypes))blockName;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="函数实参"></a>函数实参<a class="hash-link" href="#函数实参" title="Direct link to heading">#</a></h3><p>方法执行</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[someObject someMethodThatTakesABlock:^returnType (parameters) {...}];</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    void (^blockName)(void) = ^{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        NSLog(@&quot;block running&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [self executeBlock:blockName];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-(void)executeBlock:(void(^)(void))completion{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    self.tmpBlock = completion;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    self.tmpBlock();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="typedef"></a>typedef<a class="hash-link" href="#typedef" title="Direct link to heading">#</a></h3><p>而typedef 又将其变量化：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef returnType (^TypeName)(parameterTypes);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TypeName blockName = ^returnType(parameters) {...};</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="block执行"></a>block执行<a class="hash-link" href="#block执行" title="Direct link to heading">#</a></h3><p>执行前前要进行判空，防止crash</p><p>作为函数使用：</p><p>block执行前要进行判空。否则会crash。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">            if (self.btnClick) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                self.btnClick();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="block的内存管理"></a>Block的内存管理<a class="hash-link" href="#block的内存管理" title="Direct link to heading">#</a></h2><p><a href="/docs/编程语言/Objective-C/Objective-C/内存管理.md#Block%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86">Block的内存管理</a></p><p>参考文档</p><ul><li>禅与Objective-C编程艺术的Block章节</li><li><a href="https://blog.csdn.net/xgb742951920/article/details/69258372" target="_blank" rel="noopener noreferrer">iOS中block的详解weakSelf、strongSelf</a></li><li><a href="https://hit-alibaba.github.io/interview/iOS/ObjC-Basic/Block.html" target="_blank" rel="noopener noreferrer">https://hit-alibaba.github.io/interview/iOS/ObjC-Basic/Block.html</a></li><li><a href="http://fuckingblocksyntax.com/" target="_blank" rel="noopener noreferrer">http://fuckingblocksyntax.com/</a></li><li><a href="http://goshdarnblocksyntax.com" target="_blank" rel="noopener noreferrer">http://goshdarnblocksyntax.com</a></li><li><a href="http://blog.csdn.net/totogo2010/article/details/7839061" target="_blank" rel="noopener noreferrer">bjective-C语法之代码块(block)的使用</a></li><li><a href="http://blog.sina.com.cn/s/blog_b0c5954101017zfr.html" target="_blank" rel="noopener noreferrer">关于block（二）</a></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="idnsobjectselfclass"></a>id,NSObject,self,Class<a class="hash-link" href="#idnsobjectselfclass" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="id和nsobject"></a>id和NSObject<a class="hash-link" href="#id和nsobject" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="nsobject"></a>NSObject<a class="hash-link" href="#nsobject" title="Direct link to heading">#</a></h2><ol><li><p>OC基类。</p></li><li><p>NSObject继承NSObject协议。</p></li><li><p>NSObject对象有一个isa的成员变量，指向Class(objc_class 结构体指针)</p></li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@interface NSObject &lt;NSObject&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#pragma clang diagnostic push</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#pragma clang diagnostic ignored &quot;-Wobjc-interface-ivars&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Class isa  OBJC_ISA_AVAILABILITY;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#pragma clang diagnostic pop</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef struct objc_class *Class;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="id"></a>id<a class="hash-link" href="#id" title="Direct link to heading">#</a></h2><ol><li>本质是 objc_object 结构体指针</li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/// Represents an instance of a class.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct objc_object {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Class _Nonnull isa  OBJC_ISA_AVAILABILITY;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/// A pointer to an instance of a class.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef struct objc_object *id;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ol start="2"><li>objc_object 结构体 有一个名为isa的 指向Class(objc_class 结构体指针)。</li></ol><p>id 简单地申明了指向对象的指针，没有给编译器任何类型信息，因此，编译器不会做类型检查。但也因为是这样，你可以发送任何信息给id类型的对象。这就是为什么+alloc返回id类型，但调用[[Foo alloc] init]不会产生编译错误。</p><p>因此，<strong>id类型是运行时的动态类型</strong>，编译器无法知道它的真实类型，即使你发送一个id类型没有的方法，也不会产生编译警告。</p><p>NSObject 相当于 objc_object。</p><p>id  相当于  NSObject * 。</p><p>那id  是不是就是NSObject对象指针？。</p><p>id 不一定指向NSObject对象，id指向的是objc_object 结构体。</p><p><code>id&lt;NSObject&gt;</code> 指向继承<code>&lt;NSObject&gt;</code>协议的对象，注意不是NSObject对象，虽然，NSObject对象也继承NSObject协议。NSObject只能算是他的一个子集。例如NSProxy 也继承 NSObject对象。</p><p>区别：</p><p>一个是OC类，一个是结构体指针。</p><p>指向拥有NSObject方法对象的指针</p><p><code>id&lt;NSObject&gt;</code></p><p> 这点延伸到了协议和代理的协议。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">id告诉编译器，你不关心对象是什么类型，但它必须遵守NSObject协议(protocol)，编译器就能保证所有赋值给id类型的对象都遵守NSObject协议(protocol)。这样的指针可以指向任何NSObject对象，因为NSObject对象遵守NSObject协议(protocol)，而且，它也可以用来保存NSProxy对象，因为它也遵守NSObject协议(protocol)。这是非常强大，方便且灵活，你不用关心对象是什么类型，而只关心它实现了哪些方法。</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>如果真的需要编译器检查，那你就考虑使用第2种或者第3种。很少看到NSObject＊能正常运行，但id无法正常运行的。使用协议(protocol)的优点是，它能指向NSProxy对象，而更常用的情况是，你只想知道某个对象遵守了哪个协议，而不用关心它是什么类型。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">补充：使用id&lt;NSObject&gt;来声明一个对象，相当于告诉编译我们并不知道这个对象的类型，但是它实现NSObject protocol。一个这种类型的指针，即可以用来指向NSObject*对象，也可以用来指向NSProxy*对象，因为NSObject对象与NSProxy对象都是现了NSObject protocol</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>相同点：</p><p>NSObject 和 id 都有一个isa成员变量。指向Class(objc_class 结构体指针)。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="self"></a>self<a class="hash-link" href="#self" title="Direct link to heading">#</a></h2><p>　　1&gt; self 是 OC 提供保留字；</p><p>　　2&gt; self 代表着当前方法的调用者；</p><p>　　3&gt; 在 - 方法中，self代表着&quot;对象&quot;；</p><p>　　4&gt; 在 + 方法中，self代表着&quot;类&quot;；</p><p>　　5&gt; self 是方法的隐藏的参数变量，指向当前调用方法的对象，另一个隐藏参数是 _cmd，代表当前类方法的selector。</p><p><a href="https://www.cnblogs.com/markstray/p/5611878.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/markstray/p/5611878.html</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="class"></a>Class<a class="hash-link" href="#class" title="Direct link to heading">#</a></h2><p>其实OC中Class也是对象 ，我们可以看看他们三个（<code>id</code> , <code>Class</code>,<code>NSObject *</code>）在runtime中的定义</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Class其实是 结构体 objc_class * 的指针 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef struct objc_class *Class;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// id其实是 结构体 objc_object * 的指针 别名</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef struct objc_object *id;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//OC的基类 NSObject 的声明 - 可以理解为其实可以看做是首地址为指向  objc_class *  （Isa）指针的内存 都可以看做是对象</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@interface NSObject &lt;NSObject&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     Class isa  OBJC_ISA_AVAILABILITY;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct objc_object {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">private:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    isa_t isa;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct objc_class : objc_object {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Class ISA;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Class superclass;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    cache_t cache;             // formerly cache pointer and vtable</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    class_data_bits_t bits;    // class_rw_t * plus custom rr/alloc flags</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>通过上面的源码我盟可以总结出几点：</p><ul><li><p>Class其实是 结构体 objc_class * 的指针 别名</p></li><li><p>id其实是 结构体 objc_object * 的指针 别名</p></li><li><p>结构体<code>objc_object</code>与OC中的 <code>NSObject</code> 的首地址都是指向 <code>isa</code> ，可以理解为首地址为<code>ISA</code>指针的内存都可以称为对象。</p></li><li><p><code>objc_class</code> 是继承自 <code>objc_object</code> ，也就是说，OC中 <code>Class</code> 也是一个对象。因此框架中无论是<code>hook</code>的实例方法还是<code>hook</code>的类方法，都可以统一把 调用的对象（ <code>Class</code> 或   <code>NSObject *</code> ） 传参 给了<code>id</code> 类型。</p></li><li></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="objc"></a>objc<a class="hash-link" href="#objc" title="Direct link to heading">#</a></h1><p>源码分析：见源码</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="runtime"></a>runtime<a class="hash-link" href="#runtime" title="Direct link to heading">#</a></h2><p>什么是runtime？</p><p>简单的来说，就是一组C语言函数。我们用OC语言写的代码，在运行时会调用那组C语言函数。</p><p>Objective-C中的方法调用，会被编译器转化为<code>objc_msgSend(receiver, selector)</code>方法。</p><p>ObjC 中消息的发送</p><ol><li>缓存命中</li><li>查找当前类的缓存及方法</li><li>查找父类的缓存及方法</li><li>方法决议</li><li>消息转发</li></ol><p>下面的代码输出什么？</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">`@implementation Son : Father``- (id)init``{``    ``self = [``super` `init];``    ``if` `(self)``    ``{``        ``NSLog(@``&quot;%@&quot;``, NSStringFromClass([self class]));``        ``NSLog(@``&quot;%@&quot;``, NSStringFromClass([``super` `class]));``    ``}``    ``return` `self;``}``@end`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>答案：都输出 Son</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">`2014-11-05 11:06:18.060 Test[8566:568584] NSStringFromClass([self class]) = Son``2014-11-05 11:06:18.061 Test[8566:568584] NSStringFromClass([``super` `class]) = Son`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>解惑：这个题目主要是考察关于objc中对 self 和 super 的理解。</p><p>参考文档</p><ul><li><a href="http://www.cocoachina.com/ios/20141224/10740.html" target="_blank" rel="noopener noreferrer">刨根问底Objective－C Runtime</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="类型编码"></a>类型编码<a class="hash-link" href="#类型编码" title="Direct link to heading">#</a></h3><p>Objective-C 类型编码</p><p>&quot;返回值类型 + id(@) + sel(:) + [参数类型]&quot;</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;v@:@&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p> 前3个是必须写的。</p><p><a href="https://nshipster.cn/type-encodings/" target="_blank" rel="noopener noreferrer">https://nshipster.cn/type-encodings/</a></p><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html</a></p><p>例如：</p><p>添加一个c方法，需要指明<code>id self, SEL _cmd</code>两个参数</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">void startEngine(id self, SEL _cmd, NSString *brand) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    NSLog(@&quot;my %@ car starts the engine&quot;, brand);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@implementation Car (myCar)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+ (BOOL)resolveInstanceMethod:(SEL)sel {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (sel == @selector(drive)) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        class_addMethod([self class], sel, (IMP)startEngine, &quot;v@:@&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return YES;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return [super resolveInstanceMethod:sel];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>添加一个oc方法，不需要指明<code>id self, SEL _cmd</code>两个参数</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">@implementation Car (myCar)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+ (BOOL)resolveInstanceMethod:(SEL)sel {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if (sel == @selector(drive)) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        class_addMethod([self class], sel, class_getMethodImplementation(self, @selector(startEngine:)), &quot;s@:@&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        return YES;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return [super resolveInstanceMethod:sel];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- (void)startEngine:(NSString *)brand {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    NSLog(@&quot;my %@ car starts the engine&quot;, brand);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">｝</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/// @return A token which allows to later deregister the aspect.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- (id&lt;AspectToken&gt;)aspect_hookSelector:(SEL)selector</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      withOptions:(AspectOptions)options</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                       usingBlock:(id)block</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            error:(NSError **)error {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return aspect_add(self, selector, options, block, error);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="method-swizzling"></a>Method-Swizzling<a class="hash-link" href="#method-swizzling" title="Direct link to heading">#</a></h3><p>想在系统方法上统一处理。但是避免每一个类都做同样的事情。这类需求可以使用Method-Swizzling来实现。</p><p>我们知道类在内存里维护这一张表，这张表是selector到imp实现的map表。而runtime给我提供了相当丰富的操作method的接口，这就为方法的灵活处理提供了大大的方便。</p><p>利用runtime里面方法的替换，可以做很多事情，比如一些数组越界。我们可以在底层将objectAtIndex 的imp指针指向我们自己写的安全的方法safeObjectAtIndex的实现。</p><p>再比如，监听dealloc的释放。</p><p>unrecognized selector sent to class  崩溃的处理。增强健壮性。</p><p>补个Demo。</p><p>参考文档</p><ul><li><a href="https://blog.csdn.net/erice_e/article/details/73293905" target="_blank" rel="noopener noreferrer">method-swizzling 详解 和使用</a></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="autoreleasepool"></a>autoreleasepool<a class="hash-link" href="#autoreleasepool" title="Direct link to heading">#</a></h1><p><a href="https://draveness.me/autoreleasepool" target="_blank" rel="noopener noreferrer">https://draveness.me/autoreleasepool</a></p><p>参考文档</p><ul><li><a href="https://draveness.me/autoreleasepool" target="_blank" rel="noopener noreferrer">自动释放池的前世今生 ---- 深入解析 autoreleasepool</a></li></ul><p>autoreleasepool 以一个队列数组的形式实现,主要通过下列三个函数完成.</p><ol><li><code>objc_autoreleasepoolPush</code></li><li><code>objc_autoreleasepoolPop</code></li><li><code>objc_autorelease</code></li></ol><p>看函数名就可以知道，对 autorelease 分别执行 push，和 pop 操作。销毁对象时执行release操作。</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="课后问题"></a>课后问题<a class="hash-link" href="#课后问题" title="Direct link to heading">#</a></h1><p>问题？</p><ol><li>Objective-C的类可以多重继承么？可以实现多个接口么？Category是什么？重写一个类的方法用继承好还是分类好？为什么？</li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Objective-C的类不可以多重继承；可以使用协议实现多个接口，通过实现多个接口可以完成C++的多重继承；Category是类别。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">用继承。因为不能用分类。分类覆盖掉原有类的方法，导致程序中其他调用的地方会改变。当然，如果是我来的话，我也不会用继承，而是新增一个方法，可以放到类别中。</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ol start="2"><li>import 跟#include 又什么区别，@class呢, <code>#import&lt;&gt;</code> 跟 #import&quot;&quot;又什么区别?</li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">1.import和include 的使用环境不同。一个是OC一个是C/C++。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2.import和include 的导入文件处理上不同。无论import多少次，import只会导入一次，include却没有这个处理。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">3. @class主要作用是在头文件的相互包含问题时，在接口@interface中告诉编译器有这么个类，我使用，你别报错。而在实现@implementation文件中要使用相应类的接口，还是需要import引入相应的类</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>3.属性readwrite，readonly，assign，retain，copy，nonatomic 各是什么作用，在那种情况下用?</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">属性修饰符</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1.读写性 readwrite，readonly  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">当为readonly时，只会生成getter方法 不会生成setter方法 ，也就是不希望属性在类外被改变</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2.原子性 nonatomic，atomic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">决定编译器生成的setter getter是否是原子操作，atomic表示多线程安全，一般使用nonatomic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">3.内存管理特性 assign，copy，strong， weak</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">赋值，持有。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">引用计数增加了没有，是否新开辟了内存。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ol start="4"><li>写一个setter方法用于完成<code>@property (nonatomic,retain)NSString *name</code>,写一个setter方法用于完成<code>@property(nonatomic，copy)NSString *name</code></li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">- (void) setName:(NSString*) name {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [name retain];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [_name release];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    _name = name;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- (void)setName:(NSString *)name {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    id t = [str copy];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [_name release];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    _name = t;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ol start="5"><li>对于语句NSString*obj = [[NSData alloc] init]; obj在编译时和运行时分别时什么类型的对象?</li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">编译时是NSString的类型;运行时是NSData类型的对象</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ol start="6"><li>常见的object-c的数据类型有那些， 和C的基本数据类型有什么区别?如：NSInteger和int</li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">object-c的数据类型有NSString，NSNumber，NSArray，NSMutableArray，NSData等等，这些都是class，创建后便是对象，而C语言的基本数据类型int，只是一定字节的内存空间，用于存放数值;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSInteger是基本数据类型，并不是NSNumber的子类，当然也不是NSObject的子类。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSInteger是基本数据类型Int或者Long的别名(NSInteger的定义typedef long NSInteger)，它的区别在于，NSInteger会根据系统是32位还是64位来决定是本身是int还是Long。</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ol start="7"><li>id和NSObject *和instanceType的区别与联系？</li></ol><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/// A pointer to an instance of a class.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef struct objc_object *id;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">/// Represents an instance of a class.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct objc_object {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Class _Nonnull isa  OBJC_ISA_AVAILABILITY;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">@interface NSObject &lt;NSObject&gt; {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#pragma clang diagnostic push</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#pragma clang diagnostic ignored &quot;-Wobjc-interface-ivars&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Class isa  OBJC_ISA_AVAILABILITY;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">#pragma clang diagnostic pop</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>instanceType 就是实例类型，而非泛指。例如：</p><p>例子:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSString *str = [Person person];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSLog(@&quot;%lu&quot;, str.length);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>对于以上代码,如果</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[Person person]返回值为id类型,则在编辑代码时xcode不会报错或者警告,运行时则会崩溃(因为OC是动态检测对象的真实类型);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">反之,当其返回值为instanceType时,xcode则会报出警告.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">所以,建议写类的方法时,对于返回值,如果是id类型的话,尽量使用instanceType.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="语法糖"></a>语法糖<a class="hash-link" href="#语法糖" title="Direct link to heading">#</a></h1><p>语法糖这个东西在JavaScript比较常见，各种奇怪的语法，让人眼花缭乱。其作用主要是简化了一些常见语句的写法。比如 实例化一个数组 <code>@[]</code>， 这种写法要比原来刀耕火种的那种原始写法优化不少。<code>Object Literals</code>也算是语法糖的一部分，那么Objective-C中的语法糖究竟有哪些呢？</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="变量"></a>变量<a class="hash-link" href="#变量" title="Direct link to heading">#</a></h2><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 整数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSNumber *fortyTwo = @42;             // 等价于 [NSNumber numberWithInt:42]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSNumber *fortyTwoUnsigned = @42U;    // 等价于 [NSNumber numberWithUnsignedInt:42U]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSNumber *fortyTwoLong = @42L;        // 等价于 [NSNumber numberWithLong:42L]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSNumber *fortyTwoLongLong = @42LL;   // 等价于 [NSNumber numberWithLongLong:42LL]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 浮点数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSNumber *piFloat = @3.141592654F;    // 等价于 [NSNumber numberWithFloat:3.141592654F]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSNumber *piDouble = @3.1415926535;   // 等价于 [NSNumber numberWithDouble:3.1415926535]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 布尔值</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSNumber *yesNumber = @YES;           // 等价于 [NSNumber numberWithBool:YES]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSNumber *noNumber = @NO;             // 等价于 [NSNumber numberWithBool:NO]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 数组</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSArray * array = @[];                // 等价于 [NSArray array]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 字典</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSDictionary * dict = @{};            // 等价于 [NSDictionary dictionary]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="方法"></a>方法<a class="hash-link" href="#方法" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="点语法"></a>点语法<a class="hash-link" href="#点语法" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">people.name = @&quot;丁珰&quot;;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>相当于：set方法</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[people setName: @&quot;丁珰&quot;];</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSString *name = people.name;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>相当于：get方法</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">NSString *name = [people name];</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>参考文档</p><ul><li><a href="http://clang.llvm.org/docs/ObjectiveCLiterals.html" target="_blank" rel="noopener noreferrer">http://clang.llvm.org/docs/ObjectiveCLiterals.html</a></li></ul><h2>@</h2><p>关于OC中的@字符。Object Literals</p><p><a href="https://nshipster.com/at-compiler-directives/" target="_blank" rel="noopener noreferrer">https://nshipster.com/at-compiler-directives/</a></p><p><a href="https://nshipster.cn/at-compiler-directives/" target="_blank" rel="noopener noreferrer">https://nshipster.cn/at-compiler-directives/</a></p><p><strong>Interfaces &amp; Implementation</strong></p><ul><li><code>@interface</code>…<code>@end</code></li><li><code>@implementation</code>…<code>@end</code></li><li><code>@class</code></li></ul><p><strong>Instance Variable Visibility</strong></p><ul><li><code>@public</code></li><li><code>@package</code></li><li><code>@protected</code></li><li><code>@private</code></li></ul><p><strong>Properties</strong></p><ul><li><code>@property</code></li><li><code>@synthesize</code></li><li><code>@dynamic</code></li></ul><p><strong>Protocols</strong></p><ul><li><code>@protocol</code></li><li><code>@required</code></li><li><code>@optional</code></li></ul><p><strong>Exception Handling</strong></p><ul><li><code>@try</code></li><li><code>@catch</code></li><li><code>@finally</code></li><li><code>@throw</code></li></ul><p><strong>Object Literals</strong></p><ul><li><code>@&quot;&quot;</code></li><li><code>@42</code>, <code>@3.14</code>, <code>@YES</code>, <code>@&#x27;Z&#x27;</code></li><li><code>@[]</code></li><li><code>@{}</code></li><li><code>@()</code></li></ul><p><strong>Objective-C Literals</strong></p><ul><li><code>@selector()</code></li><li><code>@protocol()</code></li></ul><p><strong>C Literals</strong></p><ul><li><code>@encode()</code></li><li><code>@defs()</code></li></ul><p><strong>Optimizations</strong></p><ul><li><code>@autoreleasepool{}</code></li><li><code>@synchronized{}</code></li></ul><p><strong>Compatibility</strong></p><ul><li><code>@compatibility_alias</code></li></ul><p>翻译：</p><p><strong>接口与实现</strong></p><ul><li><code>@interface</code>…<code>@end</code></li><li><code>@implementation</code>…<code>@end</code></li><li><code>@class</code></li></ul><p><strong>实例变量可视性</strong></p><ul><li><code>@public</code></li><li><code>@package</code></li><li><code>@protected</code></li><li><code>@private</code></li></ul><p><strong>属性</strong></p><ul><li><code>@property</code></li><li><code>@synthesize</code></li><li><code>@dynamic</code></li></ul><p><strong>协议</strong></p><ul><li><code>@protocol</code></li><li><code>@required</code></li><li><code>@optional</code></li></ul><p><strong>异常处理</strong></p><ul><li><code>@try</code></li><li><code>@catch</code></li><li><code>@finally</code></li><li><code>@throw</code></li></ul><p><strong>对象常量</strong></p><ul><li><code>@&quot;&quot;</code></li><li><code>@42</code>, <code>@3.14</code>, <code>@YES</code>, <code>@&#x27;Z&#x27;</code></li><li><code>@[]</code></li><li><code>@{}</code></li><li><code>@()</code></li></ul><p><strong>Objective-C 常量</strong></p><ul><li><code>@selector()</code></li><li><code>@protocol()</code></li></ul><p><strong>C 常量</strong></p><ul><li><code>@encode()</code></li><li><code>@defs()</code></li></ul><p><strong>优化</strong></p><ul><li><code>@autoreleasepool{}</code></li><li><code>@synchronized{}</code></li></ul><p><strong>兼容</strong></p><ul><li><code>@compatibility_alias</code></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="oc和js交互详解"></a>OC和JS交互详解<a class="hash-link" href="#oc和js交互详解" title="Direct link to heading">#</a></h2><p>Demo: <a href="https://gitee.com/dingyusong/OC_JSInteractionDemo" target="_blank" rel="noopener noreferrer">https://gitee.com/dingyusong/OC_JSInteractionDemo</a></p><p><a href="https://github.com/marcuswestin/WebViewJavascriptBridge" target="_blank" rel="noopener noreferrer">https://github.com/marcuswestin/WebViewJavascriptBridge</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="内存管理"></a>内存管理<a class="hash-link" href="#内存管理" title="Direct link to heading">#</a></h2><p><a href="/docs/编程语言/Objective-C/Objective-C/内存管理.md">内存管理</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="内存管理-1"></a>内存管理<a class="hash-link" href="#内存管理-1" title="Direct link to heading">#</a></h2><p><a href="https://stackoverflow.com/questions/10634436/how-to-know-if-object-address-is-0x0" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/10634436/how-to-know-if-object-address-is-0x0</a></p><p>0x0 nil 空指针</p><p>根对象 （一个APP的第一个对象，他持有别的对象，其他对象不持有他）</p><ul><li><p>macOS：NSApplication</p></li><li><p>iOS：UIApplication</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="堆和栈"></a>堆和栈<a class="hash-link" href="#堆和栈" title="Direct link to heading">#</a></h3><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW2" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW2</a></p><p>Objective-C 对象存储在堆上而不是栈上 why？：<a href="https://blog.csdn.net/LIN1986LIN/article/details/88292251" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/LIN1986LIN/article/details/88292251</a></p><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW2" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW2</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="源码"></a>源码<a class="hash-link" href="#源码" title="Direct link to heading">#</a></h2><p><a href="https://opensource.apple.com/tarballs/objc4/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/tarballs/objc4/</a></p><ul><li>NSObject(AutoreleasePool 的实现的源码，objc runtime的源码)</li></ul><p><a href="https://github.com/opensource-apple" target="_blank" rel="noopener noreferrer">https://github.com/opensource-apple</a></p><p><a href="https://opensource.apple.com/tarballs/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/tarballs/</a></p><p><a href="https://opensource.apple.com/source/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/source/</a></p><p>CoreFoundation: (包含CFRunloop和CFRuntime的源码等)</p><p><a href="https://opensource.apple.com/source/CF/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/source/CF/</a></p><p><a href="https://opensource.apple.com/tarballs/CF/" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/tarballs/CF/</a></p><p><a href="https://blog.ibireme.com/2015/05/18/runloop/" target="_blank" rel="noopener noreferrer">https://blog.ibireme.com/2015/05/18/runloop/</a></p><p>Swift的Foundation源码</p><p><a href="https://github.com/apple/swift-corelibs-foundation/" target="_blank" rel="noopener noreferrer">https://github.com/apple/swift-corelibs-foundation/</a></p><p>macOS-10.15源码</p><p><a href="https://opensource.apple.com/release/macos-1015.html" target="_blank" rel="noopener noreferrer">https://opensource.apple.com/release/macos-1015.html</a></p><p><a href="https://www.jianshu.com/p/2fae148f015f" target="_blank" rel="noopener noreferrer">iOS-底层原理 03：objc4-781 源码编译 &amp; 调试</a></p><ul><li>已经配置好的源码调试</li></ul><p><a href="https://github.com/LGCooci/objc4_debug" target="_blank" rel="noopener noreferrer">https://github.com/LGCooci/objc4_debug</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="枚举"></a>枚举<a class="hash-link" href="#枚举" title="Direct link to heading">#</a></h2><p><a href="https://juejin.cn/post/6844903794568855566" target="_blank" rel="noopener noreferrer">OC中枚举写法 以及 字符串类型枚举实现探索</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="读书笔记"></a>读书笔记<a class="hash-link" href="#读书笔记" title="Direct link to heading">#</a></h2><p>[Effective Objective-C 20 编写高质量iOS与OS X代码的52个有效方法.pdf](Objective-C/编写高质量iOS与OS X代码的52个有效方法.md)</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="内存管理-2"></a>内存管理<a class="hash-link" href="#内存管理-2" title="Direct link to heading">#</a></h2><p><a href="/docs/编程语言/Objective-C/Objective-C/内存管理.md">内存管理</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="堆和栈-1"></a>堆和栈<a class="hash-link" href="#堆和栈-1" title="Direct link to heading">#</a></h3><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW2" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW2</a></p><p>Objective-C 对象存储在堆上而不是栈上 why？：<a href="https://blog.csdn.net/LIN1986LIN/article/details/88292251" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/LIN1986LIN/article/details/88292251</a></p><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW2" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW2</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="异常处理"></a>异常处理<a class="hash-link" href="#异常处理" title="Direct link to heading">#</a></h2><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Exceptions/Exceptions.html" target="_blank" rel="noopener noreferrer">Exception Programming Topics</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ios程序的内存结构"></a>iOS程序的内存结构<a class="hash-link" href="#ios程序的内存结构" title="Direct link to heading">#</a></h3><p><a href="https://blog.csdn.net/u013480070/article/details/100154725" target="_blank" rel="noopener noreferrer">iOS程序的内存布局</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="编程规范"></a>编程规范<a class="hash-link" href="#编程规范" title="Direct link to heading">#</a></h2><p><a href="https://zh-google-styleguide.readthedocs.io/en/latest/google-objc-styleguide/" target="_blank" rel="noopener noreferrer">Google Objective-C Style Guide 中文版</a></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="参考文档"></a>参考文档<a class="hash-link" href="#参考文档" title="Direct link to heading">#</a></h1><ul><li><p><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html" target="_blank" rel="noopener noreferrer">ProgrammingWithObjectiveC</a></p></li><li><p><a href="http://wiki.jikexueyuan.com/project/programming-with-objective-c/" target="_blank" rel="noopener noreferrer">ProgrammingWithObjectiveC-中文版</a></p></li><li><p><a href="https://www.yiibai.com/objective_c" target="_blank" rel="noopener noreferrer">https://www.yiibai.com/objective_c</a></p></li><li><p>官方文档：</p><p><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html" target="_blank" rel="noopener noreferrer">https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html</a></p><p>PDF：</p><p><a href="http://cagt.bu.edu/w/images/b/b6/Objective-C_Programming_Language.pdf" target="_blank" rel="noopener noreferrer">http://cagt.bu.edu/w/images/b/b6/Objective-C_Programming_Language.pdf</a></p><p><a href="https://developer.apple.com/documentation/objectivec" target="_blank" rel="noopener noreferrer">https://developer.apple.com/documentation/objectivec</a></p></li></ul><p>底层文章</p><ul><li><a href="https://www.jianshu.com/p/ee6a8ebc5bec" target="_blank" rel="noopener noreferrer">iOS-底层原理 15：dyld发展史</a></li><li><a href="https://www.jianshu.com/p/2fae148f015f" target="_blank" rel="noopener noreferrer">iOS-底层原理 03：objc4-781 源码编译 &amp; 调试</a></li></ul><hr><p>原创文章，转载请保留原文链接，未经授权拒绝转载，谢谢。</p><p>联系作者：<a href="mailto:dys90@qq.com" target="_blank" rel="noopener noreferrer">dys90@qq.com</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="dys-typora-open://mine/survival/docs/编程语言/Objective-C/Objective-C-基础.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#数据类型" class="table-of-contents__link">数据类型</a><ul><li><a href="#基础数据类型" class="table-of-contents__link">基础数据类型</a></li><li><a href="#objective-c对象" class="table-of-contents__link">Objective-C对象</a></li></ul></li><li><a href="#命名规则" class="table-of-contents__link">命名规则</a></li><li><a href="#变量的声明和赋值" class="table-of-contents__link">变量的声明和赋值</a><ul><li><a href="#变量声明" class="table-of-contents__link">变量声明</a></li></ul></li><li><a href="#赋值运算符" class="table-of-contents__link">赋值运算符</a></li><li><a href="#逻辑运算符" class="table-of-contents__link">逻辑运算符</a></li><li><a href="#算数运算符" class="table-of-contents__link">算数运算符</a></li><li><a href="#流程控制" class="table-of-contents__link">流程控制</a><ul><li><a href="#顺序语句" class="table-of-contents__link">顺序语句</a></li><li><a href="#条件语句" class="table-of-contents__link">条件语句</a></li><li><a href="#循环语句" class="table-of-contents__link">循环语句</a></li><li><a href="#注释" class="table-of-contents__link">注释</a></li></ul></li><li><a href="#参数" class="table-of-contents__link">参数</a></li><li><a href="#返回值" class="table-of-contents__link">返回值</a></li><li><a href="#aspects面向切面编程" class="table-of-contents__link">Aspects面向切面编程</a></li><li><a href="#block的使用" class="table-of-contents__link">Block的使用</a><ul><li><a href="#局部变量" class="table-of-contents__link">局部变量</a></li><li><a href="#属性" class="table-of-contents__link">属性</a></li><li><a href="#函数形参" class="table-of-contents__link">函数形参</a></li><li><a href="#函数实参" class="table-of-contents__link">函数实参</a></li><li><a href="#typedef" class="table-of-contents__link">typedef</a></li><li><a href="#block执行" class="table-of-contents__link">block执行</a></li></ul></li><li><a href="#block的内存管理" class="table-of-contents__link">Block的内存管理</a></li><li><a href="#id和nsobject" class="table-of-contents__link">id和NSObject</a></li><li><a href="#nsobject" class="table-of-contents__link">NSObject</a></li><li><a href="#id" class="table-of-contents__link">id</a></li><li><a href="#self" class="table-of-contents__link">self</a></li><li><a href="#class" class="table-of-contents__link">Class</a></li><li><a href="#runtime" class="table-of-contents__link">runtime</a><ul><li><a href="#类型编码" class="table-of-contents__link">类型编码</a></li><li><a href="#method-swizzling" class="table-of-contents__link">Method-Swizzling</a></li></ul></li><li><a href="#变量" class="table-of-contents__link">变量</a></li><li><a href="#方法" class="table-of-contents__link">方法</a><ul><li><a href="#点语法" class="table-of-contents__link">点语法</a></li></ul></li><li><a href="#" class="table-of-contents__link">@</a></li><li><a href="#oc和js交互详解" class="table-of-contents__link">OC和JS交互详解</a></li><li><a href="#内存管理" class="table-of-contents__link">内存管理</a></li><li><a href="#内存管理-1" class="table-of-contents__link">内存管理</a><ul><li><a href="#堆和栈" class="table-of-contents__link">堆和栈</a></li></ul></li><li><a href="#源码" class="table-of-contents__link">源码</a></li><li><a href="#枚举" class="table-of-contents__link">枚举</a></li><li><a href="#读书笔记" class="table-of-contents__link">读书笔记</a></li><li><a href="#内存管理-2" class="table-of-contents__link">内存管理</a><ul><li><a href="#堆和栈-1" class="table-of-contents__link">堆和栈</a></li></ul></li><li><a href="#异常处理" class="table-of-contents__link">异常处理</a><ul><li><a href="#ios程序的内存结构" class="table-of-contents__link">iOS程序的内存结构</a></li></ul></li><li><a href="#编程规范" class="table-of-contents__link">编程规范</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.aaa24a49.js"></script>
<script src="/runtime~main.7eeb3d64.js"></script>
<script src="/main.7a041c89.js"></script>
<script src="/1.62b3ea65.js"></script>
<script src="/257.bb7ed37e.js"></script>
<script src="/258.ed1b30f8.js"></script>
<script src="/935f2afb.55f5968c.js"></script>
<script src="/256.a7530d90.js"></script>
<script src="/d44fe28d.4951b4b5.js"></script>
</body>
</html>