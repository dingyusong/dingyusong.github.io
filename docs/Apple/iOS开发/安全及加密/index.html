<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Blog Atom Feed"><title data-react-helmet="true">安全及加密 | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="安全及加密 | My Site"><meta data-react-helmet="true" name="description" content="安全及加密"><meta data-react-helmet="true" property="og:description" content="安全及加密"><meta data-react-helmet="true" property="og:url" content="http://localhost:9999//docs/Apple/iOS开发/安全及加密"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://localhost:9999//docs/Apple/iOS开发/安全及加密"><link rel="stylesheet" href="/styles.8cfbcdec.css">
<link rel="preload" href="/styles.9f2bd08d.js" as="script">
<link rel="preload" href="/runtime~main.b9916a1e.js" as="script">
<link rel="preload" href="/main.aad198f0.js" as="script">
<link rel="preload" href="/1.c6142e7c.js" as="script">
<link rel="preload" href="/259.bd219e04.js" as="script">
<link rel="preload" href="/260.8c75c7b8.js" as="script">
<link rel="preload" href="/935f2afb.b83995d3.js" as="script">
<link rel="preload" href="/258.77a3145c.js" as="script">
<link rel="preload" href="/8dea61b5.0d08dc87.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a><a class="navbar__item navbar__link" href="/docs/">基础</a><a class="navbar__item navbar__link" href="/docs/编程语言/编程语言">语言</a><a class="navbar__item navbar__link" href="/docs/工具/常用工具">工具</a><a class="navbar__item navbar__link" href="/docs/应用开发/应用开发">应用开发</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Apple/iOS开发/iOS开发">Apple</a><a class="navbar__item navbar__link" href="/docs/音视频/音视频">音视频</a><a class="navbar__item navbar__link" href="/docs/项目/项目">项目</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">基础</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/编程语言/编程语言">语言</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/工具/常用工具">工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/应用开发/应用开发">应用开发</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/Apple/iOS开发/iOS开发">Apple</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/音视频">音视频</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/项目/项目">项目</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">安全及加密</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="安全及加密"></a>安全及加密<a class="hash-link" href="#安全及加密" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="安全"></a>安全<a class="hash-link" href="#安全" title="Direct link to heading">#</a></h2><p>iOSapp安全方面有哪些注意事项呢？</p><p><strong>数据传输安全</strong></p><p>https证书认证</p><p><strong>本地存储安全</strong></p><p>本地存储加密</p><p>参考文档：</p><ul><li><a href="https://www.jianshu.com/p/b4230c726e61" target="_blank" rel="noopener noreferrer">iOS 安全性参考点</a></li></ul><ul><li>ios反汇编</li></ul><p><a href="https://wizardforcel.gitbooks.io/ios-sec-wiki/content/chapter3/issue3-8.html" target="_blank" rel="noopener noreferrer">https://wizardforcel.gitbooks.io/ios-sec-wiki/content/chapter3/issue3-8.html</a></p><p><a href="https://www.hopperapp.com/download.html" target="_blank" rel="noopener noreferrer">https://www.hopperapp.com/download.html</a></p><p><img alt="QQ20210317-103946" src="/assets/images/QQ20210317-103946-4c4135798ba364143616fe67ed1420c1.png"></p><p>104复习</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ats适配"></a>ATS适配<a class="hash-link" href="#ats适配" title="Direct link to heading">#</a></h2><p>我试过，仅仅是将http请求改成https请求，是不行的。
所以需要仔细了解ATS的具体内容。</p><p>查看一下
<a href="https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW33" target="_blank" rel="noopener noreferrer">ATS苹果官方文档</a>
其中有关于ATS的要求描述：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Requirements for Connecting Using ATS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">With App Transport Security (ATS) fully enabled, the system requires that your app’s HTTP connections use HTTPS and that they satisfy the following security requirements:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">* The X.509 digital server certificate must meet at least one of the following trust requirements:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Issued by a certificate authority (CA) whose root certificate is incorporated into the operating system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Issued by a trusted root CA and installed by the user or a system administrator</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">* The negotiated Transport Layer Security (TLS) version must be TLS 1.2. Attempts to connect without TLS/SSL protection, or with an older version of TLS/SSL, are denied by default.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">* The connection must use either the AES-128 or AES-256 symmetric cipher. The negotiated TLS connection cipher suite must support perfect forward secrecy (PFS) through Elliptic Curve Diffie-Hellman Ephemeral (ECDHE) key exchange, and must be one of the following:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">* The leaf server certificate must be signed with one of the following types of keys:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Rivest-Shamir-Adleman (RSA) key with a length of at least 2048 bits</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Elliptic-Curve Cryptography (ECC) key with a size of at least 256 bits</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">In addition, the leaf server certificate hashing algorithm must be Secure Hash Algorithm 2 (SHA-2) with a digest length, sometimes called a “fingerprint,” of at least 256 (that is, SHA-256 or greater).</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">The requirements listed in this section are current as of this document’s publication date, with stricter requirements possible in the future. Changes to these requirements will not break app binary compatibility.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>共有4个要求，我来解释一下：</p><p>1.你的证书必须是被系统信任的。有两种方式，1.你的证书的根证书是系统内置认证的（<a href="https://support.apple.com/zh-cn/HT205205" target="_blank" rel="noopener noreferrer">可以在这里查看</a>）。2.用户或管理员安装信任的（类似Charles抓包证书信任）。</p><p>怎么检查呢？用chrome打开你的网站，点击左边的小锁图标，查看证书信息，有根证书信息。然后复制根证书，到<a href="https://support.apple.com/zh-cn/HT205205" target="_blank" rel="noopener noreferrer">这里</a> 搜一下看看你的根证书颁发机构是否在其中。</p><p>参考文章：</p><ul><li><a href="http://www.jianshu.com/p/b15a9db9cc15" target="_blank" rel="noopener noreferrer">2017.1.1 就要到了，还没有准备好 iOS App Https 的亲们，开始颤抖吧～</a></li></ul><p><img alt="20190125154840312322243.png" src="/assets/images/20190125154840312322243-cc9d329d5d7fa3fec86eab07f4476661.png"></p><p><img alt="20190125154840308965102.png" src="/assets/images/20190125154840308965102-dcd9230946923d1370ea72df7bc223dc.png"></p><p><img alt="20190125154840313218122.png" src="/assets/images/20190125154840313218122-c38fe37954d82d4cc4120be10d9dfa40.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="关闭ats限制"></a>关闭ATS限制<a class="hash-link" href="#关闭ats限制" title="Direct link to heading">#</a></h3><p>参考：<a href="http://my.oschina.net/vimfung/blog/494687" target="_blank" rel="noopener noreferrer">关于iOS9中的App Transport Security相关说明及适配</a></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">OC_JSInteractionDemo[18705:1013218] App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app&#x27;s Info.plist file.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">直接关闭：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;dict&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;true/&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/dict&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h1></h1><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="添加出口合规证明"></a>添加出口合规证明<a class="hash-link" href="#添加出口合规证明" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">您的 App 是否设计使用了加密或含有整合加密功能？（即使您的 App 只使用了 iOS 或 OS X 提供的加密功能，也请选择“是”。）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">是</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">否</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">您有责任遵守出口条例，并且在您的加密或豁免状态变化时，必须重新查看这些问题。如果您的加密和豁免资格保持不变，请使用您的 Info.plist 中的以下键值对，以在构建版本中提供出口合规信息：</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &lt;key&gt;ITSAppUsesNonExemptEncryption&lt;/key&gt;&lt;false/&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="沙河目录"></a>沙河目录<a class="hash-link" href="#沙河目录" title="Direct link to heading">#</a></h2><p>iTunes在与iPhone同步时，备份所有的Documents和Library文件。
iPhone在重启时，会丢弃所有的tmp文件。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="网络权限"></a>网络权限<a class="hash-link" href="#网络权限" title="Direct link to heading">#</a></h2><p>检测用户是否关闭了网络权限，跳转到网络权限设置页面。</p><p><a href="https://github.com/ziecho/ZYNetworkAccessibity" target="_blank" rel="noopener noreferrer">https://github.com/ziecho/ZYNetworkAccessibity</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="逆向"></a><a href="/docs/Apple/iOS开发/逆向/iOS逆向.md">逆向</a><a class="hash-link" href="#逆向" title="Direct link to heading">#</a></h2></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="dys-typora-open://mine/survival/docs/Apple/iOS开发/安全及加密.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#安全" class="table-of-contents__link">安全</a></li><li><a href="#ats适配" class="table-of-contents__link">ATS适配</a><ul><li><a href="#关闭ats限制" class="table-of-contents__link">关闭ATS限制</a></li><li><a href="#添加出口合规证明" class="table-of-contents__link">添加出口合规证明</a></li></ul></li><li><a href="#沙河目录" class="table-of-contents__link">沙河目录</a></li><li><a href="#网络权限" class="table-of-contents__link">网络权限</a></li><li><a href="#逆向" class="table-of-contents__link">逆向</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.9f2bd08d.js"></script>
<script src="/runtime~main.b9916a1e.js"></script>
<script src="/main.aad198f0.js"></script>
<script src="/1.c6142e7c.js"></script>
<script src="/259.bd219e04.js"></script>
<script src="/260.8c75c7b8.js"></script>
<script src="/935f2afb.b83995d3.js"></script>
<script src="/258.77a3145c.js"></script>
<script src="/8dea61b5.0d08dc87.js"></script>
</body>
</html>