<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Blog Atom Feed"><title data-react-helmet="true">FFmpeg | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="FFmpeg | My Site"><meta data-react-helmet="true" name="description" content="FFMpeg"><meta data-react-helmet="true" property="og:description" content="FFMpeg"><meta data-react-helmet="true" property="og:url" content="http://localhost:9999//docs/音视频/学习资料/三方框架/FFMpeg/FFmpeg"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://localhost:9999//docs/音视频/学习资料/三方框架/FFMpeg/FFmpeg"><link rel="stylesheet" href="/styles.8cfbcdec.css">
<link rel="preload" href="/styles.65a50636.js" as="script">
<link rel="preload" href="/runtime~main.b175e2de.js" as="script">
<link rel="preload" href="/main.777b260c.js" as="script">
<link rel="preload" href="/1.5f7a006f.js" as="script">
<link rel="preload" href="/260.fc337f83.js" as="script">
<link rel="preload" href="/261.cd474b1f.js" as="script">
<link rel="preload" href="/935f2afb.42cf00cb.js" as="script">
<link rel="preload" href="/259.fa9b4b3b.js" as="script">
<link rel="preload" href="/ec34eea2.7ee08189.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a><a class="navbar__item navbar__link" href="/docs/">基础</a><a class="navbar__item navbar__link" href="/docs/编程语言/编程语言">语言</a><a class="navbar__item navbar__link" href="/docs/工具/常用工具">工具</a><a class="navbar__item navbar__link" href="/docs/应用开发/应用开发">应用开发</a><a class="navbar__item navbar__link" href="/docs/Apple/iOS开发/iOS开发">Apple</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/音视频/音视频">音视频</a><a class="navbar__item navbar__link" href="/docs/项目/项目">项目</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">基础</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/编程语言/编程语言">语言</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/工具/常用工具">工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/应用开发/应用开发">应用开发</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Apple/iOS开发/iOS开发">Apple</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/音视频/音视频">音视频</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/项目/项目">项目</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/音视频">音视频</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">音视频/音频</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Audio/Audio">Audio</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Audio/音频采集">音频采集</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Audio/音频存储">音频存储</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Audio/音频处理">音频处理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Audio/音频编解码">音频编解码</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Audio/音频播放">音频播放</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">音视频/视频</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Video/Video">Video</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Video/视频采集">视频采集</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Video/视频存储">视频存储</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Video/视频处理">视频处理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Video/视频编解码">视频编解码</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Video/视频渲染">视频渲染</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/同步/音视频同步">音视频同步</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/封装/音视频封装">音视频封装</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/传输/音视频传输">音视频传输</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/服务端/服务器">服务器</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">音视频/重要框架</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/音视频/学习资料/三方框架/FFMpeg/FFmpeg">FFmpeg</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/音视频/学习资料/三方框架/WebRTC/WebRTC">WebRTC</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">FFmpeg</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ffmpeg"></a>FFMpeg<a class="hash-link" href="#ffmpeg" title="Direct link to heading">#</a></h1><p>[toc]</p><p>入门介绍：</p><p><a href="https://www.ruanyifeng.com/blog/2020/01/ffmpeg.html" target="_blank" rel="noopener noreferrer">https://www.ruanyifeng.com/blog/2020/01/ffmpeg.html</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="背景和常识"></a>背景和常识<a class="hash-link" href="#背景和常识" title="Direct link to heading">#</a></h2><p>官网：<a href="https://ffmpeg.org/" target="_blank" rel="noopener noreferrer">https://ffmpeg.org/</a></p><p>简介：<a href="https://ffmpeg.org/about.html" target="_blank" rel="noopener noreferrer">https://ffmpeg.org/about.html</a></p><p>libav</p><p>GPL开源协议和耻辱柱</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="编译和集成"></a>编译和集成<a class="hash-link" href="#编译和集成" title="Direct link to heading">#</a></h2><p>TODO：</p><p>可以参考著名项目的编译脚本，比如IDKplayer</p><p>编译和运行ffmpeg的example参考这个：</p><p><a href="https://blog.jiyang.site/posts/compile-and-run-ffmpeg-examples/" target="_blank" rel="noopener noreferrer">https://blog.jiyang.site/posts/compile-and-run-ffmpeg-examples/</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="mac的编译"></a>Mac的编译<a class="hash-link" href="#mac的编译" title="Direct link to heading">#</a></h3><p><a href="https://trac.ffmpeg.org/wiki/CompilationGuide/macOS" target="_blank" rel="noopener noreferrer">https://trac.ffmpeg.org/wiki/CompilationGuide/macOS</a></p><p>下载</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">git clone https://git.ffmpeg.org/ffmpeg.git ffmpeg </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>查看编译选项</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config --help </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>编译安装</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">make &amp;&amp; make install</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>简单方便的安装方式</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">brew install ffmpeg</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">A sample compilation command is:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">git clone https://git.ffmpeg.org/ffmpeg.git ffmpeg</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cd ffmpeg</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">./configure  --prefix=/usr/local --enable-gpl --enable-nonfree --enable-libass \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--enable-libfdk-aac --enable-libfreetype --enable-libmp3lame \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libx265 --enable-libopus --enable-libxvid \</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">--samples=fate-suite/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">make</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ios的编译"></a>iOS的编译<a class="hash-link" href="#ios的编译" title="Direct link to heading">#</a></h3><blockquote><p>The toolchain provided with Xcode is sufficient to build the basic unaccelerated code.</p><p>Mac OS X on PowerPC or ARM (iPhone) requires a preprocessor from <a href="https://github.com/FFmpeg/gas-preprocessor" target="_blank" rel="noopener noreferrer">https://github.com/FFmpeg/gas-preprocessor</a> or <a href="https://github.com/yuvi/gas-preprocessor(currently" target="_blank" rel="noopener noreferrer">https://github.com/yuvi/gas-preprocessor(currently</a> outdated) to build the optimized assembly functions. Put the Perl script somewhere in your PATH, FFmpeg’s configure will pick it up automatically.</p><p>Mac OS X on amd64 and x86 requires <code>nasm</code> to build most of the optimized assembly functions. <a href="http://www.finkproject.org/" target="_blank" rel="noopener noreferrer">Fink</a>, <a href="https://wiki.gentoo.org/wiki/Project:Prefix" target="_blank" rel="noopener noreferrer">Gentoo Prefix</a>, <a href="https://mxcl.github.com/homebrew/" target="_blank" rel="noopener noreferrer">Homebrew</a> or <a href="http://www.macports.org/" target="_blank" rel="noopener noreferrer">MacPorts</a> can easily provide it.</p></blockquote><p>官方编译指导： <a href="https://ffmpeg.org/platform.html#Darwin-_0028Mac-OS-X_002c-iPhone_0029" target="_blank" rel="noopener noreferrer">https://ffmpeg.org/platform.html#Darwin-_0028Mac-OS-X_002c-iPhone_0029</a></p><ol><li>需要preprocessor <a href="https://github.com/FFmpeg/gas-preprocessor" target="_blank" rel="noopener noreferrer">https://github.com/FFmpeg/gas-preprocessor</a></li><li>需要nasm。 可用方便的用homebrew之类的包管理工具安装。</li></ol><p>上面的暂时没成功！</p><ul><li><strong>FFmpeg-iOS</strong></li><li><a href="https://github.com/kewlbear/FFmpeg-iOS-build-script" target="_blank" rel="noopener noreferrer">https://github.com/kewlbear/FFmpeg-iOS-build-script</a></li></ul><p>X246 <a href="https://github.com/kewlbear/x264-ios" target="_blank" rel="noopener noreferrer">https://github.com/kewlbear/x264-ios</a></p><p><a href="https://github.com/yxibng/x264-ios" target="_blank" rel="noopener noreferrer">https://github.com/yxibng/x264-ios</a></p><ul><li><a href="https://github.com/kewlbear/FFmpeg-iOS" target="_blank" rel="noopener noreferrer">https://github.com/kewlbear/FFmpeg-iOS</a></li></ul><p>iOS手动编译并搭建FFmpeg:<a href="https://xiaodongxie1024.github.io/2019/05/30/20190530_ffmpeg_build_ios/" target="_blank" rel="noopener noreferrer">https://xiaodongxie1024.github.io/2019/05/30/20190530_ffmpeg_build_ios/</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="安装方式"></a>安装方式<a class="hash-link" href="#安装方式" title="Direct link to heading">#</a></h4><p>可以通过如下两种方式安装ffmpeg</p><ul><li>1.下载iOS版本<a href="https://sourceforge.net/projects/ffmpeg-ios/files/ffmpeg-ios-master.tar.bz2/download?use_mirror=versaweb" target="_blank" rel="noopener noreferrer">ffmpeg静态库</a>: 即不用手动编译,我们只需要下载得到头文件及.a库文件.</li><li>2.手动编译: 下载源码, 可以在更改一些flag或源码后再编译脚本,较为灵活.</li></ul><p><a href="https://sourceforge.net/projects/ffmpeg-ios/files/ffmpeg-ios-master.tar.bz2/download?use_mirror=versaweb" target="_blank" rel="noopener noreferrer">https://sourceforge.net/projects/ffmpeg-ios/files/ffmpeg-ios-master.tar.bz2/download?use_mirror=versaweb</a></p><p>FFmpeg在iOS开发中编译并使用以及我遇到的问题解决: <a href="https://kongdezhi.com/2019/08/28/FFmpeg%E5%9C%A8iOS%E5%BC%80%E5%8F%91%E4%B8%AD%E7%BC%96%E8%AF%91%E5%B9%B6%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%8F%8A%E6%88%91%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/" target="_blank" rel="noopener noreferrer">https://kongdezhi.com/2019/08/28/FFmpeg%E5%9C%A8iOS%E5%BC%80%E5%8F%91%E4%B8%AD%E7%BC%96%E8%AF%91%E5%B9%B6%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%8F%8A%E6%88%91%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</a></p><p>iOS开发 - 超详细集成 FFmpeg 步骤:<a href="https://www.jianshu.com/p/ecfbebadbe55" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/ecfbebadbe55</a></p><p>官方编译指南：</p><p><a href="https://trac.ffmpeg.org/wiki/CompilationGuide/macOS" target="_blank" rel="noopener noreferrer">https://trac.ffmpeg.org/wiki/CompilationGuide/macOS</a></p><p> <a href="https://xiaodongxie1024.github.io/2019/03/20/20190320_iOS_MakeFFmepgDynamicLib/" target="_blank" rel="noopener noreferrer">https://xiaodongxie1024.github.io/2019/03/20/20190320_iOS_MakeFFmepgDynamicLib/</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="编译官方demo"></a>编译官方demo<a class="hash-link" href="#编译官方demo" title="Direct link to heading">#</a></h3><p>编译FFmpeg自带的demo。重点在于：找到引用的库！</p><p>FFmpeg已经通过brew安装了。</p><p><code>pkg-config --cflags --libs libavcodec</code> 可以帮我们找到libavcodec。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/Users/dingyusong/Documents/GitHub/FFmpeg/doc/examples git:(release/4.3) ✗ gcc encode_video.c `pkg-config --cflags --libs libavcodec`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><img alt="image-20210325164547138" src="/assets/images/image-20210325164547138-ccfc3d58e10dd696c56c53ce4d8e2e70.png"></p><p>demo引用了 libavcodec 所以要用 pkg-config 来找到他。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /usr/local/lib/pkgconfig cat libavcodec.pc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">prefix=/usr/local/Cellar/ffmpeg/4.3.1_9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exec_prefix=${prefix}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">libdir=/usr/local/Cellar/ffmpeg/4.3.1_9/lib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">includedir=/usr/local/Cellar/ffmpeg/4.3.1_9/include</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Name: libavcodec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Description: FFmpeg codec library</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Version: 58.91.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Requires:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Requires.private: libswresample &gt;= 3.7.100, libavutil &gt;= 56.51.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Conflicts:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Libs: -L${libdir}  -lavcodec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Libs.private: -L/usr/local/Cellar/libvpx/1.9.0/lib -lvpx -lm -L/usr/local/Cellar/libvpx/1.9.0/lib -lvpx -lm -L/usr/local/Cellar/libvpx/1.9.0/lib -lvpx -lm -L/usr/local/Cellar/libvpx/1.9.0/lib -lvpx -lm -L/usr/local/Cellar/webp/1.1.0/lib -lwebpmux -lwebp -liconv -lm -llzma -L/usr/local/Cellar/dav1d/0.8.1/lib -ldav1d -lopencore-amrwb -lsnappy -lstdc++ -lz -framework AudioToolbox -L/usr/local/Cellar/aom/2.0.1/lib -laom -lmp3lame -lm -lopencore-amrnb -L/usr/local/Cellar/openjpeg/2.3.1/lib -lopenjp2 -L/usr/local/Cellar/opus/1.3.1/lib -lopus -L/usr/local/Cellar/rav1e/0.4.0/lib -lrav1e -L/usr/local/Cellar/speex/1.2.0/lib -lspeex -ltheoraenc -ltheoradec -logg -L/usr/local/Cellar/libvorbis/1.3.7/lib -lvorbis -L/usr/local/Cellar/libvorbis/1.3.7/lib -lvorbisenc -L/usr/local/Cellar/webp/1.1.0/lib -lwebp -L/usr/local/Cellar/x264/r3027_1/lib -lx264 -L/usr/local/Cellar/x265/3.4_2/lib -lx265 -lxvidcore -pthread -framework VideoToolbox -framework CoreFoundation -framework CoreMedia -framework CoreVideo -framework CoreServices</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Cflags: -I${includedir}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /usr/local/lib/pkgconfig</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>encode_video</strong></p><p>264编码：</p><p>yuv-&gt;h264</p><p><img alt="image-20210326151033810" src="/assets/images/image-20210326151033810-bf33301a6a1140dfae55e04de85d3094.png"></p><p>元数据大小是 183.5MB</p><p>编码后的大小是：22KB</p><p><img alt="image-20210326152612834" src="/assets/images/image-20210326152612834-5a078260fcaade6b3c56777ab07bbcb4.png"></p><p><strong>有理数</strong></p><p><img alt="image-20210326152815152" src="/assets/images/image-20210326152815152-0983545f6ad13397c3bfc07cf779af42.png"></p><p>时间戳</p><p>FFmpeg时间戳详解：<a href="https://www.cnblogs.com/leisure_chn/p/10584910.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/leisure_chn/p/10584910.html</a></p><p><strong>decode_video</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* find the MPEG-1 video decoder */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    codec </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">avcodec_find_decoder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">AV_CODEC_ID_H264</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">codec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">fprintf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token constant" style="color:rgb(130, 170, 255)">stderr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Codec not found\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">exit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>AV_CODEC_ID_H264 使用264解码器。</p><p>FFmpeg decode_video.c示例：<a href="https://www.jianshu.com/p/ba828994638a" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/ba828994638a</a></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">//编译</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/dingyusong/Documents/GitHub/FFmpeg/doc/examples git:(release/4.3) ✗ gcc decode_video.c `pkg-config --cflags --libs libavcodec` -o decode_video</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">//运行</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/dingyusong/Documents/GitHub/FFmpeg/doc/examples git:(release/4.3) ✗ ./decode_video hw_encoded.h264 demo_decode.yuv</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>AVPacket，AVFrame</p><p>AVPacket来暂存解复用之后、解码之前的媒体数据（一个音/视频帧、一个字幕包等）及附加信息（解码时间戳、显示时间戳、时长等）</p><p>AVFrame</p><p>构体保存的是解码后和原始的音视频信息。</p><p>十八：AVPacket，AVFrame ：<a href="https://www.jianshu.com/p/916fac038338" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/916fac038338</a></p><p>关于pkg-config的使用 </p><p><a href="https://blog.csdn.net/xygl2009/article/details/12998497" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/xygl2009/article/details/12998497</a></p><p>快速指南：pkg-config 的原理和使用方法: <a href="https://yeping.blog.csdn.net/article/details/112714641" target="_blank" rel="noopener noreferrer">https://yeping.blog.csdn.net/article/details/112714641</a></p><p>pkg-config与ffmpeg：<a href="https://www.jianshu.com/p/9cdba4e9d761" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/9cdba4e9d761</a></p><p><strong>*.pc 文件格式</strong></p><p>保存在 /usr/local/lib/pkgconfig 路径下，内容如下：</p><p><img alt="image-20210325164436811" src="/assets/images/image-20210325164436811-3231700e401d3e24ea618f2017f9c412.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="使用ffmpeg库"></a>使用FFMpeg库<a class="hash-link" href="#使用ffmpeg库" title="Direct link to heading">#</a></h2><p><img alt="image-20210330142339693" src="/assets/images/image-20210330142339693-82443f73fcfca2fceca7d8db0f10a5e7.png"></p><p>ios的依赖库参考：<a href="https://github.com/kewlbear/FFmpeg-iOS-build-script" target="_blank" rel="noopener noreferrer">https://github.com/kewlbear/FFmpeg-iOS-build-script</a></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/dingyusong/Documents/GitHub/FFmpeg git:(release/4.3) ✗ cd /usr/local/lib/pkgconfig</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /usr/local/lib/pkgconfig cat libavcodec.pc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">prefix=/usr/local/Cellar/ffmpeg/4.3.1_9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exec_prefix=${prefix}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">libdir=/usr/local/Cellar/ffmpeg/4.3.1_9/lib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">includedir=/usr/local/Cellar/ffmpeg/4.3.1_9/include</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Name: libavcodec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Description: FFmpeg codec library</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Version: 58.91.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Requires:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Requires.private: libswresample &gt;= 3.7.100, libavutil &gt;= 56.51.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Conflicts:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Libs: -L${libdir}  -lavcodec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Libs.private: -L/usr/local/Cellar/libvpx/1.9.0/lib -lvpx -lm -L/usr/local/Cellar/libvpx/1.9.0/lib -lvpx -lm -L/usr/local/Cellar/libvpx/1.9.0/lib -lvpx -lm -L/usr/local/Cellar/libvpx/1.9.0/lib -lvpx -lm -L/usr/local/Cellar/webp/1.1.0/lib -lwebpmux -lwebp -liconv -lm -llzma -L/usr/local/Cellar/dav1d/0.8.1/lib -ldav1d -lopencore-amrwb -lsnappy -lstdc++ -lz -framework AudioToolbox -L/usr/local/Cellar/aom/2.0.1/lib -laom -lmp3lame -lm -lopencore-amrnb -L/usr/local/Cellar/openjpeg/2.3.1/lib -lopenjp2 -L/usr/local/Cellar/opus/1.3.1/lib -lopus -L/usr/local/Cellar/rav1e/0.4.0/lib -lrav1e -L/usr/local/Cellar/speex/1.2.0/lib -lspeex -ltheoraenc -ltheoradec -logg -L/usr/local/Cellar/libvorbis/1.3.7/lib -lvorbis -L/usr/local/Cellar/libvorbis/1.3.7/lib -lvorbisenc -L/usr/local/Cellar/webp/1.1.0/lib -lwebp -L/usr/local/Cellar/x264/r3027_1/lib -lx264 -L/usr/local/Cellar/x265/3.4_2/lib -lx265 -lxvidcore -pthread -framework VideoToolbox -framework CoreFoundation -framework CoreMedia -framework CoreVideo -framework CoreServices</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Cflags: -I${includedir}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /usr/local/lib/pkgconfig</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>可以通过查看pc文件查看其依赖文件。</p><p>添加库的时候，直接扯过来，比点击加号方便</p><p><img alt="image-20210402103651076" src="/assets/images/image-20210402103651076-53466ec83ff1614cf9ec6f8be315c166.png"></p><p>库的话，扯到build phase 里比较好。</p><p><img alt="image-20210402110603063" src="/assets/images/image-20210402110603063-c071e1b6e912c11c502bce6bfc00baa1.png"></p><p>头文件也最好用，扯的。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="命令行使用篇"></a>命令行使用篇<a class="hash-link" href="#命令行使用篇" title="Direct link to heading">#</a></h2><p><a href="https://ffmpeg.org/documentation.html" target="_blank" rel="noopener noreferrer">https://ffmpeg.org/documentation.html</a></p><p><img alt="image-20211006062408074" src="/assets/images/image-20211006062408074-fad968ea09731e035a8bfd620cddcdfa.png"></p><p>记住</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">man ffmpeg</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">                _______              ______________</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               |       |            |              |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               | input |  demuxer   | encoded data |   decoder</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               | file  | ---------&gt; | packets      | -----+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               |_______|            |______________|      |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                          v</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                      _________</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                     |         |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                     | decoded |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                     | frames  |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                     |_________|</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ________             ______________       |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               |        |           |              |      |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               | output | &lt;-------- | encoded data | &lt;----+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               | file   |   muxer   | packets      |   encoder</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               |________|           |______________|</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="基本信息查询命令"></a>基本信息查询命令<a class="hash-link" href="#基本信息查询命令" title="Direct link to heading">#</a></h3><p><img alt="image-20211006062432332" src="/assets/images/image-20211006062432332-0a32032d19c9c108fe30bdcf9f022e3a.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="显示可用设备"></a>显示可用设备<a class="hash-link" href="#显示可用设备" title="Direct link to heading">#</a></h4><p>ffmpeg -devices</p><p><img alt="image-20211006141307790" src="/assets/images/image-20211006141307790-9c9ccc1efe797b0227a4917ce0ef5f6e.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="显示264相关的编解码器"></a>显示264相关的编解码器<a class="hash-link" href="#显示264相关的编解码器" title="Direct link to heading">#</a></h4><p><img alt="image-20211006141452351" src="/assets/images/image-20211006141452351-437d94fdcbe215bf518a437296176136.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="mp3相关的封装格式"></a>mp3相关的封装格式<a class="hash-link" href="#mp3相关的封装格式" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding ffmpeg -formats | grep mp3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg version 4.4 Copyright (c) 2000-2021 the FFmpeg developers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  built with Apple clang version 12.0.0 (clang-1200.0.32.29)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  configuration: --prefix=/usr/local/Cellar/ffmpeg/4.4_2 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libbluray --enable-libdav1d --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-avresample --enable-videotoolbox</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libavutil      56. 70.100 / 56. 70.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libavcodec     58.134.100 / 58.134.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libavformat    58. 76.100 / 58. 76.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libavdevice    58. 13.100 / 58. 13.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libavfilter     7.110.100 /  7.110.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libavresample   4.  0.  0 /  4.  0.  0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libswscale      5.  9.100 /  5.  9.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libswresample   3.  9.100 /  3.  9.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libpostproc    55.  9.100 / 55.  9.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> DE mp3             MP3 (MPEG audio layer 3)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="采样大小"></a>采样大小<a class="hash-link" href="#采样大小" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay -sample_fmts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">name   depth</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">u8        8</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s16      16</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s32      32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">flt      32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dbl      64</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">u8p       8</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s16p     16</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s32p     32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">fltp     32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dblp     64</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s64      64</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">s64p     64</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="像素格式"></a>像素格式<a class="hash-link" href="#像素格式" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay -pix_fmts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Pixel formats:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I.... = Supported Input  format for conversion</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">.O... = Supported Output format for conversion</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">..H.. = Hardware accelerated format</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...P. = Paletted format</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">....B = Bitstream format</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">FLAGS NAME            NB_COMPONENTS BITS_PER_PIXEL</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">IO... yuv420p                3            12</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">IO... yuyv422                3            16</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">IO... rgb24                  3            24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">IO... bgr24                  3            24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="录制命令"></a>录制命令<a class="hash-link" href="#录制命令" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="视频录制"></a>视频录制<a class="hash-link" href="#视频录制" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -f avfoundation -i 1 -r 30 out.yuv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-f ：使用avfoundation框架，采集数据</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-i ：从哪里采集数据，文件索引号。这里是从1得来（视频和音频，数字分别在冒号的左边和右边，视频冒号可以省略）。</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-r ：帧率是30</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">最后输出到out.yuv里。</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>录制信息</p><p><img alt="image-20211006142348619" src="/assets/images/image-20211006142348619-5922e1501b716c0f0af83af09a41a7ee.png"></p><p>使用ffplay播放yuv，需要指定size</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay out.yuv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[IMGUTILS @ 0x7000021c5958] Picture size 0x0 is invalid</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">out.yuv: Invalid argument</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>使用ffplay播放yuv，指定size，像素格式不对，播放默认按照yuv420p,而录制的是uyvy422</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay -s 2560x1600 out.yuv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Option -s is deprecated, use -video_size.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[rawvideo @ 0x7fb8ba045e00] Estimating duration from bitrate, this may be inaccurate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, rawvideo, from &#x27;out.yuv&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: 00:00:08.44, start: 0.000000, bitrate: 1226858 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0: Video: rawvideo (I420 / 0x30323449), yuv420p, 2560x1600, 1228800 kb/s, 25 tbr, 25 tbn, 25 tbc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   3.55 M-V:  0.001 fd=   0 aq=    0KB vq=18000KB sq=    0B f=0/0</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>-pix_fmt uyvy422 指定像素格式即可播放成功。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay -s 2560x1600 -pix_fmt uyvy422 out.yuv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffplay version 4.4 Copyright (c) 2003-2021 the FFmpeg developers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  built with Apple clang version 12.0.0 (clang-1200.0.32.29)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  configuration: --prefix=/usr/local/Cellar/ffmpeg/4.4_2 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libbluray --enable-libdav1d --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-libzimg --disable-libjack --disable-indev=jack --enable-avresample --enable-videotoolbox</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libavutil      56. 70.100 / 56. 70.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libavcodec     58.134.100 / 58.134.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libavformat    58. 76.100 / 58. 76.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libavdevice    58. 13.100 / 58. 13.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libavfilter     7.110.100 /  7.110.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libavresample   4.  0.  0 /  4.  0.  0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libswscale      5.  9.100 /  5.  9.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libswresample   3.  9.100 /  3.  9.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libpostproc    55.  9.100 / 55.  9.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Option -s is deprecated, use -video_size.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Option -pix_fmt is deprecated, use -pixel_format.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[rawvideo @ 0x7ff875829a00] Estimating duration from bitrate, this may be inaccurate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, rawvideo, from &#x27;out.yuv&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: 00:00:06.32, start: 0.000000, bitrate: 1638400 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0: Video: rawvideo (UYVY / 0x59565955), uyvy422, 2560x1600, 1638400 kb/s, 25 tbr, 25 tbn, 25 tbc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">^C%</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="查看文件索引号"></a>查看文件索引号<a class="hash-link" href="#查看文件索引号" title="Direct link to heading">#</a></h4><p>也就是上面录制使用所用的-i 参数</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -f avfoundation -list_devices true -i &quot;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[AVFoundation indev @ 0x7ff412c10f40] AVFoundation video devices:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[AVFoundation indev @ 0x7ff412c10f40] [0] FaceTime HD Camera</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[AVFoundation indev @ 0x7ff412c10f40] [1] Capture screen 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[AVFoundation indev @ 0x7ff412c10f40] AVFoundation audio devices:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[AVFoundation indev @ 0x7ff412c10f40] [0] Built-in Microphone</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">: Input/output error</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="音频录制"></a>音频录制<a class="hash-link" href="#音频录制" title="Direct link to heading">#</a></h4><p>注意：</p><ul><li>数字在冒号的左边,或者省略，是视频例如：<code>1:</code>,<code>1</code></li><li>数字在冒号的右边,是音频例如：<code>:0</code></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -f avfoundation -i :0 out.wav</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, avfoundation, from &#x27;:0&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: N/A, start: 84779.063265, bitrate: 2822 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0: Audio: pcm_f32le, 44100 Hz, stereo, flt, 2822 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Stream mapping:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0 -&gt; #0:0 (pcm_f32le (native) -&gt; pcm_s16le (native))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Press [q] to stop, [?] for help</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Output #0, wav, to &#x27;out.wav&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ISFT            : Lavf58.76.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, stereo, s16, 1411 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      encoder         : Lavc58.134.100 pcm_s16le</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">size=     764kB time=00:00:04.79 bitrate=1305.4kbits/s speed=0.998x</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">video:0kB audio:764kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.009970%</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Exiting normally, received signal 2.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ll</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">total 2529536</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff   764K 10  6 15:07 out.wav</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--  1 Ding  staff   1.2G 10  6 14:19 out.yuv</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>音频播放</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay out.wav</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, wav, from &#x27;out.wav&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    encoder         : Lavf58.76.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: 00:00:04.44, bitrate: 1411 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0: Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, 2 channels, s16, 1411 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Switch subtitle stream from #-1 to #-1 vq=    0KB sq=    0B f=0/0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Switch subtitle stream from #-1 to #-1 vq=    0KB sq=    0B f=0/0</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="分解复用命令"></a>分解/复用命令<a class="hash-link" href="#分解复用命令" title="Direct link to heading">#</a></h3><p>说白了就是多媒体文件格式转换MP4转flv，flv转MP4等。</p><p><img alt="image-20211006153353433" src="/assets/images/image-20211006153353433-de4181d62d525664426dbb613f553483.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="mp4转为flv"></a>mp4转为flv<a class="hash-link" href="#mp4转为flv" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i 1.mp4 -vcodec copy -acodec copy out1.flv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-i 输入文件</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-vcodec copy : 视频编码不变</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-acodec copy : 音频编码不变</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i 1.mp4 -vcodec copy -acodec copy out1.flv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, mov,mp4,m4a,3gp,3g2,mj2, from &#x27;1.mp4&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    major_brand     : isom</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    minor_version   : 512</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    compatible_brands: isomiso2avc1mp41</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    encoder         : Lavf55.33.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: 00:00:03.86, start: 0.000000, bitrate: 1306 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 64 kb/s (default)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      rotate          : 90</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      handler_name    : SoundHandler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      vendor_id       : [0][0][0][0]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:1(und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 960x544, 1234 kb/s, 30.59 fps, 31 tbr, 15360 tbn, 60 tbc (default)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      rotate          : 90</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      handler_name    : VideoHandler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      vendor_id       : [0][0][0][0]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Side data:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      displaymatrix: rotation of -90.00 degrees</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Output #0, flv, to &#x27;out1.flv&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    major_brand     : isom</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    minor_version   : 512</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    compatible_brands: isomiso2avc1mp41</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    encoder         : Lavf58.76.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0(und): Video: h264 (Constrained Baseline) ([7][0][0][0] / 0x0007), yuv420p, 960x544, q=2-31, 1234 kb/s, 30.59 fps, 31 tbr, 1k tbn, 15360 tbc (default)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      rotate          : 90</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      handler_name    : VideoHandler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      vendor_id       : [0][0][0][0]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Side data:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      displaymatrix: rotation of -90.00 degrees</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:1(und): Audio: aac (LC) ([10][0][0][0] / 0x000A), 44100 Hz, mono, fltp, 64 kb/s (default)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      rotate          : 90</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      handler_name    : SoundHandler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      vendor_id       : [0][0][0][0]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Stream mapping:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:1 -&gt; #0:0 (copy)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0 -&gt; #0:1 (copy)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Press [q] to stop, [?] for help</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">frame=  118 fps=0.0 q=-1.0 Lsize=     616kB time=00:00:03.82 bitrate=1318.1kbits/s speed= 518x</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">video:581kB audio:29kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.888703%</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ll</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">total 2532000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff   615K  8 22  2017 1.mp4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff   764K 10  6 15:07 out.wav</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--  1 Ding  staff   1.2G 10  6 14:19 out.yuv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff   616K 10  6 15:38 out1.flv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay out1.flv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, flv, from &#x27;out1.flv&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    major_brand     : isom</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    minor_version   : 512</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    compatible_brands: isomiso2avc1mp41</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    encoder         : Lavf58.76.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: 00:00:03.86, start: 0.000000, bitrate: 1307 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0: Video: h264 (Constrained Baseline), yuv420p(progressive), 960x544, 1234 kb/s, 30.59 fps, 30 tbr, 1k tbn, 60 tbc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:1: Audio: aac (LC), 44100 Hz, mono, fltp, 64 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   4.13 A-V: -0.006 fd=   6 aq=    0KB vq=    0KB sq=    0B f=0/0</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="从mp4抽取264视频"></a>从mp4抽取264视频<a class="hash-link" href="#从mp4抽取264视频" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i 1.mp4 -vcodec copy -an out2.264</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ll</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">total 2533168</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff   615K  8 22  2017 1.mp4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff   764K 10  6 15:07 out.wav</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--  1 Ding  staff   1.2G 10  6 14:19 out.yuv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff   616K 10  6 15:38 out1.flv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--  1 Ding  staff   582K 10  6 15:43 out2.264</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay out2.264</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-an: 音频不要，-audio no 的意思</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="从mp4抽取aac音频"></a>从mp4抽取aac音频<a class="hash-link" href="#从mp4抽取aac音频" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i 1.mp4 -acodec copy -vn out2.aac</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, mov,mp4,m4a,3gp,3g2,mj2, from &#x27;1.mp4&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    major_brand     : isom</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    minor_version   : 512</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    compatible_brands: isomiso2avc1mp41</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    encoder         : Lavf55.33.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: 00:00:03.86, start: 0.000000, bitrate: 1306 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 64 kb/s (default)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      rotate          : 90</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      handler_name    : SoundHandler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      vendor_id       : [0][0][0][0]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:1(und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 960x544, 1234 kb/s, 30.59 fps, 31 tbr, 15360 tbn, 60 tbc (default)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      rotate          : 90</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      handler_name    : VideoHandler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      vendor_id       : [0][0][0][0]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Side data:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      displaymatrix: rotation of -90.00 degrees</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Output #0, adts, to &#x27;out2.aac&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    major_brand     : isom</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    minor_version   : 512</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    compatible_brands: isomiso2avc1mp41</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    encoder         : Lavf58.76.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 64 kb/s (default)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      rotate          : 90</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      handler_name    : SoundHandler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      vendor_id       : [0][0][0][0]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Stream mapping:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0 -&gt; #0:0 (copy)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Press [q] to stop, [?] for help</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">size=      30kB time=00:00:03.64 bitrate=  67.3kbits/s speed=1.32e+03x</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">video:0kB audio:29kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 3.743569%</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay out2.aac</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[aac @ 0x7fa295027a00] Estimating duration from bitrate, this may be inaccurate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, aac, from &#x27;out2.aac&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: 00:00:03.62, bitrate: 67 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0: Audio: aac (LC), 44100 Hz, mono, fltp, 67 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   5.77 M-A:  0.000 fd=   0 aq=    0KB vq=    0KB sq=    0B f=0/0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i 1.mp4 -acodec copy -vn out2.123</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[NULL @ 0x7fe3d4008200] Unable to find a suitable output format for &#x27;out2.123&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">out2.123: Invalid argument</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ll</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">total 2533232</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff   615K  8 22  2017 1.mp4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff   764K 10  6 15:07 out.wav</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--  1 Ding  staff   1.2G 10  6 14:19 out.yuv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff   616K 10  6 15:38 out1.flv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--  1 Ding  staff   582K 10  6 15:43 out2.264</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff    30K 10  6 15:45 out2.aac</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-acodec copy -vn</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">注意：文件扩展名不能随意out2.aac可以导出成功，命名为out2.123则不能成功</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="处理原始数据命令"></a>处理原始数据命令<a class="hash-link" href="#处理原始数据命令" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="提取yuv数据"></a>提取YUV数据<a class="hash-link" href="#提取yuv数据" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i 1.mp4 -an -c:v rawvideo -pixel_format yuv420p out1.yuv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, mov,mp4,m4a,3gp,3g2,mj2, from &#x27;1.mp4&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    major_brand     : isom</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    minor_version   : 512</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    compatible_brands: isomiso2avc1mp41</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    encoder         : Lavf55.33.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: 00:00:03.86, start: 0.000000, bitrate: 1306 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 64 kb/s (default)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      rotate          : 90</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      handler_name    : SoundHandler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      vendor_id       : [0][0][0][0]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:1(und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 960x544, 1234 kb/s, 30.59 fps, 31 tbr, 15360 tbn, 60 tbc (default)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      rotate          : 90</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      handler_name    : VideoHandler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      vendor_id       : [0][0][0][0]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Side data:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      displaymatrix: rotation of -90.00 degrees</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">File &#x27;out1.yuv&#x27; already exists. Overwrite? [y/N] y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Stream mapping:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:1 -&gt; #0:0 (h264 (native) -&gt; rawvideo (native))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Press [q] to stop, [?] for help</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Output #0, rawvideo, to &#x27;out1.yuv&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    major_brand     : isom</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    minor_version   : 512</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    compatible_brands: isomiso2avc1mp41</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    encoder         : Lavf58.76.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0(und): Video: rawvideo (I420 / 0x30323449), yuv420p(progressive), 544x960, q=2-31, 194273 kb/s, 31 fps, 31 tbn (default)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      encoder         : Lavc58.134.100 rawvideo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      handler_name    : VideoHandler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      vendor_id       : [0][0][0][0]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Side data:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      displaymatrix: rotation of -0.00 degrees</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">frame=  120 fps=0.0 q=-0.0 Lsize=   91800kB time=00:00:03.87 bitrate=194273.3kbits/s dup=2 drop=0 speed=7.96x</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">video:91800kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ffplay播放yuv文件"></a>ffplay播放yuv文件<a class="hash-link" href="#ffplay播放yuv文件" title="Direct link to heading">#</a></h4><p>默认像素格式 pixel_format = yuv420p</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay -video_size 544x960 out1.yuv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[rawvideo @ 0x7fa783014a00] Estimating duration from bitrate, this may be inaccurate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, rawvideo, from &#x27;out1.yuv&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: 00:00:04.80, start: 0.000000, bitrate: 156672 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0: Video: rawvideo (I420 / 0x30323449), yuv420p, 544x960, 156672 kb/s, 25 tbr, 25 tbn, 25 tbc</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   6.67 M-V:  0.001 fd=   0 aq=    0KB vq=    0KB sq=    0B f=0/0</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="提取pcm数据"></a>提取PCM数据<a class="hash-link" href="#提取pcm数据" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -i 1.mp4 -vn -ar 44100 -ac 2 -f s16le out1.pcm</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-vn:不要视频</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">设置音频三元组：（采样率，采样大小，通道数）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-ar: 采样率</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-ac: 通道数</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-f: 采样大小（s16le，有符号，16位，小端）</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i 1.mp4 -vn -ar 44100 -ac 2 -f s16le out1.pcm</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay out1.pcm</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[adp @ 0x7ffb8701e000] Format adp detected only with low score of 25, misdetection possible!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, adp, from &#x27;out1.pcm&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: 00:00:11.80, start: 0.000000, bitrate: 438 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0: Audio: adpcm_dtk, 48000 Hz, stereo, s16p</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  12.95 M-A:  0.000 fd=   0 aq=    0KB vq=    0KB sq=    0B f=0/0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ffplay播放pcm文件"></a>ffplay播放pcm文件<a class="hash-link" href="#ffplay播放pcm文件" title="Direct link to heading">#</a></h4><p>需要指定音频三要素</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay out1.pcm</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  libpostproc    55.  9.100 / 55.  9.100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[adp @ 0x7fb17d06ac00] Format adp detected only with low score of 25, misdetection possible!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, adp, from &#x27;out1.pcm&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: 00:00:11.80, start: 0.000000, bitrate: 438 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0: Audio: adpcm_dtk, 48000 Hz, stereo, s16p</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  10.23 M-A:  0.000 fd=   0 aq=   54KB vq=    0KB sq=    0B f=0/0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay -ar 44100 -ac 2 -f s16le out1.pcm</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[s16le @ 0x7fb9250a4000] Estimating duration from bitrate, this may be inaccurate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Input #0, s16le, from &#x27;out1.pcm&#x27;:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Duration: 00:00:03.67, bitrate: 1411 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Stream #0:0: Audio: pcm_s16le, 44100 Hz, 2 channels, s16, 1411 kb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   9.91 M-A:  0.000 fd=   0 aq=    0KB vq=    0KB sq=    0B f=0/0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="裁剪与合并命令"></a>裁剪与合并命令<a class="hash-link" href="#裁剪与合并命令" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="视频时间裁剪"></a>视频时间裁剪<a class="hash-link" href="#视频时间裁剪" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i 1.mp4 -ss 00:00:00 -t 5 out3.ts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-ss 00:00:00: 从头开始</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-t 5：截取5秒</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="视频时间拼接"></a>视频时间拼接<a class="hash-link" href="#视频时间拼接" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli vi input.txt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli cat input.txt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">file &#x27;out3.ts&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">file &#x27;out4.ts&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -f concat -i input.txt con-out.mp4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay con-out.mp4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-i input.txt: 文件列表：格式为file &#x27;filename&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="图片视频互转命令"></a>图片/视频互转命令<a class="hash-link" href="#图片视频互转命令" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="视频转图片"></a>视频转图片<a class="hash-link" href="#视频转图片" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i 1.mp4 -r 1 -f image2 image-%3d.jpeg</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ll</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">total 2727312</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff   615K  8 22  2017 1.mp4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff   1.6M 10  6 16:50 con-out.mp4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff    53K 10  6 16:53 image-001.jpeg</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff    62K 10  6 16:53 image-002.jpeg</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff    56K 10  6 16:53 image-003.jpeg</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff    77K 10  6 16:53 image-004.jpeg</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--@ 1 Ding  staff    63K 10  6 16:53 image-005.jpeg</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rw-r--r--  1 Ding  staff    30B 10  6 16:49 input.txt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli open image-001.jpeg</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli open image-004.jpeg</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-r 1: 转图片的频率是1秒一张</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-f image2: 格式是image2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">image-%3d.jpeg : 命名是3位整数格式</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="图片转视频"></a>图片转视频<a class="hash-link" href="#图片转视频" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i image-%3d.jpeg con-img-out.mp4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay con-img-out.mp4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-i image-%3d.jpeg: 输入的图片，按照这种格式来</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="直播相关命令"></a>直播相关命令<a class="hash-link" href="#直播相关命令" title="Direct link to heading">#</a></h3><p>百度搜索: rtmp 直播流地址。有很多可用的视频源。</p><p>ffplay 播放测试一下</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay rtmp://ns8.indexforce.com/home/mystream</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>苹果提供的测试源（点播）：<a href="http://devimages.apple.com.edgekey.net/streaming/examples/bipbop_4x3/gear2/prog_index.m3u8" target="_blank" rel="noopener noreferrer">http://devimages.apple.com.edgekey.net/streaming/examples/bipbop_4x3/gear2/prog_index.m3u8</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="直播推流"></a>直播推流<a class="hash-link" href="#直播推流" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -re -i out.mp4 -c copy -f flv rtmp://server/live/streamname</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="直播拉流"></a>直播拉流<a class="hash-link" href="#直播拉流" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i rtmp://ns8.indexforce.com/home/mystream -c copy demp.flv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay demp.flv</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i http://devimages.apple.com.edgekey.net/streaming/examples/bipbop_4x3/gear2/prog_index.m3u8  -c copy demp.m3u8</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay demp.m3u8</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="滤镜命令"></a>滤镜命令<a class="hash-link" href="#滤镜命令" title="Direct link to heading">#</a></h3><p><img alt="image-20211006163024337" src="/assets/images/image-20211006163024337-c9414919f1fbf2c2c94faa4868924863.png"></p><p>数据解码后处理，然后再编码</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="视频大小裁剪"></a>视频大小裁剪<a class="hash-link" href="#视频大小裁剪" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffmpeg -i 1.mp4 -vf crop=in_w-200:in_h-200 -c:v libx264 -c:a copy  out2.mp4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-c:v libx264 -c:a copy : 处理之后再编码</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/Ding/Documents/ff/cli ffplay out2.mp4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="基本概念"></a>基本概念<a class="hash-link" href="#基本概念" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="容器"></a>容器<a class="hash-link" href="#容器" title="Direct link to heading">#</a></h5><p>常见的视频文件本身是一个容器（container），里面包括了视频和音频，也有可能有字幕等。</p><p>通常大家所说的视频格式（format）就可以理解为压缩格式（container）或者混流格式（Muxing），例如<code>avi</code>、<code>mp4</code>、<code>mkv</code>等，它们相当于是一个容器，可以将视频与音频数据包装在一起，并让它们能够按照指定的同步方式输出。</p><p>常见容器有以下几种。一般来说视频文件的后缀名反映了他的容器格式。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">MP4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">MKV</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">WebM</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AVI</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>可以通过以下命令查看ffmpeg支持的容器。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -formats</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>输出的格式很多，在格式的前面会标有<code>E</code>、<code>D</code>和<code>DE</code>字样，并且最前面的2行内容为：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">File formats:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> D. = Demuxing supported</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> .E = Muxing supported</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>表示ffmpeg所支持的相应解析格式的编码还是解码，注意这里所说的编码和解码分别是指<strong>混流和解析混流</strong>。因为视频中可以包含多种流（steam）类型，例如视频、音频、字幕等。</p><p>muxer（封装器） 和 demuxer（解封装器）存放在 libavformat 目录下的mux.c 文件中；</p><p>参考：FFmpeg支持的压缩格式和编解码格式：<a href="http://notes.maxwi.com/2017/04/05/ffmpeg-codecs-formats/" target="_blank" rel="noopener noreferrer">http://notes.maxwi.com/2017/04/05/ffmpeg-codecs-formats/</a></p><p>音视频混流基本原理：<a href="https://cloud.tencent.com/developer/article/1494869" target="_blank" rel="noopener noreferrer">https://cloud.tencent.com/developer/article/1494869</a></p><p>聊一聊直播利器，连麦互动背后的混流方案：到底该怎么混？： <a href="https://www2.zego.im/media/how-to-mix" target="_blank" rel="noopener noreferrer">https://www2.zego.im/media/how-to-mix</a></p><p>添加<code>-hide_banner</code>会拼比元信息。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="编码格式"></a>编码格式<a class="hash-link" href="#编码格式" title="Direct link to heading">#</a></h4><p>音频和视频都需要进行编码。（为什么要编码，因为不编码的原始文件大的吓人。使用ffmpeg对一个42.3m的MP4文件，解码得到的原始yuv文件大小为17.58G）不同的编码格式会有不同的压缩率，会导致编码出来的文件大小和清晰度的差异。（所以 追求文件大小比较小，且清晰度搞的，音频和视频编码这块是算法大神的用武之地）</p><p>常用的视频编码格式如下。</p><blockquote><ul><li>H.262</li><li>H.264</li><li>H.265</li></ul></blockquote><p>上面的编码格式都是有版权的，但是可以免费使用。此外，还有几种无版权的视频编码格式。</p><blockquote><ul><li>VP8</li><li>VP9</li><li>AV1</li></ul></blockquote><p>常用的音频编码格式如下。</p><blockquote><ul><li>MP3</li><li>AAC</li></ul></blockquote><p>上面所有这些都是有损的编码格式，编码后会损失一些细节，以换取压缩后较小的文件体积。无损的编码格式压缩出来的文件体积较大，这里就不介绍了。</p><p>查看ffmpeg支持的所有的编解码格式：视频编码和音频编码都在内。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -codecs</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>同样所有格式前面都会有相应的字母来表示它的作用，如下：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Codecs:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> D..... = Decoding supported</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> .E.... = Encoding supported</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ..V... = Video codec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ..A... = Audio codec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ..S... = Subtitle codec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ...I.. = Intra frame-only codec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ....L. = Lossy compression</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> .....S = Lossless compression</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>列出所有支持编码格式</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -encoders</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>列出所有支持解码格式</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -decoders</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>显示指定编码格式的详细信息</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -h encoder=mpeg4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>显示指定解码格式的详细信息</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -h decoder=aac</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>查看帮助文档</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">./configure --help</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ffmpeg-命令行的使用"></a>ffmpeg 命令行的使用<a class="hash-link" href="#ffmpeg-命令行的使用" title="Direct link to heading">#</a></h4><p>ffmpeg --help</p><p>或者在dash中查看文档。</p><p>FFmpeg 的命令行参数非常多，可以分成五个部分。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ffmpeg </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> -i </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>上面命令中，五个部分的参数依次如下。</p><blockquote><ol><li>全局参数</li><li>输入文件参数</li><li>输入文件</li><li>输出文件参数</li><li>输出文件</li></ol></blockquote><p>参数太多的时候，为了便于查看，ffmpeg 命令可以写成多行。</p><blockquote><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ffmpeg </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">全局参数</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">输入文件参数</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-i </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">输入文件</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">输出文件参数</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">输出文件</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></blockquote><p>下面是一个例子。</p><blockquote><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ffmpeg </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-y </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 全局参数</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-c:a libfdk_aac -c:v libx264 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 输入文件参数</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-i input.mp4 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 输入文件</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-c:v libvpx-vp9 -c:a libvorbis </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 输出文件参数</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">output.webm </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 输出文件</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></blockquote><p>上面的命令将 mp4 文件转成 webm 文件，这两个都是容器格式。输入的 mp4 文件的音频编码格式是 aac，视频编码格式是 H.264；输出的 webm 文件的视频编码格式是 VP9，音频格式是 Vorbis。</p><p>如果不指明编码格式，FFmpeg 会自己判断输入文件的编码。因此，上面的命令可以简单写成下面的样子。</p><blockquote><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ffmpeg -i input.avi output.mp4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></blockquote><p>options</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-devices            show available devices</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-codecs             show available codecs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-decoders           show available decoders</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-encoders           show available encoders</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-pix_fmts           show available pixel formats</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-layouts            show standard channel layouts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-sample_fmts        show available audio sample formats</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-colors             show available color names</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-sources device     list sources of the input device</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-sinks device       list sinks of the output device</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-y                  overwrite output files</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-n                  never overwrite output files</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>参考： <a href="https://gist.github.com/yxibng/8e9fd37081519b98012c7d56be98d14a#file-ffmpeg-md" target="_blank" rel="noopener noreferrer">https://gist.github.com/yxibng/8e9fd37081519b98012c7d56be98d14a#file-ffmpeg-md</a></p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="音频转码"></a>音频转码<a class="hash-link" href="#音频转码" title="Direct link to heading">#</a></h5><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Audio options:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-ab bitrate         audio bitrate (please use -b:a)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-ar rate            set audio sampling rate (in Hz)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-ac channels        set number of audio channels</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-acodec codec       force audio codec (&#x27;copy&#x27; to copy stream)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>操作pcm 的参数</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> # formats</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -f</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> DE s16be           PCM signed 16-bit big-endian</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> DE s16le           PCM signed 16-bit little-endian</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> DE s24be           PCM signed 24-bit big-endian</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> DE s24le           PCM signed 24-bit little-endian</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> DE s32be           PCM signed 32-bit big-endian</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> DE s32le           PCM signed 32-bit little-endian</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> D  s337m           SMPTE 337M</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> DE s8              PCM signed 8-bit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> # codec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> -acodec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> DEAI.S pcm_s16be            PCM signed 16-bit big-endian</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> DEAI.S pcm_s16be_planar     PCM signed 16-bit big-endian planar</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> DEAI.S pcm_s16le            PCM signed 16-bit little-endian</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> DEAI.S pcm_s16le_planar     PCM signed 16-bit little-endian planar</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>示例：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#转码生成新的文件，目标为 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- ar 采样率 44100，</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- ac 双声道，编码格式 aac</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- acodec 编码器 aac</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -i source.mp3 -ar 44100 -ac 2 -acodec aac -y output.m4a</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># 转换为 pcm</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -i source.mp3 -f s16le -acodec pcm_s16le output.raw</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="从mp4中提取"></a>从MP4中提取<a class="hash-link" href="#从mp4中提取" title="Direct link to heading">#</a></h5><ul><li>MP4提取H264</li></ul><p>To extract a raw video from an MP4 or FLV container you should specify the -bsf:v h264_mp4toannexb or -vbfs h264_mp4toannexb option.</p><p>从MP4文件或者flv文件中提取H264文件</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -i test.flv -vcodec copy -an -bsf:v h264_mp4toannexb test.h264</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li>MP4 提取 yuv</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">For example if you want to save the 1st video track of an mp4 file as a yuv420p (p means planar) file:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -i video.mp4 -c:v rawvideo -pix_fmt yuv420p out.yuv</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li><p>MP4中提取aac</p><p>extract aac from mp4</p></li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -i input.mp4 -vn -c:a copy output.m4a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li>Mp4 中提取flv</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -i source.mp4 -c:v libx264 -crf 19 destinationfile.flv</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>参考：<a href="https://stackoverflow.com/questions/8504923/how-to-convert-mp4-video-file-into-flv-format-using-ffmpeg" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/8504923/how-to-convert-mp4-video-file-into-flv-format-using-ffmpeg</a></p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="解码"></a>解码<a class="hash-link" href="#解码" title="Direct link to heading">#</a></h5><ul><li>h264 解码为yuv</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -i file.h264 file.yuv</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>展示编码器的可用参数</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -h encoder=libx264</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -h encoder=h264_videotoolbox</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="容器转换"></a>容器转换<a class="hash-link" href="#容器转换" title="Direct link to heading">#</a></h5><ul><li>mov to mp4</li></ul><p>The command to just stream it to a new container (mp4) needed by some applications like Adobe Premiere Pro <strong>without encoding</strong> (fast) is:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -i input.mov -qscale 0 output.mp4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>Alternative</strong> as mentioned in the comments, which re-encodes with best quaility (<code>-qscale 0</code>):</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -i input.mov -q:v 0 output.mp4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><a href="https://stackoverflow.com/questions/12026381/ffmpeg-converting-mov-files-to-mp4" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/12026381/ffmpeg-converting-mov-files-to-mp4</a></p><hr><ul><li>264-&gt;mp4</li></ul><p><a href="https://askubuntu.com/questions/690015/how-can-i-convert-264-file-to-mp4" target="_blank" rel="noopener noreferrer">https://askubuntu.com/questions/690015/how-can-i-convert-264-file-to-mp4</a></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">fmpeg -framerate 24 -i input.264 -c copy output.mp4</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ffprobe"></a>ffprobe<a class="hash-link" href="#ffprobe" title="Direct link to heading">#</a></h4><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/dingyusong/Downloads/fftest ffprobe -i out_0021.mp4 </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="转封装"></a>转封装<a class="hash-link" href="#转封装" title="Direct link to heading">#</a></h4><ul><li>muxer和demuxer</li></ul><p>muxer是合并将视频文件、音频文件和字幕文件合并为某一个视频格式。如，可将a.avi, a.mp3, a.srt用muxer合并为mkv格式的视频文件。demuxer是拆分这些文件的。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="采集设备"></a>采集设备<a class="hash-link" href="#采集设备" title="Direct link to heading">#</a></h4><p>设备枚举
查看设备列表</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ffmpeg -hide_banner -devices</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Devices:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">D. = Demuxing supported</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">.E = Muxing supported</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> --</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">D avfoundation AVFoundation input device</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">D lavfi  Libavfilter virtual input device</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> E sdl,sdl2 SDL2 output device</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>可以看到输入设备有：avfoundation，lavfi
输出设备有：sdl</p><p>设备采集举例：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$  ffmpeg -f avfoundation -list_devices true -i &quot; &quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">看到了 如下设备</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[AVFoundation input device @ 0x7fac75c048c0] AVFoundation video devices:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[AVFoundation input device @ 0x7fac75c048c0] [0] FaceTime高清摄像头（内建）</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[AVFoundation input device @ 0x7fac75c048c0] [1] Capture screen 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[AVFoundation input device @ 0x7fac75c048c0] AVFoundation audio devices:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[AVFoundation input device @ 0x7fac75c048c0] [0] Built-in Microphone</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>mac 设备采集</p><p><a href="https://blog.csdn.net/qq_39503880/article/details/108297091" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_39503880/article/details/108297091</a></p><p>采集：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -f avfoundation -video_size 640x480 -framerate 30 -i 1 out_came1.mp4  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>播放：</p><p><code>ffplay out_came1.mp4 </code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="api使用篇"></a>API使用篇<a class="hash-link" href="#api使用篇" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="工具-libavutil"></a>工具-libavutil<a class="hash-link" href="#工具-libavutil" title="Direct link to heading">#</a></h3><p>包括hash器，解码器，各种工具函数。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="封装-libavformat"></a>封装-libavformat<a class="hash-link" href="#封装-libavformat" title="Direct link to heading">#</a></h3><p>流协议，容器格式，基本IO访问。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="编解码-libavcodec"></a>编解码-libavcodec<a class="hash-link" href="#编解码-libavcodec" title="Direct link to heading">#</a></h3><p>一系列编码器的实现。</p><p>不做具体的工作，只是将编解码的模块载入进来。 </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="滤镜-libavfilter"></a>滤镜-libavfilter<a class="hash-link" href="#滤镜-libavfilter" title="Direct link to heading">#</a></h3><p>各种音视频过滤器。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="设备相关-libavdevice"></a>设备相关-libavdevice<a class="hash-link" href="#设备相关-libavdevice" title="Direct link to heading">#</a></h3><p>提供了访问捕获设备和回放设备的接口。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="重采样-libavresample"></a>重采样-libavresample<a class="hash-link" href="#重采样-libavresample" title="Direct link to heading">#</a></h3><p>不常用，常用的是下面这俩</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="libavswresample"></a>libavswresample<a class="hash-link" href="#libavswresample" title="Direct link to heading">#</a></h3><p>提供混音和重采样。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="libavswrescale"></a>libavswrescale<a class="hash-link" href="#libavswrescale" title="Direct link to heading">#</a></h3><p>提供色彩转换和缩放功能。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="实战"></a>实战<a class="hash-link" href="#实战" title="Direct link to heading">#</a></h4><p>TODO：实现MP4视频播放</p><p>TODO：实现MP4音频播放</p><p>TODO：实现一个初级播放器</p><p>TODO：实现音视频同步</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ffplay"></a>ffplay<a class="hash-link" href="#ffplay" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ffplay-播放yuv"></a>ffplay 播放yuv<a class="hash-link" href="#ffplay-播放yuv" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/dingyusong/Downloads ffplay -f rawvideo -video_size 640x360 -pix_fmt yuv420p  demo.yuv</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-css codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token property">需要指定的参数</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">1.</span><span class="token plain"> -video_size 指定yuv的宽高</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">2.</span><span class="token plain"> -pix_fmt 指定yuv的格式</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">yuv的格式名可以通过 ffplay -pix_fmts来查询</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>单独抽出y分量</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/dingyusong/Downloads ffplay -s 640x360 -vf extractplanes=&#x27;y&#x27; demo.yuv </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Option -s is deprecated, use -video_size.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  /Users/dingyusong/Downloads ffplay -video_size 640x360 -vf extractplanes=&#x27;y&#x27; demo.yuv </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">   -vf filtergraph</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           Create the filtergraph specified by filtergraph and use it to filter the video stream.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           filtergraph is a description of the filtergraph to apply to the stream, and must have a single video input and</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           a single video output. In the filtergraph, the input is associated to the label &quot;in&quot;, and the output to the</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           label &quot;out&quot;. See the ffmpeg-filters manual for more information about the filtergraph syntax.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           You can specify this parameter multiple times and cycle through the specified filtergraphs along with the show</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           modes by pressing the key w.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>参考： ffplay播放rtsp,rtmp,yuv和pcm:<a href="https://www.jianshu.com/p/79b31906cdcb" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/79b31906cdcb</a></p><p>x264，x265是对H264的实现，需要自己安装，FFmpeg负责调用。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="初级开发"></a>初级开发<a class="hash-link" href="#初级开发" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ffmpeg日志及目录操作"></a>FFmpeg日志及目录操作<a class="hash-link" href="#ffmpeg日志及目录操作" title="Direct link to heading">#</a></h3><p>日志系统</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#include&lt;libavutil/log.h&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">av_log_set_level(NULL,AV_LOG_INFO);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">av_log(NULL,AV_LOG_ERROR,&quot;open %s failure&quot;,filename);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>常用日志级别</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">AV_LOG_ERROR</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AV_LOG_WARNING</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AV_LOG_INFO</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">DO:clab/09-ffmpeg/01-log </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">编译：clang -g -o log1 log1.c `pkg-config --libs libavutil`</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><hr><p>文件的删除和重命名</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">avpriv_io_delete()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">avpriv_io_move()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><blockquote><p>DO:删除文件和重命名文件(clab/09-ffmpeg/02-file/01_file_delete_rename.c)</p></blockquote><hr><p>目录操作重要函数</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">avio_open_dir()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">avio_read_dir()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">avio_close_dir()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>目录操作重要结构体</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">AVIODirContext</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">操作目录上下文</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AVIODirEntry</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">目录项，存放文件名，文件大小等信息</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><blockquote><p>DO:最简答的list(clab/09-ffmpeg/02-file/02-ffmpeg-list.c)</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ffmpeg基本概念和常用结构体"></a>FFmpeg基本概念和常用结构体<a class="hash-link" href="#ffmpeg基本概念和常用结构体" title="Direct link to heading">#</a></h3><ul><li>多媒体文件其实是个容器</li><li>容器内有很多流（Stream/Track）（音频，视频，字幕等）</li><li>这些流是相互独立的，平行的，就像铁轨一样。</li><li>每种流是由不同的编码器编码的。</li><li>从流中读取的数据称为包。</li><li>一个包中包含一个或多个帧。</li></ul><hr><p>几个重要的结构体</p><ul><li>AVFromatContext</li><li>AVStream</li><li>AVPacket</li></ul><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="复用解复用流操作"></a>复用/解复用,流操作<a class="hash-link" href="#复用解复用流操作" title="Direct link to heading">#</a></h3><p>操作流数据的基本步骤</p><p><img alt="image-20211007082637184" src="/assets/images/image-20211007082637184-9eceabb291377268277e5fa9b8d99bef.png"></p><ul><li>解复用 ： avformat_open_input</li><li>获取流（一个多媒体文件包含多路流）</li><li>读数据包（一个数据包中包含一个或多个数据帧，读出数据包才能进行各种处理，变声，倍速等）</li><li>操作之后释放资源。</li></ul><p>DO：打印多媒体信息</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">1. 注册类</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">av_register_all</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2. 打开关闭</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">avformat_open_input()/avformat_close_input()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">3. 提取信息</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">av_dump_format()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><img alt="image-20211007224936067" src="/assets/images/image-20211007224936067-c31c9349bed1652b83c6d5b0bcb14ac2.png"></p><p><img alt="image-20211007225243547" src="/assets/images/image-20211007225243547-0c4784853f422e52238dd1cb5de26bb1.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="参考文档"></a>参考文档<a class="hash-link" href="#参考文档" title="Direct link to heading">#</a></h2><ul><li><a href="https://ffmpeg.org/documentation.html" target="_blank" rel="noopener noreferrer">https://ffmpeg.org/documentation.html</a></li><li><a href="https://trac.ffmpeg.org/wiki" target="_blank" rel="noopener noreferrer">https://trac.ffmpeg.org/wiki</a></li><li><a href="https://blog.csdn.net/leixiaohua1020/article/details/15811977" target="_blank" rel="noopener noreferrer">[总结]FFMPEG视音频编解码零基础学习方法</a></li><li>FFmpeg从入门到精通.pdf</li><li><a href="https://coding.imooc.com/class/chapter/415.html#Anchor" target="_blank" rel="noopener noreferrer">编程必备基础-音视频小白系统入门课</a></li><li><a href="https://coding.imooc.com/class/chapter/279.html#Anchor" target="_blank" rel="noopener noreferrer">经典再升级-FFmpeg音视频核心技术全面精讲+实战</a></li><li>补充知识-移动端视频入门-慕课</li><li>多读优秀开源代码ijkplayer，ffplayer</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="dys-typora-open://mine/survival/docs/音视频/学习资料/三方框架/FFMpeg/FFmpeg.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/音视频/服务端/服务器"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 服务器</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/音视频/学习资料/三方框架/WebRTC/WebRTC"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">WebRTC »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#背景和常识" class="table-of-contents__link">背景和常识</a></li><li><a href="#编译和集成" class="table-of-contents__link">编译和集成</a><ul><li><a href="#mac的编译" class="table-of-contents__link">Mac的编译</a></li><li><a href="#ios的编译" class="table-of-contents__link">iOS的编译</a></li><li><a href="#编译官方demo" class="table-of-contents__link">编译官方demo</a></li></ul></li><li><a href="#使用ffmpeg库" class="table-of-contents__link">使用FFMpeg库</a></li><li><a href="#命令行使用篇" class="table-of-contents__link">命令行使用篇</a><ul><li><a href="#基本信息查询命令" class="table-of-contents__link">基本信息查询命令</a></li><li><a href="#录制命令" class="table-of-contents__link">录制命令</a></li><li><a href="#分解复用命令" class="table-of-contents__link">分解/复用命令</a></li><li><a href="#处理原始数据命令" class="table-of-contents__link">处理原始数据命令</a></li><li><a href="#裁剪与合并命令" class="table-of-contents__link">裁剪与合并命令</a></li><li><a href="#图片视频互转命令" class="table-of-contents__link">图片/视频互转命令</a></li><li><a href="#直播相关命令" class="table-of-contents__link">直播相关命令</a></li><li><a href="#滤镜命令" class="table-of-contents__link">滤镜命令</a></li></ul></li><li><a href="#api使用篇" class="table-of-contents__link">API使用篇</a><ul><li><a href="#工具-libavutil" class="table-of-contents__link">工具-libavutil</a></li><li><a href="#封装-libavformat" class="table-of-contents__link">封装-libavformat</a></li><li><a href="#编解码-libavcodec" class="table-of-contents__link">编解码-libavcodec</a></li><li><a href="#滤镜-libavfilter" class="table-of-contents__link">滤镜-libavfilter</a></li><li><a href="#设备相关-libavdevice" class="table-of-contents__link">设备相关-libavdevice</a></li><li><a href="#重采样-libavresample" class="table-of-contents__link">重采样-libavresample</a></li><li><a href="#libavswresample" class="table-of-contents__link">libavswresample</a></li><li><a href="#libavswrescale" class="table-of-contents__link">libavswrescale</a></li></ul></li><li><a href="#ffplay" class="table-of-contents__link">ffplay</a><ul><li><a href="#ffplay-播放yuv" class="table-of-contents__link">ffplay 播放yuv</a></li></ul></li><li><a href="#初级开发" class="table-of-contents__link">初级开发</a><ul><li><a href="#ffmpeg日志及目录操作" class="table-of-contents__link">FFmpeg日志及目录操作</a></li><li><a href="#ffmpeg基本概念和常用结构体" class="table-of-contents__link">FFmpeg基本概念和常用结构体</a></li><li><a href="#复用解复用流操作" class="table-of-contents__link">复用/解复用,流操作</a></li></ul></li><li><a href="#参考文档" class="table-of-contents__link">参考文档</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.65a50636.js"></script>
<script src="/runtime~main.b175e2de.js"></script>
<script src="/main.777b260c.js"></script>
<script src="/1.5f7a006f.js"></script>
<script src="/260.fc337f83.js"></script>
<script src="/261.cd474b1f.js"></script>
<script src="/935f2afb.42cf00cb.js"></script>
<script src="/259.fa9b4b3b.js"></script>
<script src="/ec34eea2.7ee08189.js"></script>
</body>
</html>