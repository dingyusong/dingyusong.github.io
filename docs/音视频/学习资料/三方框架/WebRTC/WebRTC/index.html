<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Blog Atom Feed"><title data-react-helmet="true">WebRTC | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="WebRTC | My Site"><meta data-react-helmet="true" name="description" content="WebRTC"><meta data-react-helmet="true" property="og:description" content="WebRTC"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/音视频/学习资料/三方框架/WebRTC/WebRTC"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/音视频/学习资料/三方框架/WebRTC/WebRTC"><link rel="stylesheet" href="/styles.8cfbcdec.css">
<link rel="preload" href="/styles.e736442d.js" as="script">
<link rel="preload" href="/runtime~main.500606b1.js" as="script">
<link rel="preload" href="/main.e34cadf8.js" as="script">
<link rel="preload" href="/1.3353372a.js" as="script">
<link rel="preload" href="/256.3f6603bc.js" as="script">
<link rel="preload" href="/257.427a7301.js" as="script">
<link rel="preload" href="/935f2afb.0ee8c40a.js" as="script">
<link rel="preload" href="/255.24175022.js" as="script">
<link rel="preload" href="/1e98a7d9.8f9c716f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a><a class="navbar__item navbar__link" href="/docs/编程基础/编程基础/编程基础">编程基础</a><a class="navbar__item navbar__link" href="/docs/编程语言/编程语言">编程语言</a><a class="navbar__item navbar__link" href="/docs/工具/常用工具">工具</a><a class="navbar__item navbar__link" href="/docs/应用开发/应用开发">应用开发</a><a class="navbar__item navbar__link" href="/docs/Apple/iOS开发/iOS开发">Apple</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/音视频/音视频">音视频</a><a class="navbar__item navbar__link" href="/docs/项目/项目">项目</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/编程基础/编程基础/编程基础">编程基础</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/编程语言/编程语言">编程语言</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/工具/常用工具">工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/应用开发/应用开发">应用开发</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Apple/iOS开发/iOS开发">Apple</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/音视频/音视频">音视频</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/项目/项目">项目</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/音视频">音视频</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">音视频/音频</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Audio/Audio">Audio</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Audio/音频采集">音频采集</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Audio/音频存储">音频存储</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Audio/音频处理">音频处理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Audio/音频编解码">音频编解码</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Audio/音频播放">音频播放</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">音视频/视频</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Video/Video">Video</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Video/视频采集">视频采集</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Video/视频存储">视频存储</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Video/视频处理">视频处理</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Video/视频编解码">视频编解码</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/音视频/Video/视频渲染">视频渲染</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/同步/音视频同步">音视频同步</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/封装/音视频封装">音视频封装</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/传输/音视频传输">音视频传输</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/音视频/服务端/服务器">服务器</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">音视频/重要框架</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/音视频/学习资料/三方框架/FFMpeg/FFmpeg">FFmpeg</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/音视频/学习资料/三方框架/WebRTC/WebRTC">WebRTC</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">WebRTC</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc"></a>WebRTC<a class="hash-link" href="#webrtc" title="Direct link to heading">#</a></h1><p>[toc]</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc介绍"></a>WebRTC介绍<a class="hash-link" href="#webrtc介绍" title="Direct link to heading">#</a></h2><p>对于浏览器来说，他已经集成好了。不需要额外引用。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc原理与架构"></a>WebRTC原理与架构<a class="hash-link" href="#webrtc原理与架构" title="Direct link to heading">#</a></h2><p>本章首先带大家了解WebRTC 架构，并通过讲解WebRTC目录结构与各模块的作用，从整体上把握好WebRTC，为后面的实战学习打下坚实的理论基础。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc架构"></a>webrtc架构<a class="hash-link" href="#webrtc架构" title="Direct link to heading">#</a></h3><p><img alt="ogh6468mac" src="/assets/images/ogh6468mac-12e241a9d8b42b5ba595d9c666957a26.png"></p><ul><li>整理分为两层： 应用层、核心层</li><li>绿色部分是核心部分， 是WebRTC提供的核心功能；</li><li>紫色部分是浏览器提供的JS的API层； 即 浏览器对WebRTC核心层的C++ API 做了一层封装， 封装成了JS接口；</li><li><strong>最上面的箭头是<code>上层应用</code>了，</strong> <strong><code>上层应用</code> 可以在 浏览器中 直接访问 浏览器提供的API；</strong></li><li>最终调用到核心层【蓝色虚线框、可重载！！】</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc目录结构"></a>WebRTC目录结构<a class="hash-link" href="#webrtc目录结构" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc运行机制"></a>WebRTC运行机制<a class="hash-link" href="#webrtc运行机制" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="轨"></a>轨<a class="hash-link" href="#轨" title="Direct link to heading">#</a></h4><ul><li>Track</li><li>视频与音频是不相交的，单独存放；</li><li>两路音频也是两路轨，不相交；</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="流"></a>流<a class="hash-link" href="#流" title="Direct link to heading">#</a></h4><ul><li>MediaStream</li><li>借鉴了传统媒体流的概念； 传统媒体流中也包括了音频轨、视屏轨等；</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc重要的类"></a>WebRTC重要的类<a class="hash-link" href="#webrtc重要的类" title="Direct link to heading">#</a></h4><ul><li>MediaStream 传输媒体数据；</li><li>RTCPeerConnection【核心】 这个WebRTC中最为重要的类， 是一个大而全的类，包含了很多重要的功能；  设计优势： 在应用层应用时方便， 只需要创建一个<code>RTCPeerConnection</code>连接， 然后把一个<code>MediaStream</code>媒体流搭载上去， 随后的细节就不用管了， 其中所有的传输、寻路等细节， 都由<code>RTCPeerConnection</code>内部封装实现了，底层封装做了很多相关的工作；</li><li>RTCDataChannel 非音视频的数据（如<code>文本文件、二进制数据</code>等），都通过<code>RTCDataChannel</code>来传输； <code>RTCDataChannel</code>是通过<code>RTCPeerConnection</code>获取的； 传输非音视频的数据时， 应用层要做的， 就是拿到一个<code>RTCDataChannel</code>对象，把<code>数据</code>搭载上去即可；</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="peerconnection调用过程"></a>PeerConnection调用过程<a class="hash-link" href="#peerconnection调用过程" title="Direct link to heading">#</a></h4><p><img alt="ogh6468mac" src="/assets/images/w6pu4x4oth-918bc1d4e4dc032624279d8321a536cc.png"></p><ul><li>Worker 线程、Signaling线程， 创建<code>PeerConnectionFactory</code>， <code>PeerConnectionFactory</code>可以 创建<code>PeerConnection</code>、<code>LocalMediaStream</code>、<code>LocalVide/AudioTrack</code>等；</li><li>多方进行通讯时， 每一方（每一个参与单位）都是对应一个Stream；</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="调用时序图"></a>调用时序图<a class="hash-link" href="#调用时序图" title="Direct link to heading">#</a></h4><p><img alt="ogh6468mac" src="/assets/images/nbgsvjdwj3-e84b3b7e00c10e06bb511c87dfae27b8.png"></p><ul><li>首先应用层<code>Application</code>【注意这里<code>Application</code>本身就是一个<code>PeerConnectionObserver</code>】， 创建出一个<code>PeerConnectionFactory</code>【<code>CreatePeerConnectionFactory</code>】；</li><li><code>PeerConnectionFactory</code>触发<code>CreatePeerConnection</code>、 <code>CreateLocalMediaStream</code>、<code>CreateLocalVideoTrack</code>、<code>CreateLocalAudioTrack</code> 创建了<code>PeerConnection</code>、<code>MediaStream</code>等等实例；</li><li>然后通过<code>AddTrack</code>， 把各种轨（track）加到流（<code>LocalMediaStream</code>）中去， 然后通过<code>AddStream</code>， 把流加到<code>PeerConnection</code>中；</li><li>流加到连接之后， 会通过<code>CommitStreamChanges</code>提交流的变化； 当流发生变化的时候， 会触发<code>OnSignalingMessage</code>事件，创造出一个<code>offer</code>【SDP描述信息】；</li><li>有了<code>offer</code>【SDP描述信息】之后， 就会通过应用层【Application】，通过信令， 发送到远端【Send offer to the remote peer】；</li></ul><blockquote><p>【SDP描述信息】内容： 有哪些音视频数据，音视频数据的格式分别是什么，传输地址是什么等；</p></blockquote><ul><li>远端收到数据后，则根据<code>offer</code>SDP， 回复一个<code>answer</code>SDP【Get answer from the remote peer】， 交给本地信令；</li><li>信令收到远端的<code>answer</code>SDP之后， 会把信息传给本地<code>PeerConnection</code>【<code>ProcessSignalingMessage</code>】， 本地<code>PeerConnection</code>就会拿到对方的<code>媒体流信息</code>、传输端口、传输地址；</li></ul><blockquote><p>至此，远端和本地就打通连接， 可以相互传<code>媒体数据</code>；</p></blockquote><ul><li><code>远端数据</code>来的时候， <code>PeerConnection</code>还会将<code>远端的流</code>添加到<code>Application</code>中去； 【OnAddStream（注意区分AddStream）】</li></ul><p>参考：<a href="https://cloud.tencent.com/developer/article/1677612" target="_blank" rel="noopener noreferrer">WebRTC | 原理、架构、框架目录、运行机制、核心类、PeerConnection调用过程等详解</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="web服务器原理与nodejs搭建"></a>Web服务器原理与Nodejs搭建<a class="hash-link" href="#web服务器原理与nodejs搭建" title="Direct link to heading">#</a></h2><p>在开始正式学习 WebRTC前先将实验环境搭建好，为后面做各种实验准备好环境。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="web服务器工作原理"></a>Web服务器工作原理<a class="hash-link" href="#web服务器工作原理" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="nodejs运行原理"></a>nodejs运行原理<a class="hash-link" href="#nodejs运行原理" title="Direct link to heading">#</a></h4><p><img alt="ogh6468mac" src="/assets/images/image-20210703223244816-ddd07a16753bb25aaca9c017d00ff60d.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="javascript解析"></a>JavaScript解析<a class="hash-link" href="#javascript解析" title="Direct link to heading">#</a></h4><p><img alt="ogh6468mac" src="/assets/images/image-20210703223340496-a0bb76256eaebb2fa5890d06c8a0632e.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="nodejs事件处理"></a>nodejs事件处理<a class="hash-link" href="#nodejs事件处理" title="Direct link to heading">#</a></h4><p><img alt="ogh6468mac" src="/assets/images/image-20210703224513887-58d62a4b8f1599d708b67493a662a4be.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="两个v8引擎"></a>两个V8引擎<a class="hash-link" href="#两个v8引擎" title="Direct link to heading">#</a></h4><p><img alt="ogh6468mac" src="/assets/images/image-20210703224648462-1aaeb17721eaac35f677f7ae043b4af1.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="nodejs环境搭建"></a>Nodejs环境搭建<a class="hash-link" href="#nodejs环境搭建" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="最简单的http服务"></a>最简单的http服务<a class="hash-link" href="#最简单的http服务" title="Direct link to heading">#</a></h3><p>启动http服务</p><ol><li>node app.js</li><li>nohub node app.js &amp;</li><li>forever start app.js</li></ol><ul><li>forever</li></ul><p>保证http服务不退出</p><p><a href="https://www.npmjs.com/package/forever" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/forever</a></p><p>使用forever让node.js持久运行：<a href="https://www.jianshu.com/p/669a618f3212" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/669a618f3212</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="创建https服务"></a>创建https服务<a class="hash-link" href="#创建https服务" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="实现一个真正的-web服务器"></a>实现一个真正的 Web服务器<a class="hash-link" href="#实现一个真正的-web服务器" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="javascript必备知识"></a>JavaScript必备知识<a class="hash-link" href="#javascript必备知识" title="Direct link to heading">#</a></h2><p>为了考虑到有些同学对JS不太熟悉，本章专门为大家补充了JS必备的基础知识回顾。简单回顾一下JavaScript语法，让不熟悉 Js的同学可以快速上手。在后面的实现中大量使用了 JavaScript语言，调用 WebRTC API，其流程与其它端调用 WebRTC API逻辑基本是一致的。...</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="javascript调试"></a>JavaScript调试<a class="hash-link" href="#javascript调试" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="变量与基本运算"></a>变量与基本运算<a class="hash-link" href="#变量与基本运算" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="判断循环与函数"></a>判断循环与函数<a class="hash-link" href="#判断循环与函数" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc设备管理"></a>WebRTC设备管理<a class="hash-link" href="#webrtc设备管理" title="Direct link to heading">#</a></h2><p>本章带大家基于WebRTC实现音视频设备选择，包括音频设备、视频设备。通过本章的学习大家可以掌握好如何使用WebRTC实现音视频设备的选择。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc获取音视频设备"></a>WebRTC获取音视频设备<a class="hash-link" href="#webrtc获取音视频设备" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="在页面中显示获取到的设备"></a>在页面中显示获取到的设备<a class="hash-link" href="#在页面中显示获取到的设备" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc音视频数据采集"></a>WebRTC音视频数据采集<a class="hash-link" href="#webrtc音视频数据采集" title="Direct link to heading">#</a></h2><p>本章讲解WebRTC如何实现音视频数据采集，其中包括：1.通过 WebCam 获取视频流，2.采集音频流，3.设置Camera分辨率 ，4.视频渲染。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc音视频数据采集-1"></a>WebRTC音视频数据采集<a class="hash-link" href="#webrtc音视频数据采集-1" title="Direct link to heading">#</a></h3><p>基本格式</p><p>var promise = navigator.mediaDevices.getUserMedia(constraint);</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtcapi适配"></a>WebRTC<em>API</em>适配<a class="hash-link" href="#webrtcapi适配" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="获取音视频设备的访问权限"></a>获取音视频设备的访问权限<a class="hash-link" href="#获取音视频设备的访问权限" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="视频约束"></a>视频约束<a class="hash-link" href="#视频约束" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="音频约束"></a>音频约束<a class="hash-link" href="#音频约束" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="视频特效"></a>视频特效<a class="hash-link" href="#视频特效" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="从视频中获取图片"></a>从视频中获取图片<a class="hash-link" href="#从视频中获取图片" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc只采集音频数据"></a>WebRTC只采集音频数据<a class="hash-link" href="#webrtc只采集音频数据" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="mediastreamapi及获取视频约束"></a>MediaStreamAPI及获取视频约束<a class="hash-link" href="#mediastreamapi及获取视频约束" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc音视频录制实战"></a>WebRTC音视频录制实战<a class="hash-link" href="#webrtc音视频录制实战" title="Direct link to heading">#</a></h2><p>本章讲解WebRTC录制相关的知识，除了可以录制音视频之外，还可以录制桌面。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc录制基本知识"></a>WebRTC录制基本知识<a class="hash-link" href="#webrtc录制基本知识" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="录制音视频实战"></a>录制音视频实战<a class="hash-link" href="#录制音视频实战" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc采集屏面数据"></a>WebRTC采集屏面数据<a class="hash-link" href="#webrtc采集屏面数据" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc信令服务器实现"></a>WebRTC信令服务器实现<a class="hash-link" href="#webrtc信令服务器实现" title="Direct link to heading">#</a></h2><p>本章为大家讲解WebRTC信令服务器实现，WebRTC规范本身不包括服务器部分，但要想实现正的互通，又必须要有信令服务器。通过本章的讲解你将了解到如何实现一个最简单的信令服务器，以配合我们最终实现 1V1实时音视频互动直播系统。...</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="如何使用socketio发送消息"></a>如何使用socket.io发送消息<a class="hash-link" href="#如何使用socketio发送消息" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc信令服务器原理"></a>WebRTC信令服务器原理<a class="hash-link" href="#webrtc信令服务器原理" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc信令服务器的实现"></a>WebRTC信令服务器的实现<a class="hash-link" href="#webrtc信令服务器的实现" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="利用socketio实现简单聊天室"></a>利用socket.io实现简单聊天室<a class="hash-link" href="#利用socketio实现简单聊天室" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc网络基础补充：p2pstunturnice知识"></a>WebRTC网络基础补充：P2P/STUN/TURN/ICE知识<a class="hash-link" href="#webrtc网络基础补充：p2pstunturnice知识" title="Direct link to heading">#</a></h2><p>本章补充WebRTC网络的基本知识，要想知道WebRTC是如何选择端到端通路的，就必须对这部分知识有深入的理解，否则在后期深入学习 WebRTC时，你会感到非常迷茫。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc网络传输基本知识"></a>WebRTC网络传输基本知识<a class="hash-link" href="#webrtc网络传输基本知识" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="nat打洞原理"></a>NAT打洞原理<a class="hash-link" href="#nat打洞原理" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="nat类型检测"></a>NAT类型检测<a class="hash-link" href="#nat类型检测" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="stun协议"></a>STUN协议<a class="hash-link" href="#stun协议" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="turn协议"></a>TURN协议<a class="hash-link" href="#turn协议" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ice框架"></a>ICE框架<a class="hash-link" href="#ice框架" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="网络分析方法-tcpdump-与-wireshark"></a>网络分析方法 tcpdump 与 wireshark<a class="hash-link" href="#网络分析方法-tcpdump-与-wireshark" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tcpdump"></a>tcpdump<a class="hash-link" href="#tcpdump" title="Direct link to heading">#</a></h4><p>sudo -i</p><p>ifconfig</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="wireshark"></a>Wireshark<a class="hash-link" href="#wireshark" title="Direct link to heading">#</a></h4><p>wireshark 打开 cap文件。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="网络分析方法-tcpdump-与-wireshark实战"></a>网络分析方法 tcpdump 与 wireshark实战<a class="hash-link" href="#网络分析方法-tcpdump-与-wireshark实战" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="搭建turn服务"></a>搭建TURN服务<a class="hash-link" href="#搭建turn服务" title="Direct link to heading">#</a></h3><p>启动后使用命令查看：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">➜  ~ netstat -nptl</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(Not all processes could be identified, non-owned process info</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> will not be shown, you would have to be root to see it all.)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Active Internet connections (only servers)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      -</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      -</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">tcp6       0      0 :::22                   :::*                    LISTEN      -</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="端对端1v1传输基本流程"></a>端对端1V1传输基本流程<a class="hash-link" href="#端对端1v1传输基本流程" title="Direct link to heading">#</a></h2><p>本章讲解端对端传输如何进行媒体能力的协商，以及其处理的基本流程。这部分知识非常重要，了解了这部分知识基本上就撑握了WebRTC的一半，它们是实现真正的 1V1实时互动直播的基础。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="媒体能力协商过程"></a>媒体能力协商过程<a class="hash-link" href="#媒体能力协商过程" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="11连接的基本流程"></a>1:1连接的基本流程<a class="hash-link" href="#11连接的基本流程" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="本机内的11音视频互通"></a>本机内的1:1音视频互通<a class="hash-link" href="#本机内的11音视频互通" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="获取-offeranswer-创建的-sdp"></a>获取 offer/answer 创建的 SDP<a class="hash-link" href="#获取-offeranswer-创建的-sdp" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc核心之sdp详解"></a>WebRTC核心之SDP详解<a class="hash-link" href="#webrtc核心之sdp详解" title="Direct link to heading">#</a></h2><p>SDP可以说是 WebRTC 的核心，因为双方进行通信的参数都在其中，如使用的编解码器是多少，码流是多大，有多少个媒体流等等这些都在 SDP中描述着。所以必须要非常清楚每一行的含义。而往往这部分知识很复杂，能了解清楚的人少之又少，从而导致对 WebRTC的理解很难深入下去...</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="sdp规范"></a>SDP规范<a class="hash-link" href="#sdp规范" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc中的sdp"></a>WebRTC中的SDP<a class="hash-link" href="#webrtc中的sdp" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc中offer_answersdp"></a>WebRTC中Offer_AnswerSDP<a class="hash-link" href="#webrtc中offer_answersdp" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="实现1v1音视频实时互动直播系统"></a>实现1V1音视频实时互动直播系统<a class="hash-link" href="#实现1v1音视频实时互动直播系统" title="Direct link to heading">#</a></h3><p>本章将带你学习真正的1V1音视频实时互动直播系统的实现。这部分内容比较重，里边有大量的实现，相信同学位可以从本章收获大量的知识。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="stun_turn服务器搭建"></a>STUN_TURN服务器搭建<a class="hash-link" href="#stun_turn服务器搭建" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="再论rtcpeerconnection"></a>再论RTCPeerConnection<a class="hash-link" href="#再论rtcpeerconnection" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="直播系统中的信令及其逻辑关系"></a>直播系统中的信令及其逻辑关系<a class="hash-link" href="#直播系统中的信令及其逻辑关系" title="Direct link to heading">#</a></h3><p>直播系统天然的有room的概念。socket一样。</p><p>客户端。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="实现11音视频实时互动信令服务器"></a>实现1:1音视频实时互动信令服务器<a class="hash-link" href="#实现11音视频实时互动信令服务器" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="再论createoffer"></a>再论CreateOffer<a class="hash-link" href="#再论createoffer" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc客户端状态机及处理逻辑"></a>WebRTC客户端状态机及处理逻辑<a class="hash-link" href="#webrtc客户端状态机及处理逻辑" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc客户端的实现"></a>WebRTC客户端的实现<a class="hash-link" href="#webrtc客户端的实现" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="共享远程桌面"></a>共享远程桌面<a class="hash-link" href="#共享远程桌面" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc核心之rtp-媒体控制与数据统计"></a>WebRTC核心之RTP 媒体控制与数据统计<a class="hash-link" href="#webrtc核心之rtp-媒体控制与数据统计" title="Direct link to heading">#</a></h2><p>WebRTC提供了非常精细化的管理。大家除了可以使用非常方便的上层接口来使用 WebRTC之外，还可以通过对 Sender/Receiver的控制，对网络流量进行控制。另外还可以通过 WebRTC统计数据进行网络质量分析。这些知识你都可以通过本章的内容学习到。...</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="rtprreceiver发送器"></a>RTPRReceiver发送器<a class="hash-link" href="#rtprreceiver发送器" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="rtpsender发送器"></a>RTPSender发送器<a class="hash-link" href="#rtpsender发送器" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="传输速率的控制"></a>传输速率的控制<a class="hash-link" href="#传输速率的控制" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc统计信息"></a>WebRTC统计信息<a class="hash-link" href="#webrtc统计信息" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc非音视频数据传输"></a>WebRTC非音视频数据传输<a class="hash-link" href="#webrtc非音视频数据传输" title="Direct link to heading">#</a></h2><p>本章带大家基于WebRTC实现多端非音视频数据传输，其中包括：1.文本聊天，2.传输文件，通过本章的学习大家可以掌握好如何用WebRTC的数据通道，传输非音视频数据。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="传输非音视频数据基础知识"></a>传输非音视频数据基础知识<a class="hash-link" href="#传输非音视频数据基础知识" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="端到端文本聊天"></a>端到端文本聊天<a class="hash-link" href="#端到端文本聊天" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="文件实时传输"></a>文件实时传输<a class="hash-link" href="#文件实时传输" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtc实时数据传输网络协议详解"></a>WebRTC实时数据传输网络协议详解<a class="hash-link" href="#webrtc实时数据传输网络协议详解" title="Direct link to heading">#</a></h2><p>本章为大家讲解 基于WebRTC实现实时数据传输相关网络协议知识，RTP/RTCP协议详解，DTSL/SRTP，最后通过 WireShark 分析数包，让大家真正掌握好WebRTC实时数据传输这块的核心技术。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="rtp-srtp协议头讲解"></a>RTP-SRTP协议头讲解<a class="hash-link" href="#rtp-srtp协议头讲解" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="rtcp中的sr与rr报文"></a>RTCP中的SR与RR报文<a class="hash-link" href="#rtcp中的sr与rr报文" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="dtsl"></a>DTSL<a class="hash-link" href="#dtsl" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="wireshark分析rtp-rtcp包"></a>wireshark分析rtp-rtcp包<a class="hash-link" href="#wireshark分析rtp-rtcp包" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="dtls与srtp-的关系"></a>DTLS与SRTP 的关系<a class="hash-link" href="#dtls与srtp-的关系" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="android端与浏览器互通"></a>Android端与浏览器互通<a class="hash-link" href="#android端与浏览器互通" title="Direct link to heading">#</a></h2><p>浏览器与移动端之间的互通是行业痛点，很多公司，很多工程师都搞不定这块，本章将通过Android与浏览器的互通来让你了解其它端与浏览器之间是如何实现互通的。知道了Android端，其它端的流程也是一样的。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="android与浏览器互通基本知识"></a>Android与浏览器互通基本知识<a class="hash-link" href="#android与浏览器互通基本知识" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webrtcnative开发逻辑"></a>WebRTCNative开发逻辑<a class="hash-link" href="#webrtcnative开发逻辑" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="权限申请-库的引入与界面"></a>权限申请-库的引入与界面<a class="hash-link" href="#权限申请-库的引入与界面" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="通过socketio实现信令收发"></a>通过socket.io实现信令收发<a class="hash-link" href="#通过socketio实现信令收发" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="andorid与浏览器互通"></a>Andorid与浏览器互通<a class="hash-link" href="#andorid与浏览器互通" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ios端与浏览器互通"></a>iOS端与浏览器互通<a class="hash-link" href="#ios端与浏览器互通" title="Direct link to heading">#</a></h2><p>本章将向你讲解iOS App与浏览器之间的互通，来让你了解iOS是如何使用WebRTC的。当本章讲解完后，我们就实现了浏览器与浏览器、Android App 与浏览器、iOS App与浏览器、iOS与Android App 之间的互通。这样就实现了一套完整的1对1通话Demo ...</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ios权限获取"></a>iOS权限获取<a class="hash-link" href="#ios权限获取" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ios引入webrtc库"></a>iOS引入WebRTC库<a class="hash-link" href="#ios引入webrtc库" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ios端socketio的使用"></a>iOS端SocketIO的使用<a class="hash-link" href="#ios端socketio的使用" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ios界面布局"></a>iOS界面布局<a class="hash-link" href="#ios界面布局" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ios本地视频采集与展示"></a>iOS本地视频采集与展示<a class="hash-link" href="#ios本地视频采集与展示" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ios端rtcpeerconnection"></a>iOS端RTCPeerConnection<a class="hash-link" href="#ios端rtcpeerconnection" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ios媒体协商"></a>iOS媒体协商<a class="hash-link" href="#ios媒体协商" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ios远端视频渲染"></a>iOS远端视频渲染<a class="hash-link" href="#ios远端视频渲染" title="Direct link to heading">#</a></h3><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="https-服务"></a>HTTPS 服务<a class="hash-link" href="#https-服务" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="总结"></a>总结<a class="hash-link" href="#总结" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="资源汇总"></a>资源汇总<a class="hash-link" href="#资源汇总" title="Direct link to heading">#</a></h2><ul><li><p>官方API文档：<a href="https://www.w3.org/TR/webrtc/#toc" target="_blank" rel="noopener noreferrer">https://www.w3.org/TR/webrtc/#toc</a></p></li><li><p>webrtc中文站：<a href="https://webrtc.org.cn/" target="_blank" rel="noopener noreferrer">https://webrtc.org.cn/</a></p></li><li><p><a href="https://rtcdeveloper.com/t/topic/435" target="_blank" rel="noopener noreferrer">WebRTC 学习资源，以及相关 Demo</a></p></li><li><p><a href="https://coding.imooc.com/class/chapter/329.html#Anchor" target="_blank" rel="noopener noreferrer">WebRTC实时互动直播技术入门与实战 5G时代必备技能</a></p></li><li><p><a href="https://coding.imooc.com/class/chapter/387.html#Anchor" target="_blank" rel="noopener noreferrer">百万级高并发WebRTC流媒体服务器设计与开发</a></p></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="dys-typora-open://mine/survival/docs/音视频/学习资料/三方框架/WebRTC/WebRTC.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/音视频/学习资料/三方框架/FFMpeg/FFmpeg"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« FFmpeg</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#webrtc介绍" class="table-of-contents__link">WebRTC介绍</a></li><li><a href="#webrtc原理与架构" class="table-of-contents__link">WebRTC原理与架构</a><ul><li><a href="#webrtc架构" class="table-of-contents__link">webrtc架构</a></li><li><a href="#webrtc目录结构" class="table-of-contents__link">WebRTC目录结构</a></li><li><a href="#webrtc运行机制" class="table-of-contents__link">WebRTC运行机制</a></li></ul></li><li><a href="#web服务器原理与nodejs搭建" class="table-of-contents__link">Web服务器原理与Nodejs搭建</a><ul><li><a href="#web服务器工作原理" class="table-of-contents__link">Web服务器工作原理</a></li><li><a href="#nodejs环境搭建" class="table-of-contents__link">Nodejs环境搭建</a></li><li><a href="#最简单的http服务" class="table-of-contents__link">最简单的http服务</a></li><li><a href="#创建https服务" class="table-of-contents__link">创建https服务</a></li><li><a href="#实现一个真正的-web服务器" class="table-of-contents__link">实现一个真正的 Web服务器</a></li></ul></li><li><a href="#javascript必备知识" class="table-of-contents__link">JavaScript必备知识</a><ul><li><a href="#javascript调试" class="table-of-contents__link">JavaScript调试</a></li><li><a href="#变量与基本运算" class="table-of-contents__link">变量与基本运算</a></li><li><a href="#判断循环与函数" class="table-of-contents__link">判断循环与函数</a></li></ul></li><li><a href="#webrtc设备管理" class="table-of-contents__link">WebRTC设备管理</a><ul><li><a href="#webrtc获取音视频设备" class="table-of-contents__link">WebRTC获取音视频设备</a></li><li><a href="#在页面中显示获取到的设备" class="table-of-contents__link">在页面中显示获取到的设备</a></li></ul></li><li><a href="#webrtc音视频数据采集" class="table-of-contents__link">WebRTC音视频数据采集</a><ul><li><a href="#webrtc音视频数据采集-1" class="table-of-contents__link">WebRTC音视频数据采集</a></li><li><a href="#webrtcapi适配" class="table-of-contents__link">WebRTC<em>API</em>适配</a></li><li><a href="#获取音视频设备的访问权限" class="table-of-contents__link">获取音视频设备的访问权限</a></li><li><a href="#视频约束" class="table-of-contents__link">视频约束</a></li><li><a href="#音频约束" class="table-of-contents__link">音频约束</a></li><li><a href="#视频特效" class="table-of-contents__link">视频特效</a></li><li><a href="#从视频中获取图片" class="table-of-contents__link">从视频中获取图片</a></li><li><a href="#webrtc只采集音频数据" class="table-of-contents__link">WebRTC只采集音频数据</a></li><li><a href="#mediastreamapi及获取视频约束" class="table-of-contents__link">MediaStreamAPI及获取视频约束</a></li></ul></li><li><a href="#webrtc音视频录制实战" class="table-of-contents__link">WebRTC音视频录制实战</a><ul><li><a href="#webrtc录制基本知识" class="table-of-contents__link">WebRTC录制基本知识</a></li><li><a href="#录制音视频实战" class="table-of-contents__link">录制音视频实战</a></li><li><a href="#webrtc采集屏面数据" class="table-of-contents__link">WebRTC采集屏面数据</a></li></ul></li><li><a href="#webrtc信令服务器实现" class="table-of-contents__link">WebRTC信令服务器实现</a><ul><li><a href="#如何使用socketio发送消息" class="table-of-contents__link">如何使用socket.io发送消息</a></li><li><a href="#webrtc信令服务器原理" class="table-of-contents__link">WebRTC信令服务器原理</a></li><li><a href="#webrtc信令服务器的实现" class="table-of-contents__link">WebRTC信令服务器的实现</a></li><li><a href="#利用socketio实现简单聊天室" class="table-of-contents__link">利用socket.io实现简单聊天室</a></li></ul></li><li><a href="#webrtc网络基础补充：p2pstunturnice知识" class="table-of-contents__link">WebRTC网络基础补充：P2P/STUN/TURN/ICE知识</a><ul><li><a href="#webrtc网络传输基本知识" class="table-of-contents__link">WebRTC网络传输基本知识</a></li><li><a href="#nat打洞原理" class="table-of-contents__link">NAT打洞原理</a></li><li><a href="#nat类型检测" class="table-of-contents__link">NAT类型检测</a></li><li><a href="#stun协议" class="table-of-contents__link">STUN协议</a></li><li><a href="#turn协议" class="table-of-contents__link">TURN协议</a></li><li><a href="#ice框架" class="table-of-contents__link">ICE框架</a></li><li><a href="#网络分析方法-tcpdump-与-wireshark" class="table-of-contents__link">网络分析方法 tcpdump 与 wireshark</a></li><li><a href="#网络分析方法-tcpdump-与-wireshark实战" class="table-of-contents__link">网络分析方法 tcpdump 与 wireshark实战</a></li><li><a href="#搭建turn服务" class="table-of-contents__link">搭建TURN服务</a></li></ul></li><li><a href="#端对端1v1传输基本流程" class="table-of-contents__link">端对端1V1传输基本流程</a><ul><li><a href="#媒体能力协商过程" class="table-of-contents__link">媒体能力协商过程</a></li><li><a href="#11连接的基本流程" class="table-of-contents__link">1:1连接的基本流程</a></li><li><a href="#本机内的11音视频互通" class="table-of-contents__link">本机内的1:1音视频互通</a></li><li><a href="#获取-offeranswer-创建的-sdp" class="table-of-contents__link">获取 offer/answer 创建的 SDP</a></li></ul></li><li><a href="#webrtc核心之sdp详解" class="table-of-contents__link">WebRTC核心之SDP详解</a><ul><li><a href="#sdp规范" class="table-of-contents__link">SDP规范</a></li><li><a href="#webrtc中的sdp" class="table-of-contents__link">WebRTC中的SDP</a></li><li><a href="#webrtc中offer_answersdp" class="table-of-contents__link">WebRTC中Offer_AnswerSDP</a></li><li><a href="#实现1v1音视频实时互动直播系统" class="table-of-contents__link">实现1V1音视频实时互动直播系统</a></li><li><a href="#stun_turn服务器搭建" class="table-of-contents__link">STUN_TURN服务器搭建</a></li><li><a href="#再论rtcpeerconnection" class="table-of-contents__link">再论RTCPeerConnection</a></li><li><a href="#直播系统中的信令及其逻辑关系" class="table-of-contents__link">直播系统中的信令及其逻辑关系</a></li><li><a href="#实现11音视频实时互动信令服务器" class="table-of-contents__link">实现1:1音视频实时互动信令服务器</a></li><li><a href="#再论createoffer" class="table-of-contents__link">再论CreateOffer</a></li><li><a href="#webrtc客户端状态机及处理逻辑" class="table-of-contents__link">WebRTC客户端状态机及处理逻辑</a></li><li><a href="#webrtc客户端的实现" class="table-of-contents__link">WebRTC客户端的实现</a></li><li><a href="#共享远程桌面" class="table-of-contents__link">共享远程桌面</a></li></ul></li><li><a href="#webrtc核心之rtp-媒体控制与数据统计" class="table-of-contents__link">WebRTC核心之RTP 媒体控制与数据统计</a><ul><li><a href="#rtprreceiver发送器" class="table-of-contents__link">RTPRReceiver发送器</a></li><li><a href="#rtpsender发送器" class="table-of-contents__link">RTPSender发送器</a></li><li><a href="#传输速率的控制" class="table-of-contents__link">传输速率的控制</a></li><li><a href="#webrtc统计信息" class="table-of-contents__link">WebRTC统计信息</a></li></ul></li><li><a href="#webrtc非音视频数据传输" class="table-of-contents__link">WebRTC非音视频数据传输</a><ul><li><a href="#传输非音视频数据基础知识" class="table-of-contents__link">传输非音视频数据基础知识</a></li><li><a href="#端到端文本聊天" class="table-of-contents__link">端到端文本聊天</a></li><li><a href="#文件实时传输" class="table-of-contents__link">文件实时传输</a></li></ul></li><li><a href="#webrtc实时数据传输网络协议详解" class="table-of-contents__link">WebRTC实时数据传输网络协议详解</a><ul><li><a href="#rtp-srtp协议头讲解" class="table-of-contents__link">RTP-SRTP协议头讲解</a></li><li><a href="#rtcp中的sr与rr报文" class="table-of-contents__link">RTCP中的SR与RR报文</a></li><li><a href="#dtsl" class="table-of-contents__link">DTSL</a></li><li><a href="#wireshark分析rtp-rtcp包" class="table-of-contents__link">wireshark分析rtp-rtcp包</a></li><li><a href="#dtls与srtp-的关系" class="table-of-contents__link">DTLS与SRTP 的关系</a></li></ul></li><li><a href="#android端与浏览器互通" class="table-of-contents__link">Android端与浏览器互通</a><ul><li><a href="#android与浏览器互通基本知识" class="table-of-contents__link">Android与浏览器互通基本知识</a></li><li><a href="#webrtcnative开发逻辑" class="table-of-contents__link">WebRTCNative开发逻辑</a></li><li><a href="#权限申请-库的引入与界面" class="table-of-contents__link">权限申请-库的引入与界面</a></li><li><a href="#通过socketio实现信令收发" class="table-of-contents__link">通过socket.io实现信令收发</a></li><li><a href="#andorid与浏览器互通" class="table-of-contents__link">Andorid与浏览器互通</a></li></ul></li><li><a href="#ios端与浏览器互通" class="table-of-contents__link">iOS端与浏览器互通</a><ul><li><a href="#ios权限获取" class="table-of-contents__link">iOS权限获取</a></li><li><a href="#ios引入webrtc库" class="table-of-contents__link">iOS引入WebRTC库</a></li><li><a href="#ios端socketio的使用" class="table-of-contents__link">iOS端SocketIO的使用</a></li><li><a href="#ios界面布局" class="table-of-contents__link">iOS界面布局</a></li><li><a href="#ios本地视频采集与展示" class="table-of-contents__link">iOS本地视频采集与展示</a></li><li><a href="#ios端rtcpeerconnection" class="table-of-contents__link">iOS端RTCPeerConnection</a></li><li><a href="#ios媒体协商" class="table-of-contents__link">iOS媒体协商</a></li><li><a href="#ios远端视频渲染" class="table-of-contents__link">iOS远端视频渲染</a></li><li><a href="#https-服务" class="table-of-contents__link">HTTPS 服务</a></li></ul></li><li><a href="#总结" class="table-of-contents__link">总结</a></li><li><a href="#资源汇总" class="table-of-contents__link">资源汇总</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.e736442d.js"></script>
<script src="/runtime~main.500606b1.js"></script>
<script src="/main.e34cadf8.js"></script>
<script src="/1.3353372a.js"></script>
<script src="/256.3f6603bc.js"></script>
<script src="/257.427a7301.js"></script>
<script src="/935f2afb.0ee8c40a.js"></script>
<script src="/255.24175022.js"></script>
<script src="/1e98a7d9.8f9c716f.js"></script>
</body>
</html>