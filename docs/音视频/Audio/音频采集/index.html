<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="My Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="My Site Blog Atom Feed"><title data-react-helmet="true">éŸ³é¢‘é‡‡é›† | My Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="éŸ³é¢‘é‡‡é›† | My Site"><meta data-react-helmet="true" name="description" content="iOS/macOS éŸ³é¢‘é‡‡é›†"><meta data-react-helmet="true" property="og:description" content="iOS/macOS éŸ³é¢‘é‡‡é›†"><meta data-react-helmet="true" property="og:url" content="http://localhost:9999//docs/éŸ³è§†é¢‘/Audio/éŸ³é¢‘é‡‡é›†"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://localhost:9999//docs/éŸ³è§†é¢‘/Audio/éŸ³é¢‘é‡‡é›†"><link rel="stylesheet" href="/styles.8cfbcdec.css">
<link rel="preload" href="/styles.fb1c19b8.js" as="script">
<link rel="preload" href="/runtime~main.cc14fc68.js" as="script">
<link rel="preload" href="/main.c6b7f4ce.js" as="script">
<link rel="preload" href="/1.a9a8f0c0.js" as="script">
<link rel="preload" href="/258.6205818a.js" as="script">
<link rel="preload" href="/259.e50796f0.js" as="script">
<link rel="preload" href="/935f2afb.41d9bdbd.js" as="script">
<link rel="preload" href="/257.eedf933d.js" as="script">
<link rel="preload" href="/ba930f5b.96c14989.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a><a class="navbar__item navbar__link" href="/docs/">åŸºç¡€</a><a class="navbar__item navbar__link" href="/docs/ç¼–ç¨‹è¯­è¨€/ç¼–ç¨‹è¯­è¨€">è¯­è¨€</a><a class="navbar__item navbar__link" href="/docs/å·¥å…·/å¸¸ç”¨å·¥å…·">å·¥å…·</a><a class="navbar__item navbar__link" href="/docs/åº”ç”¨å¼€å‘/åº”ç”¨å¼€å‘">åº”ç”¨å¼€å‘</a><a class="navbar__item navbar__link" href="/docs/Apple/iOSå¼€å‘/iOSå¼€å‘">Apple</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/éŸ³è§†é¢‘/éŸ³è§†é¢‘">éŸ³è§†é¢‘</a><a class="navbar__item navbar__link" href="/docs/é¡¹ç›®/é¡¹ç›®">é¡¹ç›®</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">My Site</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">åŸºç¡€</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ç¼–ç¨‹è¯­è¨€/ç¼–ç¨‹è¯­è¨€">è¯­è¨€</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/å·¥å…·/å¸¸ç”¨å·¥å…·">å·¥å…·</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/åº”ç”¨å¼€å‘/åº”ç”¨å¼€å‘">åº”ç”¨å¼€å‘</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/Apple/iOSå¼€å‘/iOSå¼€å‘">Apple</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/éŸ³è§†é¢‘/éŸ³è§†é¢‘">éŸ³è§†é¢‘</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/é¡¹ç›®/é¡¹ç›®">é¡¹ç›®</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/éŸ³è§†é¢‘/éŸ³è§†é¢‘">éŸ³è§†é¢‘</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">éŸ³è§†é¢‘/éŸ³é¢‘</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/éŸ³è§†é¢‘/Audio/Audio">Audio</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/éŸ³è§†é¢‘/Audio/éŸ³é¢‘é‡‡é›†">éŸ³é¢‘é‡‡é›†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/éŸ³è§†é¢‘/Audio/éŸ³é¢‘å­˜å‚¨">éŸ³é¢‘å­˜å‚¨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/éŸ³è§†é¢‘/Audio/éŸ³é¢‘å¤„ç†">éŸ³é¢‘å¤„ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/éŸ³è§†é¢‘/Audio/éŸ³é¢‘ç¼–è§£ç ">éŸ³é¢‘ç¼–è§£ç </a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/éŸ³è§†é¢‘/Audio/éŸ³é¢‘æ’­æ”¾">éŸ³é¢‘æ’­æ”¾</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">éŸ³è§†é¢‘/è§†é¢‘</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/éŸ³è§†é¢‘/Video/Video">Video</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/éŸ³è§†é¢‘/Video/è§†é¢‘é‡‡é›†">è§†é¢‘é‡‡é›†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/éŸ³è§†é¢‘/Video/è§†é¢‘å­˜å‚¨">è§†é¢‘å­˜å‚¨</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/éŸ³è§†é¢‘/Video/è§†é¢‘å¤„ç†">è§†é¢‘å¤„ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/éŸ³è§†é¢‘/Video/è§†é¢‘ç¼–è§£ç ">è§†é¢‘ç¼–è§£ç </a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/éŸ³è§†é¢‘/Video/è§†é¢‘æ¸²æŸ“">è§†é¢‘æ¸²æŸ“</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/éŸ³è§†é¢‘/åŒæ­¥/éŸ³è§†é¢‘åŒæ­¥">éŸ³è§†é¢‘åŒæ­¥</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/éŸ³è§†é¢‘/å°è£…/éŸ³è§†é¢‘å°è£…">éŸ³è§†é¢‘å°è£…</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/éŸ³è§†é¢‘/ä¼ è¾“/éŸ³è§†é¢‘ä¼ è¾“">éŸ³è§†é¢‘ä¼ è¾“</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/éŸ³è§†é¢‘/æœåŠ¡ç«¯/æœåŠ¡å™¨">æœåŠ¡å™¨</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">éŸ³è§†é¢‘/é‡è¦æ¡†æ¶</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/éŸ³è§†é¢‘/å­¦ä¹ èµ„æ–™/ä¸‰æ–¹æ¡†æ¶/FFMpeg/FFmpeg">FFmpeg</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/éŸ³è§†é¢‘/å­¦ä¹ èµ„æ–™/ä¸‰æ–¹æ¡†æ¶/WebRTC/WebRTC">WebRTC</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">éŸ³é¢‘é‡‡é›†</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="iosmacos-éŸ³é¢‘é‡‡é›†"></a>iOS/macOS éŸ³é¢‘é‡‡é›†<a class="hash-link" href="#iosmacos-éŸ³é¢‘é‡‡é›†" title="Direct link to heading">#</a></h1><p>é‡‡é›†å¸¸è§é—®é¢˜ï¼Ÿ</p><ol><li><p>å‡ ä¸ªå£°é“ä¸€èµ·é‡‡é›†ï¼Ÿ</p></li><li><p>ä¸€ç§’é‡‡é›†å¤šå°‘æ¬¡ï¼Ÿ</p></li><li><p>ä¸€ä¸ªç‚¹ç”¨å¤šå°‘ä½æ¥è¡¨ç¤ºï¼Ÿ</p></li><li><p>é‡‡é›†å‡ºæ¥çš„æ•°æ®å¤šä¹…å¾€å¤–é€ä¸€æ¬¡ï¼Ÿä¸€æ¬¡é€çš„æ•°æ®æœ‰å¤šå¤§ï¼Ÿ</p></li><li><p>å¦‚æœæ˜¯åŒå£°é“ï¼Œå¾€å¤–é€çš„æ•°æ®æ ¼å¼æ˜¯æ€æ ·çš„ï¼Ÿ</p></li><li><p>å¦‚ä½•å¤„ç†è¾“å…¥è®¾å¤‡åˆ‡æ¢äº†ï¼Ÿ</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="é‡‡é›†ç®¡ç†"></a>é‡‡é›†ç®¡ç†<a class="hash-link" href="#é‡‡é›†ç®¡ç†" title="Direct link to heading">#</a></h2><p>è°æ¥ç®¡ç†é‡‡é›†ï¼Ÿé‡‡é›†çš„å¼€å§‹å’Œç»“æŸï¼Œé‡‡é›†çš„é…ç½®å·¥ä½œç­‰ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="é‡‡é›†çš„è¾“å…¥"></a>é‡‡é›†çš„è¾“å…¥<a class="hash-link" href="#é‡‡é›†çš„è¾“å…¥" title="Direct link to heading">#</a></h2><p>æ—¢ç„¶è¦é‡‡é›†æ•°æ®ï¼Œæ•°æ®åœ¨å“ªé‡Œï¼Œä»å“ªé‡Œæ¥ï¼Ÿ</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="é‡‡é›†çš„è¾“å‡º"></a>é‡‡é›†çš„è¾“å‡º<a class="hash-link" href="#é‡‡é›†çš„è¾“å‡º" title="Direct link to heading">#</a></h2><p>é‡‡é›†åˆ°çš„æ•°æ®ï¼Œæ€ä¹ˆè¾“å‡ºï¼Œæ”¾åˆ°ä»€ä¹ˆåœ°æ–¹ï¼Ÿ</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="éŸ³é¢‘é‡‡é›†"></a>éŸ³é¢‘é‡‡é›†<a class="hash-link" href="#éŸ³é¢‘é‡‡é›†" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="audio-unit"></a>Audio Unit<a class="hash-link" href="#audio-unit" title="Direct link to heading">#</a></h5><p>è™½ç„¶è‹¹æœæœ‰ä¸€ä¸ªAudio Unit æ¡†æ¶ï¼Œä½†æ˜¯å¯ä»¥ä»å¤´æ–‡ä»¶é‡Œçœ‹å‡ºï¼ŒAudio Unitæ‰€æœ‰å¤´æ–‡ä»¶éƒ½æ˜¯å¯¹AudioToolboxå¤´æ–‡ä»¶çš„å°è£…ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å­¦ä¹ AudioToolboxæ¡†æ¶ã€‚</p><p><img alt="image-20210202220017241" src="/assets/images/image-20210202220017241-caa7bb302d3a9098779f1f2c71ba48ae.png"></p><p><img alt="image-20210202220404351" src="/assets/images/image-20210202220404351-f888399c44ca9496d9cf2a8404dabc0e.png"></p><p>Audio Unité‡‡é›†éŸ³é¢‘å¯ä»¥çœ‹ AudioToolbox çš„AudioUnit v2 APIéƒ¨åˆ†ï¼Œå’ŒDeprecated Symbols çš„<code>AUGraph</code></p><p><img alt="image-20210202220833714" src="/assets/images/image-20210202220833714-959fe4cce1cf7ed2a6ce898046fd434b.png"></p><p>é‡ç‚¹ç±»ï¼šAudioUnitï¼ŒAUGraph, AudioStreamBasicDescription, AVAudioFormat</p><p>å­¦ä¹ é‡ç‚¹ï¼š</p><ul><li>ç†Ÿç»ƒæŒæ¡AudioToolboxæ¡†æ¶ä¸‹AudioUnit v2 APIéƒ¨åˆ†</li><li>ç†Ÿç»ƒæŒæ¡AudioToolboxæ¡†æ¶ä¸‹Audio Queue Serviceséƒ¨åˆ†</li><li>ç†Ÿç»ƒæŒæ¡AudioToolboxæ¡†æ¶ä¸‹Deprecated Symbolséƒ¨åˆ†çš„ Audio Unit Processing Graph Serviceséƒ¨åˆ†</li><li><a href="https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009492" target="_blank" rel="noopener noreferrer">Audio Unit Hosting Guide for iOS</a></li></ul><p>è®¾è®¡åˆ°çš„æ¡†æ¶</p><ul><li><p><code>AudioToolbox</code>ï¼šAudioUnitï¼ŒAUGraph</p></li><li><p><code>CoreAudioTypes</code>-&gt;<code>CoreAudioType Structures</code>-&gt;<code>AudioStreamBasicDescription</code></p></li><li><p><code>AVFoundation</code>-&gt;<code>Audio Playback, Recording, and Processing</code> -&gt;<code>AVAudioEngine</code>-&gt;<code>Audio Settings and Formats</code>-&gt;<code>AVAudioFormat</code></p><p>ç¤ºä¾‹ä»£ç ï¼š</p></li></ul><ol><li><p>è€³è¿”  ä½¿ç”¨AUGraphå®ç°éº¦å…‹é£è¾“å…¥ï¼Œè€³æœºè¾“å‡º</p><p><code>ios_demos/audio/demo/audio_unit_demo/audio_unit_ios/IOPassThrough</code></p></li><li><p>å½•éŸ³</p><p><code>ios_demos/audio/demo/audio_unit_demo/audio_unit_ios/InputOnly</code></p></li></ol><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="pcm"></a>pcm<a class="hash-link" href="#pcm" title="Direct link to heading">#</a></h5><p>é‡‡æ ·æ ¼å¼</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/*! </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @enum       AVAudioCommonFormat</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @constant   AVAudioOtherFormat</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    A format other than one of the common ones below.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @constant   AVAudioPCMFormatFloat32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    Native-endian floats (this is the standard format).</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @constant   AVAudioPCMFormatFloat64</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    Native-endian doubles.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @constant   AVAudioPCMFormatInt16</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    Signed 16-bit native-endian integers.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @constant   AVAudioPCMFormatInt32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    Signed 32-bit native-endian integers.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef NS_ENUM(NSUInteger, AVAudioCommonFormat) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    AVAudioOtherFormat = 0,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    AVAudioPCMFormatFloat32 = 1,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    AVAudioPCMFormatFloat64 = 2,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    AVAudioPCMFormatInt16 = 3,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    AVAudioPCMFormatInt32 = 4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} NS_ENUM_AVAILABLE(10_10, 8_0);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">recorderInfo.outputStreamDesc = *([[AVAudioFormat alloc] initWithCommonFormat:AVAudioPCMFormatInt16 sampleRate:16000 channels:1 interleaved:NO].streamDescription);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><ul><li>é‡‡æ ·å‚æ•°</li></ul><p>æ€ä¹ˆé‡‡æ ·ï¼Ÿ</p><p>é‡‡æ ·ç‡å¤šå°‘ï¼Ÿ</p><p>44100HZ</p><p>å‡ ä¸ªå£°é“é‡‡æ ·ï¼Ÿ</p><p>é‡‡æ ·ç‚¹ç”¨å¤šå°‘ä½æ•°æ®è®°å½•ï¼Ÿ</p><p>ç»å¸¸è§åˆ°è¿™æ ·çš„æè¿°: 44100HZ 16bit stereo æˆ–è€… 22050HZ 8bit mono ç­‰ç­‰.
- 44100HZ 16bit stereo:
æ¯ç§’é’Ÿæœ‰ 44100 æ¬¡é‡‡æ ·, é‡‡æ ·æ•°æ®ç”¨ 16 ä½(2å­—èŠ‚)è®°å½•, åŒå£°é“(ç«‹ä½“å£°);
- 22050HZ 8bit  mono:
æ¯ç§’é’Ÿæœ‰ 22050 æ¬¡é‡‡æ ·, é‡‡æ ·æ•°æ®ç”¨ 8 ä½(1å­—èŠ‚)è®°å½•, å•å£°é“;</p><p>ä½œè€…ï¼šFlyingPenguin
é“¾æ¥ï¼š<a href="https://www.jianshu.com/p/e568f94cdf6a" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/e568f94cdf6a</a>
æ¥æºï¼šç®€ä¹¦
è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p><ul><li>PCMæ•°æ®å­˜å‚¨æ ¼å¼</li></ul><p><img alt="img" src="/assets/images/1720840-ab85a155d2061835-96fd9fb7919ab4153be01e3bd2aa9874.png"></p><p><a href="https://developer.apple.com/documentation/avfaudio/avaudiocommonformat?language=objc" target="_blank" rel="noopener noreferrer">https://developer.apple.com/documentation/avfaudio/avaudiocommonformat?language=objc</a></p><blockquote><p><strong>å¸¦På’Œä¸å¸¦Pçš„æ•°æ®ç±»å‹çš„åŒºåˆ«ï¼š</strong></p><p>Pè¡¨ç¤ºPlanarï¼ˆå¹³é¢ï¼‰ï¼Œå…¶æ•°æ®æ ¼å¼æ’åˆ—æ–¹å¼ä¸º :</p><p>LLLLLLRRRRRRLLLLLLRRRRRRLLLLLLRRRRRRL...ï¼ˆ <strong>**æ¯ä¸ªLLLLLLRRRRRRä¸ºä¸€ä¸ªéŸ³é¢‘å¸§**</strong>ï¼‰</p><p>è€Œä¸å¸¦Pçš„æ•°æ®æ ¼å¼ï¼ˆå³äº¤é”™æ’åˆ—ï¼‰æ’åˆ—æ–¹å¼ä¸ºï¼š</p><p>LRLRLRLRLRLRLRLRLRLRLRLRLRLRLRLRLRLRL... ï¼ˆ <strong>æ¯ä¸ªLRä¸ºä¸€ä¸ªéŸ³é¢‘æ ·æœ¬</strong> ï¼‰</p><p><strong>æ³¨ï¼š</strong>Lè¡¨ç¤ºå·¦å£°é“ä¸€ä¸ªé‡‡æ ·ç‚¹æ•°æ®ï¼ŒRè¡¨ç¤ºå³å£°é“ä¸€ä¸ªé‡‡æ ·ç‚¹æ•°æ®</p></blockquote><p>æ¯ä¸ªå£°é“éƒ½æ˜¯16ä¸ªbit,ç„¶åLRLRLRLR,ä¸è¿‡æ­¤å¤„éœ€è¦æ³¨æ„è¿™å«åš&quot;äº¤é”™ç«‹ä½“å£°å­˜å‚¨&quot;,è¿˜æœ‰ä¸€ç§å­˜å‚¨æ–¹å¼å«åš&quot;åŒå•å£°é“&quot;,æ¯”è¾ƒå°‘è§æ—¥å¸¸å¯ä»¥æš‚æ—¶å½“å®ƒä¸å­˜åœ¨,æ˜¯ä»¥LLLLLLLLLLLLLLL.....RRRRRRRRRRRRRR......å­˜å‚¨çš„.</p><p>å‚è€ƒï¼š<a href="https://www.zhihu.com/question/29721784" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/29721784</a></p><p>iOS ä¸­AVAudioFormatæœ‰ä¸ªå±æ€§ interleaved äº¤é”™ï¼Œå¸¸ç”¨åº”è¯¥æ˜¯yesã€‚ä¹Ÿå°±æ˜¯ AVAudioPCMFormatInt16 ä¸å¸¦pçš„ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="é‡‡é›†"></a>é‡‡é›†<a class="hash-link" href="#é‡‡é›†" title="Direct link to heading">#</a></h2><ol><li>å‡ ä¸ªå£°é“ä¸€èµ·é‡‡é›†ï¼Ÿé‡‡æ ·sampleï¼Œæ•°æ®å¸§frameï¼Œæ•°æ®åŒ…packetï¼Œæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</li></ol><p>Channelï¼š ä¸€ä¸ªå£°é“æ˜¯å•å£°é“ï¼Œä¸¤ä¸ªå£°é“æ˜¯åŒå£°é“ã€‚å¯¹åº” <code>AudioStreamBasicDescription</code> ä¸­çš„ <code>mChannelsPerFrame</code> å­—æ®µã€‚</p><ul><li>åœ¨éŸ³é¢‘æ•°æ®ä¸­ï¼Œ ä¸€ä¸ªé‡‡æ ·å°±æ˜¯ n ä¸ªé€šé“çš„ä¸€ä¸ªæ•°æ®é›†åˆï¼Œä¸€ä¸ªæ•°æ®å¸§å°±æ˜¯ä¸€ä¸ªé‡‡æ · one frame = one sampleã€‚</li><li>åœ¨ pcm éŸ³é¢‘ä¸­ one packet = one frame</li><li>åœ¨å‹ç¼©éŸ³é¢‘ä¸­ one packet = n frame, å¦‚ one AAC packet = 1024 sample frames</li></ul><ol start="2"><li>ä¸€ç§’é‡‡é›†å¤šå°‘æ¬¡ï¼Ÿ</li></ol><p>SampleRateï¼š é‡‡æ ·ç‡ã€‚å¯¹åº” <code>AudioStreamBasicDescription</code> ä¸­çš„ <code>mSampleRate</code> å­—æ®µã€‚</p><ol start="3"><li>ä¸€ä¸ªç‚¹ç”¨å¤šå°‘ä½æ¥è¡¨ç¤ºï¼Ÿä¸€å¸§æ•°æ®æœ‰å¤šå°‘å­—èŠ‚ï¼Ÿ</li></ol><p>ä½å®½ï¼šå¯¹åº” <code>AudioStreamBasicDescription</code> ä¸­çš„ <code>mBitsPerChannel</code> å­—æ®µã€‚è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œéœ€è¦ç”¨01äºŒè¿›åˆ¶æ ‡è¯†æ¨¡æ‹Ÿä¿¡å·çš„é«˜ä½å€¼ï¼Œé‚£ä¹ˆç”¨å¤šå°‘ä½æ¥è¡¨ç¤ºå‘¢ï¼Ÿè¿™ä¸ªä½æ•°å«ä½å®½ã€‚å¾ˆæ˜¾ç„¶ä½æ•°è¶Šå¤§ï¼Œèƒ½è¡¨ç¤ºçš„èŒƒå›´ä¹Ÿå°±è¶Šå¹¿ï¼Œå£°éŸ³è¡¨ç¤ºä¹Ÿå°±è¶Šç²¾ç»†ï¼Œä½†æ˜¯åŒæ—¶ï¼Œæ•°æ®é‡ä¹Ÿå°±è¶Šå¤§ã€‚iosä¸€èˆ¬ç”¨16ä½æ•´å½¢è¡¨ç¤ºã€‚ä¸€ä¸ªå£°é“ï¼Œé‡‡ä¸€æ¬¡æ˜¯2å­—èŠ‚ã€‚</p><p>ä¸€å¸§æ•°æ®æœ‰å¤šå°‘å­—èŠ‚ï¼šå¯¹åº” <code>AudioStreamBasicDescription</code> ä¸­çš„ <code>mBytesPerFrame</code> å­—æ®µã€‚ ä¸€å¸§å°±æ˜¯ä¸€ä¸ªé‡‡æ ·ã€‚ä¸€ä¸ªé‡‡æ ·å°±æ˜¯æ‰€æœ‰é€šé“é‡‡é›†ä¸€æ¬¡çš„æ•°æ®é›†åˆã€‚</p><ul><li>äº¤é”™ç±»å‹ mBitsPerChannel / 8 * mChannelsPerFrame</li><li>éäº¤é”™ç±»å‹ mBitsPerChannel / 8</li></ul><ol start="4"><li>é‡‡å‡ºæ¥çš„æ•°æ®æ˜¯ä»€ä¹ˆæ ¼å¼çš„ï¼Ÿ</li></ol><p>å¯¹åº” <code>AudioStreamBasicDescription</code> ä¸­çš„ <code>mFormatID</code> å­—æ®µã€‚æœ€å¸¸è§çš„æ˜¯pcmä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªã€‚</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kAudioFormatLinearPCM               = &#x27;lpcm&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kAudioFormatMPEG4AAC                = &#x27;aac &#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kAudioFormatMPEGLayer3              = &#x27;.mp3&#x27;,</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>è¿™ä¸ªæ ¼å¼æ˜¯æœ€åå½¢æˆçš„æ–‡ä»¶çš„æ ¼å¼ã€‚pcmæ˜¯æœªå‹ç¼©çš„åŸå§‹æ•°æ®ã€‚aacå’Œmp3æ˜¯å‹ç¼©è¿‡çš„æ•°æ®ã€‚è¿˜æœ‰ä¸€ä¸ªæ ¼å¼æ˜¯é‡‡é›†å‡ºæ¥çš„ç¼“å†²åŒºä¸­çš„æ•°æ®æ ¼å¼ã€‚</p><ol start="5"><li>é‡‡é›†å‡ºæ¥æ”¾åˆ°ç¼“å†²åŒºä¸­çš„æ•°æ®æ˜¯æ€ä¹ˆæ”¾çš„ï¼Ÿ</li></ol><p>å¯¹åº” <code>AudioStreamBasicDescription</code> ä¸­çš„ <code>mFormatFlags</code> å­—æ®µ</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    m_streamFormat.mFormatFlags     = kLinearPCMFormatFlagIsSignedInteger | kLinearPCMFormatFlagIsPacked;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>kAudioFormatFlagIsFloat</strong></p><p>æ˜¯å¦æ˜¯æµ®ç‚¹æ•°ï¼Œ æ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤æ˜¯ int ç±»å‹</p><p><strong>kAudioFormatFlagIsBigEndian</strong></p><p>æ˜¯å¦æ˜¯å¤§ç«¯ï¼Œ æ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤æ˜¯å°ç«¯</p><p><a href="https://www.cnblogs.com/pure/archive/2013/04/21/3034066.html" target="_blank" rel="noopener noreferrer">Big-Endian &amp; Little-Endian</a></p><p>å¤§ç«¯æ¨¡å¼Big-Endianå°±æ˜¯é«˜ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„ä½åœ°å€ç«¯ï¼Œä½ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„é«˜åœ°å€ç«¯ã€‚</p><p>å°ç«¯æ¨¡å¼Little-Endianå°±æ˜¯ä½ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„ä½åœ°å€ç«¯ï¼Œé«˜ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„é«˜åœ°å€ç«¯ã€‚</p><p><img alt="image-20210218221422118" src="/assets/images/image-20210218221422118-8d39589e905f671901787ab178962a3f.png"></p><p><strong>kAudioFormatFlagIsSignedInteger</strong></p><p>æ˜¯å¦æ˜¯ signed intï¼Œ æ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤æ˜¯ unsigned int</p><p><strong>kAudioFormatFlagIsPacked</strong></p><p>æ˜¯å¦mBitsPerChannel ä¼šå æ»¡æ•´ä¸ªé€šé“ï¼Œå¦‚æœæ²¡æœ‰å æ»¡ï¼Œ å°±ä¼šä¾é«˜ä½å¯¹é½æˆ–ä½ä½å¯¹é½ã€‚</p><p>æ²¡æœ‰è®¾ç½®çš„æ—¶å€™ï¼Œæ»¡è¶³ ((mBitsPerSample / 8) * mChannelsPerFrame) == mBytesPerFrame çš„æ¡ä»¶ï¼Œé»˜è®¤ä¼šè®¾ç½®æ­¤é€‰é¡¹ã€‚</p><p><strong>kAudioFormatFlagIsNonInterleaved</strong></p><p>æ˜¯å¦æ˜¯å¹³é¢ç±»å‹ï¼Œæ˜¯å¦æ˜¯äº¤é”™ç±»å‹ã€‚</p><p>åŒå£°é“çš„æƒ…å†µ</p><ul><li>äº¤é”™ç±»å‹çš„å­˜å‚¨ä¸º,åªæœ‰ä¸€ä¸ªé€šé“ï¼Œé€šé“å†…å·¦å³å£°é“äº¤é”™å­˜å‚¨ LRLRLRLRLRLR</li><li>éäº¤é”™æƒ…å†µä¸ºï¼Œ å·¦å³å£°é“åˆ†å¼€å­˜å‚¨ï¼Œæ¯ä¸ªå¹³é¢ï¼Œå­˜å•ç‹¬çš„å£°é“<ul><li>å¹³é¢1 LLLLLLLL</li><li>å¹³é¢2 RRRRRRR</li></ul></li></ul><ol start="6"><li>ä¸€ä¸ªæ•°æ®åŒ…å«å¤šå°‘ä¸ªé‡‡æ ·?æˆ–è€…å«ä¸€ä¸ªæ•°æ®åŒ…å«å¤šå°‘å¸§ï¼Ÿä¸€ä¸ªæ•°æ®åŒ…åŒ…å«å¤šå°‘å­—èŠ‚æ•°ï¼Ÿ</li></ol><p>mFramesPerPacket</p><p>æ¯ä¸ªæ•°æ®åŒ…ï¼ŒåŒ…å«çš„é‡‡æ ·æ•°</p><p>pcm ç±»å‹</p><ul><li>äº¤é”™ mFramesPerPacket = 1</li><li>éäº¤é”™ mFramesPerPacket = mChannelsPerFrame</li></ul><p>mBytesPerPacket</p><p>æ¯ä¸ªæ•°æ®åŒ…ï¼ŒåŒ…å«çš„å­—èŠ‚æ•°
pcm ç±»å‹ mBytesPerPacket = mFramesPerPacket * mBytesPerFrame</p><ol><li></li><li>é‡‡é›†å‡ºæ¥çš„æ•°æ®å¤šä¹…å¾€å¤–é€ä¸€æ¬¡ï¼Ÿä¸€æ¬¡é€çš„æ•°æ®æœ‰å¤šå¤§ï¼Ÿ</li></ol><ol start="4"><li>ä¸€åˆ†é’Ÿå¤§æ¦‚æœ‰å¤šå°‘æ•°æ®é‡ï¼Ÿ</li><li>å¦‚æœæ˜¯åŒå£°é“ï¼Œå¾€å¤–é€çš„æ•°æ®æ ¼å¼æ˜¯æ€æ ·çš„ï¼Ÿ</li><li>å¦‚ä½•å¤„ç†è¾“å…¥è®¾å¤‡åˆ‡æ¢äº†ï¼Ÿ</li></ol><p>AudioStreamBasicDescription</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c++ codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct AudioStreamBasicDescription</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Float64             mSampleRate;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    AudioFormatID       mFormatID;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    AudioFormatFlags    mFormatFlags;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UInt32              mBytesPerPacket;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UInt32              mFramesPerPacket;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UInt32              mBytesPerFrame;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UInt32              mChannelsPerFrame;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UInt32              mBitsPerChannel;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UInt32              mReserved;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef struct AudioStreamBasicDescription  AudioStreamBasicDescription;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/40089d76ea10" target="_blank" rel="noopener noreferrer">å¦‚ä½•è®¾ç½®AudioStreamBasicDescription - ç®€ä¹¦</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="æ•°æ®æ ¼å¼"></a>æ•°æ®æ ¼å¼<a class="hash-link" href="#æ•°æ®æ ¼å¼" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="linear-pcm"></a>Linear PCM<a class="hash-link" href="#linear-pcm" title="Direct link to heading">#</a></h4><p>PCM æ˜¯æœ€å¸¸ç”¨çš„æ— æŸå‹ç¼©æ•°å­—éŸ³é¢‘æ ¼å¼æ•°æ®ã€‚</p><ul><li><p>sampleï¼šé‡‡æ ·ã€‚ä¸€ä¸ªé‡‡æ ·ç‚¹å¯¹å•å£°é“é‡‡é›†åˆ°å£°éŸ³çš„æ•°å€¼ã€‚</p></li><li><p>frameï¼šå¸§ã€‚ä¸€å¸§æ•°æ®æ˜¯ä¸€ç»„æ—¶é—´ä¸€è‡´çš„samplesï¼ŒåŒå£°é“å£°éŸ³æ–‡ä»¶ä¸­ä¸€å¸§æœ‰ä¸¤ä¸ªsamplesï¼Œä¸€ä¸ªå·¦å£°é“ï¼Œä¸€ä¸ªå³å£°é“ã€‚</p></li><li><p>packetï¼šåŒ…ã€‚ä¸€ä¸ªæˆ–å¤šä¸ªè¿ç»­å¸§çš„é›†åˆã€‚åœ¨çº¿æ€§PCMä¸­ã€‚ä¸€ä¸ªpacketé‡è§†å•å¸§ï¼Œå…¶ä»–å‹ç¼©æ ¼å¼ä¸­ï¼Œä¸€ä¸ªpacketå®šä¹‰ç»™å®šéŸ³é¢‘æ•°æ®æ ¼å¼çš„æœ€å°æœ‰æ„ä¹‰çš„å¸§ç»„ã€‚</p></li></ul><p>PCM: Pluse Code Modulationã€‚è„‰å†²ç¼–ç è°ƒåˆ¶</p><p>PCM: <a href="https://baike.baidu.com/item/PCM/1568054?fr=aladdin" target="_blank" rel="noopener noreferrer">https://baike.baidu.com/item/PCM/1568054?fr=aladdin</a></p><p>pcmç¼–ç : <a href="https://baike.baidu.com/item/pcm%E7%BC%96%E7%A0%81/10865033?fr=aladdin" target="_blank" rel="noopener noreferrer">https://baike.baidu.com/item/pcm%E7%BC%96%E7%A0%81/10865033?fr=aladdin</a></p><blockquote><p>PCM å³è„‰å†²ç¼–ç è°ƒåˆ¶ (Pulse Code Modulation)ã€‚åœ¨PCM è¿‡ç¨‹ä¸­ï¼Œå°†è¾“å…¥çš„æ¨¡æ‹Ÿä¿¡å·è¿›è¡Œé‡‡æ ·ã€é‡åŒ–å’Œç¼–ç ï¼Œç”¨äºŒè¿›åˆ¶è¿›è¡Œç¼–ç çš„æ•°æ¥ä»£è¡¨æ¨¡æ‹Ÿä¿¡å·çš„å¹…åº¦ ï¼›æ¥æ”¶ç«¯å†å°†è¿™äº›ç¼–ç è¿˜åŸä¸ºåŸæ¥çš„æ¨¡æ‹Ÿä¿¡å·ã€‚å³æ•°å­—éŸ³é¢‘çš„ A/D è½¬æ¢åŒ…æ‹¬ä¸‰ä¸ªè¿‡ç¨‹ ï¼šé‡‡æ ·ï¼Œé‡åŒ–ï¼Œç¼–ç ã€‚</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="aif"></a>AIF<a class="hash-link" href="#aif" title="Direct link to heading">#</a></h4><p>Audio Interchange File Formatï¼šéŸ³é¢‘äº¤æ¢æ–‡ä»¶æ ¼å¼ã€‚</p><blockquote><p>æ˜¯Appleå…¬å¸å¼€å‘çš„ä¸€ç§å£°éŸ³æ–‡ä»¶æ ¼å¼ï¼Œè¢«Macintoshå¹³å°åŠå…¶åº”ç”¨ç¨‹åºæ‰€æ”¯æŒï¼ŒNetscape Navigatoræµè§ˆå™¨ä¸­çš„LiveAudioä¹Ÿæ”¯æŒAIFFæ ¼å¼ï¼ŒSGIåŠå…¶å®ƒä¸“ä¸šéŸ³é¢‘è½¯ä»¶åŒ…ä¹ŸåŒæ ·æ”¯æŒAIFFæ ¼å¼ã€‚AIFFæ”¯æŒACE2ã€ACE8ã€MAC3å’ŒMAC6å‹ç¼©ï¼Œæ”¯æŒ16ä½44.1kHzç«‹ä½“å£°ã€‚</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ä»éº¦å…‹é£é‡‡é›†"></a>ä»éº¦å…‹é£é‡‡é›†<a class="hash-link" href="#ä»éº¦å…‹é£é‡‡é›†" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="augraphé‡‡é›†"></a>AUGraphé‡‡é›†<a class="hash-link" href="#augraphé‡‡é›†" title="Direct link to heading">#</a></h4><ul><li>å…³äº AudioBufferList ï¼š</li></ul><p><a href="https://developer.apple.com/documentation/audiotoolbox/kaudiounitproperty_shouldallocatebuffer" target="_blank" rel="noopener noreferrer">https://developer.apple.com/documentation/audiotoolbox/kaudiounitproperty_shouldallocatebuffer</a></p><p> Default value is true, which means that the associated audio unit element creates a buffer for rendering into.</p><p> If true, the element will create a buffer for rendering into.</p><p> If false, the element will not create a buffer for rendering.</p><p> For example, if the audio unit is only ever going to have a connection as its input and never a callback, then it should not need to create a buffer (the API contract expects an audio unit to provide a buffer for callbacks, but no buffer for connections).</p><p> If the audio unit is always going to be pulled for audio with the client providing audio data buffers to the AudioUnitRender call, then it will never need to create an audio buffer on the output side.</p><p> So, this property can be used to control the default allocation strategy of an audio unit. If the audio unit needs a buffer, but one hasn&#x27;t been allocated, then an error will be thrown from that call to AudioUnitRender.</p><p> This property cannot be set on initialized audio units as it may end up reallocating memory.</p><ul><li>å…³äº æ˜¯å¦disable output</li></ul><p>è¿™ä¸ªè¦çœ‹æƒ…å†µï¼Œä¸€èˆ¬çš„å½•åˆ¶éœ€è¦disableï¼Œå¦‚æœéœ€è¦æ’­æ”¾çš„åˆ™ä¸éœ€è¦</p><p>å‚è§ï¼š<code>audio_demo</code>å·¥ç¨‹ <code>DYSAudioCaptureManager</code> ç±»</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="audiounité‡‡é›†"></a>AudioUnité‡‡é›†<a class="hash-link" href="#audiounité‡‡é›†" title="Direct link to heading">#</a></h4><p>Appleä¸æ¨èç›´æ¥ä½¿ç”¨ã€‚æ¨èä½¿ç”¨AUGraphçš„APIï¼Œå› ä¸ºä»–æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>å‚è§ï¼š<code>audio_demo</code>å·¥ç¨‹ <code>DYSAudioCaptureManager</code> ç±»</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="audioqueueé‡‡é›†"></a>AudioQueueé‡‡é›†<a class="hash-link" href="#audioqueueé‡‡é›†" title="Direct link to heading">#</a></h4><p><a href="https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005343-CH1-SW1" target="_blank" rel="noopener noreferrer">Audio Queue Services Programming Guide</a></p><p>å‚è€ƒï¼š <a href="https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioUnitHostingGuide_iOS/ConstructingAudioUnitApps/ConstructingAudioUnitApps.html#//apple_ref/doc/uid/TP40009492-CH16-SW22" target="_blank" rel="noopener noreferrer">Other Audio Unit Hosting Design Patterns</a></p><p>[AppleAudioQueueç¬”è®°](éŸ³è§†é¢‘/å­¦ä¹ èµ„æ–™/æ•™ç¨‹/Audio Queue Services Programming Guide.md)</p><p>There are two other main design patterns for audio units hosting. To record or analyze audio, create an input-only app with a render callback function. The callback function is invoked by your application, and it in turn invokes the render method of the Remote I/O unitâ€™s input element. However, in most cases, a better choice for an app like this is to use an input audio queue object (of type <code>AudioQueueRef</code> instantiated using the <code>AudioQueueNewInput</code> function), as explained in <em><a href="https://developer.apple.com/library/archive/documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005343" target="_blank" rel="noopener noreferrer">Audio Queue Services Programming Guide</a></em>. Using an audio queue object provides a great deal more flexibility because its render callback function is not on a realtime thread.</p><p>å¦‚æœæ˜¯å½•åˆ¶æˆ–è€…åˆ†æéŸ³é¢‘è¿™ç§è®¾è®¡æ¨¡å¼çš„è¯ï¼ŒAppleæ¨èä½¿ç”¨AudioQueueã€‚</p><ul><li>Recording <ol><li></li></ol></li></ul><ul><li>Playing</li></ul><p>éŸ³é¢‘æµæ•°æ®æ ¼å¼ï¼šASBDï¼šAudioStreamBasicDescription</p><p>ä¸»è¦å‚æ•°ï¼š</p><ul><li>sampleRate: é‡‡æ ·ç‡ã€‚æ¨¡æ‹Ÿä¿¡å·æ•°å­—åŒ–çš„è¿‡ç¨‹ï¼Œé‡‡æ ·é¢‘ç‡è¶Šé«˜ï¼Œæ•°æ®é‡è¶Šå¤§ï¼ŒéŸ³è´¨è¶Šå¥½</li><li>channels: å£°é“æ•°ã€‚å³å•å£°é“æˆ–è€…åŒå£°é“ï¼ˆiPhoneæ— æ³•ç›´æ¥é‡‡é›†åŒå£°é“ï¼Œä½†å¯ä»¥æ¨¡æ‹Ÿï¼Œå³å¤åˆ¶ä¸€ä»½é‡‡é›†åˆ°çš„å•å£°é“æ•°æ®ï¼ŒAndroidéƒ¨åˆ†æœºå‹å¯ä»¥é‡‡é›†åŒå£°é“ï¼‰</li><li>format: æ•°æ®æ ¼å¼ã€‚iOSç«¯è®¾å¤‡é‡‡é›†çš„åŸå§‹æ•°æ®ä¸ºçº¿æ€§PCMç±»å‹éŸ³é¢‘æ•°æ®ã€‚</li><li>bitsPerChannel: ä½å®½ã€‚æ¯ä¸ªé‡‡æ ·ç‚¹çš„å¤§å°ï¼Œä½æ•°è¶Šå¤šè¡¨ç¤ºè¶Šç²¾ç»†ï¼Œä¸€èˆ¬æ˜¯8bitæˆ–è€…16bitã€‚</li></ul><p>å‚è€ƒï¼š</p><ul><li><a href="https://juejin.cn/post/6844903889007820813" target="_blank" rel="noopener noreferrer">(å¼ºçƒˆæ¨è)ç§»åŠ¨ç«¯éŸ³è§†é¢‘ä»é›¶åˆ°ä¸Šæ‰‹</a></li><li><a href="https://xiaodongxie1024.github.io/2019/05/11/20190511_AudioUnit_capture/" target="_blank" rel="noopener noreferrer">Audio Unité‡‡é›†éŸ³é¢‘å®æˆ˜</a></li><li><a href="https://juejin.cn/post/6844903842098872327" target="_blank" rel="noopener noreferrer">Audio Unité‡‡é›†éŸ³é¢‘å®æˆ˜</a></li></ul><p>AudioStreamBasicDescription asbd; </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-objective-c codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/*!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @struct         AudioStreamBasicDescription</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @abstract       This structure encapsulates all the information for describing the basic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    format properties of a stream of audio data.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @discussion     This structure is sufficient to describe any constant bit rate format that  has</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    channels that are the same size. Extensions are required for variable bit rate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    data and for constant bit rate data where the channels have unequal sizes.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    However, where applicable, the appropriate fields will be filled out correctly</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    for these kinds of formats (the extra data is provided via separate properties).</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    In all fields, a value of 0 indicates that the field is either unknown, not</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    applicable or otherwise is inapproprate for the format and should be ignored.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    Note that 0 is still a valid value for most formats in the mFormatFlags field.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    In audio data a frame is one sample across all channels. In non-interleaved</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    audio, the per frame fields identify one channel. In interleaved audio, the per</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    frame fields identify the set of n channels. In uncompressed audio, a Packet is</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    one frame, (mFramesPerPacket == 1). In compressed audio, a Packet is an</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    indivisible chunk of compressed data, for example an AAC packet will contain</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    1024 sample frames.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @var            mSampleRate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        The number of sample frames per second of the data in the stream.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @var            mFormatID</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        The AudioFormatID indicating the general kind of data in the stream.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @var            mFormatFlags</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        The AudioFormatFlags for the format indicated by mFormatID.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @var            mBytesPerPacket</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        The number of bytes in a packet of data.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @var            mFramesPerPacket</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        The number of sample frames in each packet of data.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @var            mBytesPerFrame</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        The number of bytes in a single sample frame of data.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @var            mChannelsPerFrame</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        The number of channels in each frame of data.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @var            mBitsPerChannel</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        The number of bits of sample data for each channel in a frame of data.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @var            mReserved</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        Pads the structure out to force an even 8 byte alignment.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">struct AudioStreamBasicDescription</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Float64             mSampleRate;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    AudioFormatID       mFormatID;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    AudioFormatFlags    mFormatFlags;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UInt32              mBytesPerPacket;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UInt32              mFramesPerPacket;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UInt32              mBytesPerFrame;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UInt32              mChannelsPerFrame;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UInt32              mBitsPerChannel;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    UInt32              mReserved;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">typedef struct AudioStreamBasicDescription  AudioStreamBasicDescription;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ä»æ–‡ä»¶é‡‡é›†"></a>ä»æ–‡ä»¶é‡‡é›†<a class="hash-link" href="#ä»æ–‡ä»¶é‡‡é›†" title="Direct link to heading">#</a></h3><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ç»éªŒæ€»ç»“"></a>ç»éªŒæ€»ç»“<a class="hash-link" href="#ç»éªŒæ€»ç»“" title="Direct link to heading">#</a></h2><ol><li>Startä¸¤ä¸ªAUGraphï¼Œ<code>status = AUGraphStart(processingGraph);</code> ä¼šè¿”å›66635ã€‚å¼€å¯å½•åˆ¶å¤±è´¥ã€‚</li></ol><p>ä¸¤ä¸ª AUGraphã€‚</p><p>ios14æ²¡é—®é¢˜ã€‚ios12å´©æºƒ</p><p>ä¸€ä¸ªAUGraphï¼Œä¸€ä¸ªAudioUnit</p><p>éƒ½å´©æºƒ</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="é€šè¿‡å‘½ä»¤è¡Œé‡‡é›†"></a>é€šè¿‡å‘½ä»¤è¡Œé‡‡é›†<a class="hash-link" href="#é€šè¿‡å‘½ä»¤è¡Œé‡‡é›†" title="Direct link to heading">#</a></h2><p>TODO:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffmpeg -f avfoundation -i :0 out.wav</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ffplay out.wav</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™<a class="hash-link" href="#å‚è€ƒèµ„æ–™" title="Direct link to heading">#</a></h2><p>1 hour to learn: the simplest iOS live streaming (5) yuv, pcm data introduction and acquisition <a href="https://www.programmersought.com/article/9015850852/" target="_blank" rel="noopener noreferrer">https://www.programmersought.com/article/9015850852/</a></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="dys-typora-open://mine/survival/docs/éŸ³è§†é¢‘/Audio/éŸ³é¢‘é‡‡é›†.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/éŸ³è§†é¢‘/Audio/Audio"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Audio</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/éŸ³è§†é¢‘/Audio/éŸ³é¢‘å­˜å‚¨"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">éŸ³é¢‘å­˜å‚¨ Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#é‡‡é›†ç®¡ç†" class="table-of-contents__link">é‡‡é›†ç®¡ç†</a></li><li><a href="#é‡‡é›†çš„è¾“å…¥" class="table-of-contents__link">é‡‡é›†çš„è¾“å…¥</a></li><li><a href="#é‡‡é›†çš„è¾“å‡º" class="table-of-contents__link">é‡‡é›†çš„è¾“å‡º</a></li><li><a href="#é‡‡é›†" class="table-of-contents__link">é‡‡é›†</a><ul><li><a href="#æ•°æ®æ ¼å¼" class="table-of-contents__link">æ•°æ®æ ¼å¼</a></li><li><a href="#ä»éº¦å…‹é£é‡‡é›†" class="table-of-contents__link">ä»éº¦å…‹é£é‡‡é›†</a></li><li><a href="#ä»æ–‡ä»¶é‡‡é›†" class="table-of-contents__link">ä»æ–‡ä»¶é‡‡é›†</a></li></ul></li><li><a href="#ç»éªŒæ€»ç»“" class="table-of-contents__link">ç»éªŒæ€»ç»“</a></li><li><a href="#é€šè¿‡å‘½ä»¤è¡Œé‡‡é›†" class="table-of-contents__link">é€šè¿‡å‘½ä»¤è¡Œé‡‡é›†</a></li><li><a href="#å‚è€ƒèµ„æ–™" class="table-of-contents__link">å‚è€ƒèµ„æ–™</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.fb1c19b8.js"></script>
<script src="/runtime~main.cc14fc68.js"></script>
<script src="/main.c6b7f4ce.js"></script>
<script src="/1.a9a8f0c0.js"></script>
<script src="/258.6205818a.js"></script>
<script src="/259.e50796f0.js"></script>
<script src="/935f2afb.41d9bdbd.js"></script>
<script src="/257.eedf933d.js"></script>
<script src="/ba930f5b.96c14989.js"></script>
</body>
</html>