(window.webpackJsonp=window.webpackJsonp||[]).push([[185],{257:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return A})),n.d(t,"toc",(function(){return p})),n.d(t,"default",(function(){return b}));var a=n(3),r=n(7),i=(n(0),n(331)),c=["components"],o={},A={unversionedId:"\u97f3\u89c6\u9891/Video/\u89c6\u9891\u91c7\u96c6",id:"\u97f3\u89c6\u9891/Video/\u89c6\u9891\u91c7\u96c6",isDocsHomePage:!1,title:"\u89c6\u9891\u91c7\u96c6",description:"iOS/macOS \u89c6\u9891\u91c7\u96c6",source:"@site/docs/\u97f3\u89c6\u9891/Video/\u89c6\u9891\u91c7\u96c6.md",slug:"/\u97f3\u89c6\u9891/Video/\u89c6\u9891\u91c7\u96c6",permalink:"/docs/\u97f3\u89c6\u9891/Video/\u89c6\u9891\u91c7\u96c6",editUrl:"dys-typora-open://mine/survival/docs/\u97f3\u89c6\u9891/Video/\u89c6\u9891\u91c7\u96c6.md",version:"current",sidebar:"\u97f3\u89c6\u9891",previous:{title:"Video",permalink:"/docs/\u97f3\u89c6\u9891/Video/Video"},next:{title:"\u89c6\u9891\u5b58\u50a8",permalink:"/docs/\u97f3\u89c6\u9891/Video/\u89c6\u9891\u5b58\u50a8"}},p=[{value:"\u91c7\u96c6\u7ba1\u7406",id:"\u91c7\u96c6\u7ba1\u7406",children:[{value:"<code>AVCaptureSession</code>",id:"avcapturesession",children:[]}]},{value:"\u91c7\u96c6\u7684\u8f93\u5165",id:"\u91c7\u96c6\u7684\u8f93\u5165",children:[{value:"\u91c7\u96c6\u8bbe\u5907 <code> AVCaptureDevice</code>",id:"\u91c7\u96c6\u8bbe\u5907--avcapturedevice",children:[]},{value:"\u91c7\u96c6\u65b9\u5411",id:"\u91c7\u96c6\u65b9\u5411",children:[]},{value:"\u6743\u9650\u95ee\u9898",id:"\u6743\u9650\u95ee\u9898",children:[]},{value:"\u91c7\u96c6\u7684\u8bbe\u7f6e",id:"\u91c7\u96c6\u7684\u8bbe\u7f6e",children:[]},{value:"CMTime",id:"cmtime",children:[]}]},{value:"\u91c7\u96c6\u7684\u8f93\u51fa",id:"\u91c7\u96c6\u7684\u8f93\u51fa",children:[{value:"\u8f93\u51fa\u7684\u683c\u5f0f",id:"\u8f93\u51fa\u7684\u683c\u5f0f",children:[]},{value:"\u4fdd\u5b58\u5230\u6587\u4ef6",id:"\u4fdd\u5b58\u5230\u6587\u4ef6",children:[]},{value:"\u67e5\u770b\u6587\u4ef6\u4fe1\u606f",id:"\u67e5\u770b\u6587\u4ef6\u4fe1\u606f",children:[]}]},{value:"\u95ee\u9898",id:"\u95ee\u9898",children:[]}],l={toc:p};function b(e){var t=e.components,o=Object(r.a)(e,c);return Object(i.b)("wrapper",Object(a.a)({},l,o,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"iosmacos-\u89c6\u9891\u91c7\u96c6"},"iOS/macOS \u89c6\u9891\u91c7\u96c6"),Object(i.b)("h2",{id:"\u91c7\u96c6\u7ba1\u7406"},"\u91c7\u96c6\u7ba1\u7406"),Object(i.b)("p",null,"\u8c01\u6765\u7ba1\u7406\u91c7\u96c6\uff1f\u91c7\u96c6\u7684\u5f00\u59cb\u548c\u7ed3\u675f\uff0c\u91c7\u96c6\u7684\u914d\u7f6e\u5de5\u4f5c\u7b49\u3002"),Object(i.b)("h3",{id:"avcapturesession"},Object(i.b)("inlineCode",{parentName:"h3"},"AVCaptureSession")),Object(i.b)("p",null,"\u6211\u4eec\u7528AVCaptureSession \u6765\u7ba1\u7406\u91c7\u96c6\u3002"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"AVCaptureSession")," \u7ef4\u6301\u4e00\u4e2a\u5305\u542b\u8f93\u5165\u548c\u8f93\u51fa\u7684\u62d3\u6251\u7ed3\u6784\u3002"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"- (BOOL)canAddOutput:(AVCaptureOutput *)output;\n- (void)addOutput:(AVCaptureOutput *)output;\n")),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://developer.apple.com/documentation/avfoundation/cameras_and_media_capture/setting_up_a_capture_session?language=objc"},"https://developer.apple.com/documentation/avfoundation/cameras_and_media_capture/setting_up_a_capture_session?language=objc")),Object(i.b)("p",null,Object(i.b)("img",{alt:"Block diagram of the basic capture session architecture: an AVCaptureSession acquires data from an AVCaptureDevice through AVCaptureDeviceInput, and provides data to one or more AVCaptureOutput objects.",src:n(876).default})),Object(i.b)("h2",{id:"\u91c7\u96c6\u7684\u8f93\u5165"},"\u91c7\u96c6\u7684\u8f93\u5165"),Object(i.b)("p",null,"\u65e2\u7136\u8981\u91c7\u96c6\u6570\u636e\uff0c\u6570\u636e\u5728\u54ea\u91cc\uff0c\u4ece\u54ea\u91cc\u6765\uff1f"),Object(i.b)("h3",{id:"\u91c7\u96c6\u8bbe\u5907--avcapturedevice"},"\u91c7\u96c6\u8bbe\u5907 ",Object(i.b)("inlineCode",{parentName:"h3"}," AVCaptureDevice")),Object(i.b)("p",null,"\u6570\u636e\u4ece\u8bbe\u5907\u91c7\u96c6\u800c\u6765\u3002"),Object(i.b)("h3",{id:"\u91c7\u96c6\u65b9\u5411"},"\u91c7\u96c6\u65b9\u5411"),Object(i.b)("h3",{id:"\u6743\u9650\u95ee\u9898"},"\u6743\u9650\u95ee\u9898"),Object(i.b)("p",null,"\u6444\u50cf\u5934\u6d89\u53ca\u5230\u7528\u6237\u7684\u9690\u79c1\uff0c\u7ed9\u4e0d\u7ed9\u4f60\u6388\u6743\uff0c\u51b3\u5b9a\u4e0b\u4e00\u6b65\u7684\u91c7\u96c6\u80fd\u4e0d\u80fd\u6210\u529f\u3002"),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://developer.apple.com/documentation/avfoundation/cameras_and_media_capture/requesting_authorization_for_media_capture_on_ios?language=objc"},"https://developer.apple.com/documentation/avfoundation/cameras_and_media_capture/requesting_authorization_for_media_capture_on_ios?language=objc")),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://developer.apple.com/documentation/avfoundation/cameras_and_media_capture/requesting_authorization_for_media_capture_on_macos?language=objc"},"https://developer.apple.com/documentation/avfoundation/cameras_and_media_capture/requesting_authorization_for_media_capture_on_macos?language=objc")),Object(i.b)("h3",{id:"\u91c7\u96c6\u7684\u8bbe\u7f6e"},"\u91c7\u96c6\u7684\u8bbe\u7f6e"),Object(i.b)("p",null,"\u600e\u4e48\u91c7\u96c6\uff1f"),Object(i.b)("h4",{id:"\u91c7\u96c6\u7684\u5927\u5c0f-\u5206\u8fa8\u7387"},"\u91c7\u96c6\u7684\u5927\u5c0f-\u5206\u8fa8\u7387"),Object(i.b)("p",null,"\u4f60\u8981\u91c7\u96c6\u7684\u662f\u591a\u5927\u7684\u6570\u636e\uff1f\u4e5f\u5c31\u662f\u5e38\u8bf4\u7684\u5206\u8fa8\u7387\u3002"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"You use the sessionPreset property to customize the quality level, bitrate, or other settings for the output. Most common capture configurations are available through session presets; however, some specialized options (such as high frame rate) require directly setting a capture format on an AVCaptureDevice instance.\n")),Object(i.b)("p",null,"30\u5e27\u4ee5\u4e0b\u7684\u91c7\u96c6\u5206\u8fa8\u7387\u8bbe\u7f6e\u53ef\u7528\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"@property(nonatomic, copy) AVCaptureSessionPreset sessionPreset;\n")),Object(i.b)("p",null,"30\u5e27\u4ee5\u4e0a\u7684\u91c7\u96c6\u5206\u8fa8\u7387\u8bbe\u7f6e\u53ef\u7528\uff1a"),Object(i.b)("p",null,"activeFormat"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"To enable capture settings not supported by any session presets (such as high frame rate), change the value of the activeFormat property on the appropriate capture device. When you change the device\u2019s format, the session preset automatically changes to this value, indicating that the AVCaptureSession object has relinquished responsibility for configuring its inputs and outputs. (Instead, the capture device\u2019s active format dictates the quality of service level provided at the outputs). To return to automatic configuration, use the session\u2019s sessionPreset property to choose another preset.\n")),Object(i.b)("p",null,"\u603b\u7ed3 activeFormat \u652f\u6301\u9ad8\u5e27\u7387\uff0c\u8bbe\u7f6edevice\u7684activeFormat\u540e\uff0csession\u5c31\u653e\u5f03\u4e86inputs and outputs \u7684\u8bbe\u7f6e\u3002\u6b64\u65f6session\u7684sessionPreset\u503c\u662f AVCaptureSessionPresetInputPriority\u3002"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"Note\nIn iOS, directly configuring a capture device\u2019s activeFormat property changes the capture session\u2019s preset to AVCaptureSessionPresetInputPriority. Upon making this change, the capture session no longer automatically configures the capture format when you call the startRunning method or call the commitConfiguration method after changing the session topology.\nIn macOS, a capture session can still automatically configure the capture format after you make changes. To prevent automatic changes to the capture format in macOS, follow the advice listed under the lockForConfiguration: method.\n")),Object(i.b)("p",null,"\u8bbe\u7f6eactiveFormat\u8fd9\u4e2a\u503c\u4e4b\u540e\uff0ciOS\u5c31\u76f4\u63a5\u751f\u6548\u4e86\uff0csession\u4e0d\u4f1a\u5728\u81ea\u52a8\u914d\u7f6e\u4e86\u3002\u4f46\u662fMac\u4e0d\u884c\u3002Mac\u5982\u679c\u4e0d\u60f3\u8ba9session\u81ea\u52a8\u914d\u7f6e\u8be5\u548b\u529e\u5462\uff1f"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"- (BOOL)lockForConfiguration:(NSError * _Nullable *)outError;")),Object(i.b)("p",null,"\u5b98\u65b9\u63d0\u4f9b\u4e86\u4e24\u4e2a\u5efa\u8bae\u5982\u4e0b\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"Note\nIn iOS, directly configuring a capture device\u2019s activeFormat property changes the capture session\u2019s preset to AVCaptureSessionPresetInputPriority. Upon making this change, the capture session no longer automatically configures the capture format when you call the startRunning method or call the commitConfiguration method after changing the session topology (that is, adding, removing, or rearranging capture inputs and outputs). In macOS, a capture session can still automatically configure the capture format after you make changes. To prevent automatic changes to the capture format in macOS, follow these steps:\nLock the device with the lockForConfiguration: method.\nChange the device\u2019s activeFormat property.\nBegin capture with the session\u2019s startRunning method.\nUnlock the device with the unlockForConfiguration method.\nOr, to prevent automatic changes after modifying session topology in macOS:\nLock the device with the lockForConfiguration: method.\nCall the session\u2019s beginConfiguration method, change topology, then call the commitConfiguration method.\nUnlock the device with the unlockForConfiguration method.\n")),Object(i.b)("h4",{id:"\u91c7\u96c6\u7684\u9891\u7387-\u5e27\u7387"},"\u91c7\u96c6\u7684\u9891\u7387-\u5e27\u7387"),Object(i.b)("p",null,"\u591a\u4e45\u91c7\u96c6\u4e00\u6b21\uff1f\u4e5f\u5c31\u662f\u5e38\u8bf4\u7684\u5e27\u7387\u3002"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u5bf9mac\u8bbe\u7f6e\u5e27\u7387\u662f\u4e0d\u751f\u6548\u7684\u3002mac\u53ea\u80fd\u91c7\u96c6\u51fa\u676530\u5e27\u3002")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"\u6d6e\u70b9\u6570\u7684\u4e0d\u51c6\u786e\u6027")),Object(i.b)("p",null,"\u8fd9\u53ef\u80fd\u662f\u6700\u8be6\u7ec6\u7684CMTime\u6559\u7a0b: ",Object(i.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/f02aad2e7ff5"},"https://www.jianshu.com/p/f02aad2e7ff5")),Object(i.b)("h3",{id:"cmtime"},"CMTime"),Object(i.b)("p",null,"\u867d\u7136Apple\u5df2\u7ecf\u6709\u5f88\u591a\u6570\u636e\u7ed3\u6784\u6765\u8868\u793aMac\u548ciOS\u5e73\u53f0\u4e0a\u7684\u65f6\u95f4\uff0c\u4f46\u662f\u5728iOS4\u548cMac OS X 10.7 \u63a8\u51fa\u7684\u65f6\u5019\uff0c\u52a0\u4e0a\u4e86CMTime\u548cCMTimeRange\u3002CMTime\u7684\u7c7b\u578b\u5b9a\u4e49\u5982\u4e0b\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-objectivec"},"  typedef struct\n  {\n     CMTimeValue    value;        \n     CMTimeScale    timescale;    \n     CMTimeFlags    flags;        \n     CMTimeEpoch    epoch;        \n   } CMTime;\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-kotlin"},"  public typealias CMTimeValue = Int64\n  public typealias CMTimeScale = Int32\n")),Object(i.b)("p",null,"\u663e\u7136\uff0c",Object(i.b)("inlineCode",{parentName:"p"},"CMTime"),"\u5b9a\u4e49\u662f\u4e00\u4e2aC\u8bed\u8a00\u7684\u7ed3\u6784\u4f53\uff0cCMTime\u662f\u4ee5\u5206\u6570\u7684\u5f62\u5f0f\u8868\u793a\u65f6\u95f4\uff0c",Object(i.b)("inlineCode",{parentName:"p"},"value"),"\u8868\u793a\u5206\u5b50\uff0c",Object(i.b)("inlineCode",{parentName:"p"},"timescale"),"\u8868\u793a\u5206\u6bcd\uff0c",Object(i.b)("inlineCode",{parentName:"p"},"flags"),"\u662f\u4f4d\u63a9\u7801\uff0c\u8868\u793a\u65f6\u95f4\u7684\u6307\u5b9a\u72b6\u6001\u3002"),Object(i.b)("h2",{id:"\u91c7\u96c6\u7684\u8f93\u51fa"},"\u91c7\u96c6\u7684\u8f93\u51fa"),Object(i.b)("p",null,"\u91c7\u96c6\u5230\u7684\u6570\u636e\uff0c\u600e\u4e48\u8f93\u51fa\uff0c\u653e\u5230\u4ec0\u4e48\u5730\u65b9\uff1f"),Object(i.b)("h3",{id:"\u8f93\u51fa\u7684\u683c\u5f0f"},"\u8f93\u51fa\u7684\u683c\u5f0f"),Object(i.b)("p",null,"\u673a\u5668\u91c7\u96c6\u540e\u7684\u539f\u751f\u6570\u636e\uff0c\u4e00\u822c\u9700\u8981\u7ecf\u8fc7\u89e3\u7801\u6216\u8005\u5728\u7f16\u7801\uff08decode or re-encode\uff09\u540e\u8f93\u51fa\u3002"),Object(i.b)("p",null,"\u7f16\u89e3\u7801\u672c\u8d28\u4e0a\u662f\u6539\u53d8\u6570\u636e\u683c\u5f0f\u3002"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"/*!\n @property videoSettings\n @abstract\n    Specifies the settings used to decode or re-encode video before it is output by the receiver.\n \n @discussion\n    See AVVideoSettings.h for more information on how to construct a video settings dictionary. To receive samples in their device native format, set this property to an empty dictionary (i.e. [NSDictionary dictionary]). To receive samples in a default uncompressed format, set this property to nil. Note that after this property is set to nil, subsequent querying of this property will yield a non-nil dictionary reflecting the settings used by the AVCaptureSession's current sessionPreset.\n \n    On iOS, the only supported key is kCVPixelBufferPixelFormatTypeKey. Supported pixel formats are kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange, kCVPixelFormatType_420YpCbCr8BiPlanarFullRange and kCVPixelFormatType_32BGRA.\n */\n@property(nonatomic, copy, null_resettable) NSDictionary<NSString *, id> *videoSettings;\n")),Object(i.b)("p",null,"\u901a\u8fc7 videoSettings \u53ef\u4ee5\u5f97\u5230\u7684\u683c\u5f0f\u3002"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"device native format"),Object(i.b)("li",{parentName:"ul"},"default uncompressed format"),Object(i.b)("li",{parentName:"ul"},"\u6307\u5b9a\u7684\u683c\u5f0f\uff08iOS\u53ea\u67093\u79cd\uff09")),Object(i.b)("p",null,"Mac\u652f\u6301\u7684\u8bbe\u7f6e\u591a\u4e00\u4e9b\uff1a\u53c2\u89c1 AVVideoSettings.h"),Object(i.b)("h4",{id:"mac\u652f\u6301\u7684\u8f93\u51fa\u683c\u5f0f"},"mac\u652f\u6301\u7684\u8f93\u51fa\u683c\u5f0f"),Object(i.b)("p",null,"\u5bf9\u5e94\u7684\u662f\u673a\u5668\u786c\u4ef6\u652f\u6301\u7684format"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-objective-c"},'    NSLog(@"ff------ff:availableVideoCVPixelFormatTypes:%@",videoOutput.availableVideoCVPixelFormatTypes);\n    for (NSInteger i = 0; i<videoOutput.availableVideoCVPixelFormatTypes.count; i++) {\n        UInt32 fcode = [(videoOutput.availableVideoCVPixelFormatTypes[i]) unsignedIntValue];        \n        NSLog(@"kkk----%s",FourCC2Str(fcode));\n    }\n')),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"2021-04-02 16:20:21.576302+0800 pass-sdk-demo-m1-macOS[1980:1207589] ff------ff:availableVideoCVPixelFormatTypes:(\n    846624121,\n    2037741171,\n    875704438,\n    875704422,\n    32,\n    1111970369\n)\n2021-04-02 16:20:21.576409+0800 pass-sdk-demo-m1-macOS[1980:1207589] kkk----2vuy\n2021-04-02 16:20:21.576465+0800 pass-sdk-demo-m1-macOS[1980:1207589] kkk----yuvs\n2021-04-02 16:20:21.576504+0800 pass-sdk-demo-m1-macOS[1980:1207589] kkk----420v\n2021-04-02 16:20:21.576577+0800 pass-sdk-demo-m1-macOS[1980:1207589] kkk----420f\n2021-04-02 16:20:21.576676+0800 pass-sdk-demo-m1-macOS[1980:1207589] kkk----\n2021-04-02 16:20:21.576775+0800 pass-sdk-demo-m1-macOS[1980:1207589] kkk----BGRA\n")),Object(i.b)("h4",{id:"mac\u786c\u4ef6\u652f\u6301\u7684format"},"mac\u786c\u4ef6\u652f\u6301\u7684format"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-objective-c"},'+ (void)printSupportDeviceFormatsOfDevice:(AVCaptureDevice *)device {    \n    for (AVCaptureDeviceFormat *format in [device formats]) {\n        NSLog(@"\u652f\u6301\u7684\u7c7b\u578b\uff1a%@",format);\n    }\n}\n')),Object(i.b)("p",null,"AVCaptureVideoDataOutput \u8bbe\u7f6evideoSettings \u7684\u5206\u8fa8\u7387\u662f\u4e00\u4e2a\u671f\u671b\u503c\uff0cmac\u4f1a\u8fd4\u56de\u4e00\u4e2a\u6700\u5408\u9002\u7684\u5206\u8fa8\u7387\uff0c\u81f3\u4e8e\u662f\u5982\u4f55\u627e\u7684\uff0c\u8fd9\u4e2a\u76ee\u524d\u6211\u8fd8\u4e0d\u77e5\u9053\u3002\u76ee\u524d\u6765\u770b\uff0c\u4ed6\u7684\u5bfb\u627e\u7b97\u6cd5\u548cwebrtc \u6709\u4e9b\u76f8\u4f3c\u3002\u53d6\u957f\u5bbd\u7684\u7edd\u5bf9\u503c\u7684\u6700\u5c0f\u503c\u3002"),Object(i.b)("h3",{id:"\u4fdd\u5b58\u5230\u6587\u4ef6"},"\u4fdd\u5b58\u5230\u6587\u4ef6"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Mac\u6c99\u76d2")),Object(i.b)("p",null,Object(i.b)("img",{alt:"image-20210402113605597",src:n(877).default})),Object(i.b)("p",null,"macOS-Cocoa\u5f00\u53d1\u4e4b\u6c99\u76d2\u673a\u5236\u53ca\u8bbf\u95eeSandbox\u4e4b\u5916\u7684\u6587\u4ef6\uff1a",Object(i.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/c8785cb864e9"},"https://www.jianshu.com/p/c8785cb864e9")),Object(i.b)("p",null,"\u4e0d\u4e0a\u67b6\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5173\u95ed\u6c99\u76d2\uff0c\u65b9\u4fbf\u8c03\u8bd5\u3002"),Object(i.b)("h3",{id:"\u67e5\u770b\u6587\u4ef6\u4fe1\u606f"},"\u67e5\u770b\u6587\u4ef6\u4fe1\u606f"),Object(i.b)("h4",{id:"mediainfo"},"mediaInfo"),Object(i.b)("h4",{id:"yuveye"},"yuvEye"),Object(i.b)("h4",{id:"\u5206\u6790\u5de5\u5177"},"\u5206\u6790\u5de5\u5177"),Object(i.b)("p",null,"H264/H265/YUV\u7801\u6d41\u5206\u6790\u5de5\u5177\u63a8\u8350(\u4e00)\uff1a",Object(i.b)("a",{parentName:"p",href:"https://blog.csdn.net/u010164190/article/details/108551087"},"https://blog.csdn.net/u010164190/article/details/108551087")),Object(i.b)("hr",null),Object(i.b)("h5",{id:"\u91c7\u6837\u5de5\u5177"},Object(i.b)("strong",{parentName:"h5"},"\u91c7\u6837\u5de5\u5177")),Object(i.b)("p",null,"iOS/macOS\u7528\u4ec0\u4e48\u6765\u91c7\u96c6\u89c6\u9891\u6570\u636e\uff1f"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"AVCaptureSession"))),Object(i.b)("p",null,"AVFoundation \u6846\u67b6\u4e0b\u4e13\u95e8\u6709\u4e00\u90e8\u5206\u8bb2\u89e3Capture\u3002"),Object(i.b)("p",null,Object(i.b)("img",{alt:"image-20210202214731561",src:n(878).default})),Object(i.b)("p",null,"\u91cd\u70b9\u7c7b\uff1a",Object(i.b)("inlineCode",{parentName:"p"},"AVCaptureSession")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"AVCaptureDevice"),": \u4fe1\u53f7\u91c7\u96c6\u786c\u4ef6\u8bbe\u5907(\u6444\u50cf\u5934\u3001\u9ea6\u514b\u98ce\u3001\u5c4f\u5e55\u7b49)"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"AVCaptureInput"),": \u8bbe\u5907\u8f93\u5165\u4fe1\u53f7"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"AVCaptureOutput"),"\uff1a\u8bbe\u5907\u8f93\u51fa\u4fe1\u53f7"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"AVCaptureSession"),"\uff1aAVCaptureSession\u662f\u6574\u4e2aCapture\u7684\u6838\u5fc3\u3002\u7c7b\u4f3c\u4e8eRunLoop\uff0c\u5b83\u4e0d\u65ad\u7684\u4ece\u8f93\u5165\u6e90\u83b7\u53d6\u6570\u636e\uff0c\u7136\u540e\u5206\u53d1\u7ed9\u5404\u4e2a\u8f93\u51fa\u6e90\u3002"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"AVCaptureConnection"),"\uff1aAVCaptureConnections\u662fSession\u548cOutput\u4e2d\u95f4\u7684\u63a7\u5236\u8282\u70b9\u3002\u6bcf\u4e2aOutput\u4e0eSession\u5efa\u7acb\u8fde\u63a5\u540e\uff0c\u90fd\u4f1a\u5206\u914d\u4e00\u4e2a\u9ed8\u8ba4\u7684AVCpatureConnection"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"AVCapturePreviewLayer"),"\uff1a\u9884\u89c8\u5c42\uff0c\u662f\u4e00\u4e2aCALayer\u5bf9\u8c61\uff0c\u63d0\u4f9b\u6444\u50cf\u5934\u7684\u9884\u89c8\u529f\u80fd\uff0c\u7167\u7247\u4ee5\u53ca\u89c6\u9891\u5c31\u662f\u901a\u8fc7\u628aAVCapturePreviewLayer\u6dfb\u52a0\u5230UIView \u7684layer\u4e0a\u6765\u663e\u793a"),Object(i.b)("h6",{id:"\u6355\u83b7\u683c\u5f0f"},"\u6355\u83b7\u683c\u5f0f"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"AVCaptureDeviceFormat")," "),Object(i.b)("p",null,"\u53c2\u8003\uff1a",Object(i.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/155efb36e041"},"https://www.jianshu.com/p/155efb36e041")),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"\u53ea\u80fd\u5728\u51e0\u4e2a\u652f\u6301\u7684\u6355\u83b7\u683c\u5f0f\u4e2d\u9009\u62e9\u3002\u5426\u5219\u4f1a\u62a5\u51fa\u5f02\u5e38\u3002"),Object(i.b)("li",{parentName:"ol"},"\u8bbe\u7f6e\u6d3b\u52a8\u6355\u83b7\u683c\u5f0f\u524d\u540e\u9700\u8981\u52a0\u9501\u3002")),Object(i.b)("p",null,"sessionPreset"),Object(i.b)("h5",{id:"\u65f6\u95f4\u6233"},"\u65f6\u95f4\u6233"),Object(i.b)("h5",{id:"\u91c7\u96c6\u8bbe\u7f6e"},"\u91c7\u96c6\u8bbe\u7f6e"),Object(i.b)("h6",{id:"\u8bbe\u5907\u7c7b\u578b"},"\u8bbe\u5907\u7c7b\u578b"),Object(i.b)("p",null,"AVCaptureDeviceType"),Object(i.b)("p",null,"\u8bbe\u5907\u7c7b\u578b",Object(i.b)("a",{parentName:"p",href:"https://developer.apple.com/documentation/avfoundation/avcapturedevicetype?changes=latest_minor&language=objc"},"AVCaptureDeviceType"),"\u662f\u4f7f\u7528",Object(i.b)("inlineCode",{parentName:"p"},"typedef"),"\u4fee\u9970\u7684\u6807\u8bc6\u7b26\uff0c\u63d0\u4f9b\u5404\u79cd\u8bbe\u5907\u7c7b\u578b\uff0c\u4e0e",Object(i.b)("inlineCode",{parentName:"p"},"+ defaultDeviceWithDeviceType:mediaType:position:"),"\u65b9\u6cd5\u548c",Object(i.b)("inlineCode",{parentName:"p"},"AVCaptureDeviceDiscoverySession"),"\u7c7b\u4e00\u8d77\u4f7f\u7528\u3002"),Object(i.b)("table",null,Object(i.b)("thead",{parentName:"table"},Object(i.b)("tr",{parentName:"thead"},Object(i.b)("th",{parentName:"tr",align:null},"\u8bbe\u5907\u7c7b\u578b",Object(i.b)("inlineCode",{parentName:"th"},"AVCaptureDeviceType")),Object(i.b)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),Object(i.b)("tbody",{parentName:"table"},Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"AVCaptureDeviceTypeBuiltInMicrophone")),Object(i.b)("td",{parentName:"tr",align:null},"\u4e00\u4e2a\u5185\u7f6e\u7684\u9ea6\u514b\u98ce")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"AVCaptureDeviceTypeBuiltInWideAngleCamera")),Object(i.b)("td",{parentName:"tr",align:null},"\u5185\u7f6e\u5e7f\u89d2\u76f8\u673a,\u8fd9\u4e9b\u88c5\u7f6e\u9002\u7528\u4e8e\u4e00\u822c\u7528\u9014\u3002")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"AVCaptureDeviceTypeBuiltInTelephotoCamera")),Object(i.b)("td",{parentName:"tr",align:null},"\u5185\u7f6e\u957f\u7126\u76f8\u673a\uff0c\u6bd4\u5e7f\u89d2\u76f8\u673a\u7684\u7126\u8ddd\u957f\u3002\u8fd9\u79cd\u7c7b\u578b\u53ea\u662f\u5c06\u7a84\u89d2\u8bbe\u5907\u4e0e\u914d\u5907\u4e24\u79cd\u7c7b\u578b\u7684\u6444\u50cf\u673a\u7684\u786c\u4ef6\u4e0a\u7684\u5bbd\u89d2\u8bbe\u5907\u533a\u5206\u5f00\u6765\u3002\u8981\u786e\u5b9a\u6444\u50cf\u673a\u8bbe\u5907\u7684\u5b9e\u9645\u7126\u8ddd\uff0c\u53ef\u4ee5\u68c0\u67e5",Object(i.b)("inlineCode",{parentName:"td"},"AVCaptureDevice"),"\u7684",Object(i.b)("inlineCode",{parentName:"td"},"format"),"\u6570\u7ec4\u4e2d\u7684",Object(i.b)("inlineCode",{parentName:"td"},"AVCaptureDeviceFormat"),"\u5bf9\u8c61\u3002")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"AVCaptureDeviceTypeBuiltInDualCamera")),Object(i.b)("td",{parentName:"tr",align:null},"\u5e7f\u89d2\u76f8\u673a\u548c\u957f\u7126\u76f8\u673a\u7684\u7ec4\u5408\uff0c\u521b\u5efa\u4e86\u4e00\u4e2a\u62cd\u7167\uff0c\u5f55\u50cf\u7684",Object(i.b)("inlineCode",{parentName:"td"},"AVCaptureDevice"),"\u3002\u5177\u6709\u548c\u6df1\u5ea6\u6355\u6349\uff0c\u589e\u5f3a\u53d8\u7126\u548c\u53cc\u56fe\u50cf\u6355\u6349\u529f\u80fd\u3002")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"AVCaptureDeviceTypeBuiltInTrueDepthCamera")),Object(i.b)("td",{parentName:"tr",align:null},"\u76f8\u673a\u548c\u5176\u4ed6\u4f20\u611f\u5668\u7684\u7ec4\u5408\uff0c\u521b\u5efa\u4e86\u4e00\u4e2a\u6355\u6349\u8bbe\u5907\uff0c\u80fd\u591f\u62cd\u7167\u3001\u89c6\u9891\u548c\u6df1\u5ea6\u6355\u6349\u3002")),Object(i.b)("tr",{parentName:"tbody"},Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"AVCaptureDeviceTypeBuiltInDuoCamera")),Object(i.b)("td",{parentName:"tr",align:null},Object(i.b)("inlineCode",{parentName:"td"},"iOS 10.2")," \u4e4b\u540e\u6dfb\u52a0\u81ea\u52a8\u53d8\u7126\u529f\u80fd\uff0c\u8be5\u503c\u529f\u80fd\u88ab",Object(i.b)("inlineCode",{parentName:"td"},"AVCaptureDeviceTypeBuiltInDualCamera"),"\u66ff\u4ee3")))),Object(i.b)("p",null,"\u4f5c\u8005\uff1a\u82cf\u6cab\u79bb\n\u94fe\u63a5\uff1a",Object(i.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/155efb36e041"},"https://www.jianshu.com/p/155efb36e041"),"\n\u6765\u6e90\uff1a\u7b80\u4e66\n\u8457\u4f5c\u6743\u5f52\u4f5c\u8005\u6240\u6709\u3002\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002"),Object(i.b)("h6",{id:"\u8bbe\u5907\u4f4d\u7f6e"},"\u8bbe\u5907\u4f4d\u7f6e"),Object(i.b)("p",null,"\u524d\u7f6e\u8fd8\u662f\u540e\u7f6e"),Object(i.b)("p",null,"AVCaptureDevicePosition"),Object(i.b)("h6",{id:"\u8bbe\u5907\u9009\u62e9"},"\u8bbe\u5907\u9009\u62e9"),Object(i.b)("h6",{id:"\u91c7\u96c6\u683c\u5f0f-avtiveformat"},"\u91c7\u96c6\u683c\u5f0f-avtiveformat"),Object(i.b)("p",null,"AVCaptureDeviceFormat"),Object(i.b)("p",null,"\u4e00\u4e2aperset \u4e00\u4e2aactiveformat\u3002"),Object(i.b)("p",null,"When using a session preset, the session automatically controls the capture device\u2019s active format. However, some specialized capture options (such as high frame rate) are not available in session presets. For these options, you can set the capture device\u2019s active format instead. Doing so changes the associated capture session\u2019s preset to ",Object(i.b)("a",{parentName:"p",href:"doc://com.apple.documentation/documentation/avfoundation/avcapturesessionpresetinputpriority?language=objc"},Object(i.b)("inlineCode",{parentName:"a"},"AVCaptureSessionPresetInputPriority")),"."),Object(i.b)("p",null,"\u9ad8\u5e27\u7387 \u5fc5\u987b\u5f97\u4f7f\u7528 activeformat\u3002"),Object(i.b)("p",null," \u963b\u6b62activeformat \u81ea\u52a8\u6539\u53d8\u7684\u65b9\u6cd5\u3002"),Object(i.b)("p",null," ",Object(i.b)("a",{parentName:"p",href:"https://developer.apple.com/documentation/avfoundation/avcapturedevice/1387810-lockforconfiguration?language=objc"},"https://developer.apple.com/documentation/avfoundation/avcapturedevice/1387810-lockforconfiguration?language=objc")),Object(i.b)("p",null,"\u53c2\u8003\uff1a"),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://stackoverflow.com/questions/36689578/avfoundation-capturing-video-with-custom-resolution/40097057"},"https://stackoverflow.com/questions/36689578/avfoundation-capturing-video-with-custom-resolution/40097057")),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://stackoverflow.com/questions/15608931/mac-osx-avfoundation-video-capture"},"https://stackoverflow.com/questions/15608931/mac-osx-avfoundation-video-capture")),Object(i.b)("p",null," ",Object(i.b)("a",{parentName:"p",href:"https://stackoverflow.com/questions/36689578/avfoundation-capturing-video-with-custom-resolution/40097057"},"https://stackoverflow.com/questions/36689578/avfoundation-capturing-video-with-custom-resolution/40097057")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u9009\u62e9\u6700\u4f73format")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"  kCVPixelFormatType_420YpCbCr8BiPlanarFullRange  = '420f', /* Bi-Planar Component Y'CbCr 8-bit 4:2:0, full-range (luma=[0,255] chroma=[1,255]).  baseAddr points to a big-endian CVPlanarPixelBufferInfo_YCbCrBiPlanar struct */ \n")),Object(i.b)("p",null," \u6ce8\u610f\u4e00\u4e2aFourCharCode"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"}," pixelFormat\n ios:\n kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange = '420v'\n kCVPixelFormatType_420YpCbCr8BiPlanarFullRange  = '420f'\n \n mac:\n kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange = '420v'\n kCVPixelFormatType_422YpCbCr8_yuvs = 'yuvs'\n \n \u5982\u679c\u8981\u6c42\u91c7\u6837420\u7684\u8bdd\uff0c\u90a3\u4e48mac\u5c31\u53ea\u80fd\u7528 420v\u3002ios\u5982\u679c\u8981\u548cmac\u7edf\u4e00\u7684\u8bdd\uff0c\u6700\u597d\u4e5f\u7528420v\u3002\n")),Object(i.b)("h6",{id:"\u91c7\u96c6\u5e27\u5927\u5c0f"},"\u91c7\u96c6\u5e27\u5927\u5c0f"),Object(i.b)("p",null,"\u7b2c\u4e00\u79cd\u65b9\u5f0f\uff1a"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"@property(nonatomic, copy) AVCaptureSessionPreset sessionPreset;")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"    _session = [AVCaptureSession new];\n    [_session setSessionPreset:AVCaptureSessionPreset352x288];\n")),Object(i.b)("p",null,"\u7b2c\u4e8c\u79cd\u65b9\u5f0f\uff1a"),Object(i.b)("p",null,"AVCaptureDevice.formats"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"An AVCaptureDeviceFormat object describes in detail the video, image, or audio parameters of a specific mode of capture. If you need access to capture settings not covered by an AVCaptureSession preset, you can set the activeFormat property to any of the formats in this array.\nYou can observe changes to the value of this property using Key-value observing.\n")),Object(i.b)("h5",{id:"yuv420\u91c7\u6837\u4e4b\u540e\u7684\u6570\u636e\u5927\u5c0f"},"YUV420\u91c7\u6837\u4e4b\u540e\u7684\u6570\u636e\u5927\u5c0f"),Object(i.b)("p",null,"\u6bcf\u4e2aY/U/V\u7684\u91c7\u6837\u70b9\u7528",Object(i.b)("strong",{parentName:"p"},"8bit"),"\u6765\u8868\u793a\uff0c\u53731Bytes."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"720p")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-undefined"},"1280 * 720 * 8 *(1 + 1/4 + 1/4) / 8 \n= 1382400 Bytes\n= 1350 KB\n\u7ea6= 1.318359375 M\n")),Object(i.b)("p",null,"\u5927\u7ea6\u662f",Object(i.b)("strong",{parentName:"p"},"1.3M"),"\u3002"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"1080p")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-undefined"},"1920 * 1080 * 8 *(1 + 1/4 + 1/4) / 8 \n= 3110400 Bytes\n=  3037.5 KB\n\u7ea6= 2.966308594 M\n")),Object(i.b)("p",null,"\u5927\u7ea6",Object(i.b)("strong",{parentName:"p"},"3M"),"\u3002"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"640*360")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"640*360*8*(1+1/4+1/4)/8\n=345600 Bytes\n=337.5KB\n")),Object(i.b)("p",null,"\u4f5c\u8005\uff1aFlyingPenguin\n\u94fe\u63a5\uff1a",Object(i.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/b14391ca8fdf"},"https://www.jianshu.com/p/b14391ca8fdf"),"\n\u6765\u6e90\uff1a\u7b80\u4e66\n\u8457\u4f5c\u6743\u5f52\u4f5c\u8005\u6240\u6709\u3002\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002"),Object(i.b)("p",null,"xcode Mac\u5de5\u7a0b\u914d\u7f6e \u91c7\u96c6\u6ce8\u610f\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"/*\n \n \u5f53mac app\u5f00\u542f\u4e86hardened runtime\u65f6\uff0c\u5982\u679centitlement\u6587\u4ef6\u6ca1\u6709\u6b63\u786e\u8bbe\u7f6e\uff0c\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u5728\u83b7\u53d6\u6743\u9650\u65f6\u5d29\u6e83\u3002\n \n entitlements\u6587\u4ef6\u4e2d\u6dfb\u52a0com.apple.security.device.camera\u8bbe\u7f6e\u4e3aYES\u5373\u53ef\n \n hardruntime \u6709\u5173\u7684entitlement\u8bf4\u660e\u89c1\u94fe\u63a5\n \u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\n \u7248\u6743\u58f0\u660e\uff1a\u672c\u6587\u4e3aCSDN\u535a\u4e3b\u300cCaicaiNo.1\u300d\u7684\u539f\u521b\u6587\u7ae0\uff0c\u9075\u5faaCC 4.0 BY-SA\u7248\u6743\u534f\u8bae\uff0c\u8f6c\u8f7d\u8bf7\u9644\u4e0a\u539f\u6587\u51fa\u5904\u94fe\u63a5\u53ca\u672c\u58f0\u660e\u3002\n \u539f\u6587\u94fe\u63a5\uff1ahttps://blog.csdn.net/shengpeng3344/article/details/103558765\n */\n")),Object(i.b)("p",null,Object(i.b)("img",{alt:"image-20210318183505041",src:n(879).default})),Object(i.b)("p",null,Object(i.b)("img",{alt:"image-20210318183448988",src:n(880).default})),Object(i.b)("p",null,"\u53c2\u8003\uff1aiOS\u81ea\u5b9a\u4e49\u76f8\u673a/\u53c2\u6570\u8c03\u8282/\u89c6\u9891\u901f\u7387\u8c03\u8282/\u89c6\u9891\u5408\u5e76\uff1a",Object(i.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/06ed571fb3b5"},"https://www.jianshu.com/p/06ed571fb3b5")),Object(i.b)("p",null,"\u53c2\u8003\uff1aOC\u4e4bAVCaptureDevice ",Object(i.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/155efb36e041"},"https://www.jianshu.com/p/155efb36e041")),Object(i.b)("h5",{id:"\u989c\u8272\u7f16\u7801\u8272\u5f69\u7a7a\u95f4"},"\u989c\u8272\u7f16\u7801/\u8272\u5f69\u7a7a\u95f4"),Object(i.b)("h6",{id:"rgb"},"RGB"),Object(i.b)("p",null,"RGB\uff08\u7ea2\u3001\u7eff\u3001\u84dd\uff09\u53ea\u662f\u4f17\u591a\u989c\u8272\u7a7a\u95f4\u7684\u4e00\u79cd\u3002\u91c7\u7528\u8fd9\u79cd\u7f16\u7801\u65b9\u6cd5\uff0c\u6bcf\u79cd\u989c\u8272\u90fd\u53ef\u7528\u4e09\u4e2a\u53d8\u91cf\u6765\u8868\u793a-\u7ea2\u8272\u7eff\u8272\u4ee5\u53ca\u84dd\u8272\u7684\u5f3a\u5ea6\u3002\u8bb0\u5f55\u53ca\u663e\u793a\u5f69\u8272\u56fe\u50cf\u65f6\uff0cRGB\u662f\u6700\u5e38\u89c1\u7684\u4e00\u79cd\u65b9\u6848\u3002"),Object(i.b)("h6",{id:"yuv"},"YUV"),Object(i.b)("p",null,"YUV\u6a21\u578b\u9996\u5148\u5c06\u4eae\u5ea6\u8fd9\u4e00\u4eba\u773c\u6700\u4e3a\u654f\u611f\u7684\u8981\u7d20\u62bd\u79bb\u4e86\u51fa\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u53ea\u6709\u4eae\u5ea6\u4fe1\u606f\u7684\u5e73\u9762\uff0c\u7136\u540e\u624d\u662f\u63cf\u8ff0\u5177\u4f53\u8272\u5f69\u7684U\u548cV\u5e73\u9762\uff0c\u5206\u522b\u5177\u6709\u8272\u5ea6\uff08Chrominance\uff09\u548c\u6d53\u5ea6\uff08Chroma\uff09\u4fe1\u606f\u3002"),Object(i.b)("p",null,Object(i.b)("img",{alt:"img",src:n(881).default})),Object(i.b)("p",null,"YUV\u4e09\u4e2a\u901a\u9053\u7684\u4e0d\u540c\u4fe1\u606f\n\u4ece\u4e0a\u5230\u4e0b\u5206\u522b\u4e3aY\u3001U\u3001V\n\u56fe\u7247\u6765\u81ea\u4e8e",Object(i.b)("a",{parentName:"p",href:"https://upload.wikimedia.org/wikipedia/commons/2/29/Barn-yuv.png"},"Wikipedia")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u4e3a\u4ec0\u4e48\u4f7f\u7528YUV\uff1f")),Object(i.b)("p",null,"\u90a3\u4e48\u4e3a\u4ec0\u4e48\u6709\u4e86RGB\u6211\u4eec\u4ecd\u7136\u9700\u8981YUV\u5462\uff1f\u6211\u4eec\u8981\u56de\u5230\u4eba\u7c7b\u521a\u62e5\u6709\u5f69\u8272\u7535\u89c6\u7684\u65f6\u5019\uff0c\u5728\u90a3\u6bb5\u4ece\u9ed1\u767d\u7535\u89c6\u5411\u5f69\u8272\u7535\u89c6\u7684\u8fc7\u6e21\u671f\uff0c\u7535\u89c6\u7cfb\u7edf\u9700\u8981\u63d0\u4f9b\u5bf9\u9ed1\u767d\u7535\u89c6\u7684\u517c\u5bb9\u6027\uff0c\u53e6\u5916\u8fd8\u8981\u8003\u8651\u5230\u7535\u89c6\u5e7f\u64ad\u7cfb\u7edf\u90a3\u6709\u9650\u7684\u5e26\u5bbd\uff0c\u5982\u679c\u4f7f\u7528RGB\u989c\u8272\u6a21\u578b\uff0c\u90a3\u4e48\u4f20\u8f93\u5e26\u5bbd\u5c31\u662f\u539f\u6765\u7684\u4e09\u500d\u3002\u4e3b\u8981\u662f\u4ee5\u4e0a\u4e24\u4e2a\u539f\u56e0\uff0c\u80fd\u591f\u517c\u5bb9\u9ed1\u767d\u7535\u89c6\u7cfb\u7edf\u548c\u66f4\u4e3a\u8282\u7701\u5e26\u5bbd\u7684YUV\u8272\u5f69\u6a21\u578b\u5c31\u88ab\u53d1\u660e\u4e86\u51fa\u6765\uff0c\u5b83\u4e0eRGB\u4e4b\u95f4\u662f\u65e0\u635f\u8f6c\u6362\u7684\u3002"),Object(i.b)("p",null,"\u6709\u95ee\u6709\u7b54\uff1a\u4ec0\u4e48\u662fYUV\u3001YPbPr\u3001YCbCr\uff1f\uff1a",Object(i.b)("a",{parentName:"p",href:"https://www.expreview.com/72374.html"},"https://www.expreview.com/72374.html")),Object(i.b)("p",null,"\u800cYPbPr\u3001YCbCr\u53ea\u662fYUV\u5728\u4e0d\u540c\u9886\u57df\u4e2d\u7684\u5177\u73b0\u5316\u7f62\u4e86\uff0c\u5176\u5b9e\u5c31\u662f\u4e00\u4e2a\u4e1c\u897f\u3002"),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"\u53ef\u4ee5\u770b\u4e00\u4e0b\u81ea\u5df1\u7684\u6234\u5c14\u663e\u793a\u5668 \u989c\u8272\u9009\u9879 \u6709\u8f93\u5165\u989c\u8272\u683c\u5f0f\u9009\u9879\u53ef\u4ee5\u9009\u62e9RGB \u548c YPbPr\u3002")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",{parentName:"li",href:"https://welkinchen.pixnet.net/blog/post/5446075-yuv%2c-ypbpr-%26-ycbcr-%E5%B7%AE%E7%95%B0"},"YUV, YPbPr & YCbCr \u5dee\u7570"))),Object(i.b)("p",null,"YUV (YPbPr/YCbCr) \u6307\u7684\u90fd\u662f\u8272\u5dee\u8a0a\u865f, \u4e0d\u540c\u7684\u662fYPbPr \u662f\u985e\u6bd4\u8272\u5dee\u8a0a\u865f, YCbCr \u662f\u6578\u4f4d\u8272\u5dee\u8a0a\u865f.\n( \u8d77\u5148 YUV \u61c9\u8a72\u662f\u6307 YPbPr , \u4f46\u61c9\u8a72\u770b\u6210YUV YPbPr/YCbCr  )"),Object(i.b)("p",null,"\u4e8b\u5be6\u4e0a\u5982\u524d\u9762\u6240\u8aaa\uff0cYCbCr\u662f\u6578\u4f4d\u8655\u7406\u50b3\u8f38\u8a0a\u865f\uff0cYPbPr\u662f\u985e\u6bd4\u50b3\u8f38\u8a0a\u865f"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"RGB\u548cYUV")),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/cd7e73005ac4"},"https://www.jianshu.com/p/cd7e73005ac4")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"YUV\u683c\u5f0f\u901a\u5e38\u6709\u4e24\u5927\u7c7b\uff1a\u6253\u5305\uff08packed\uff09\u683c\u5f0f\u548c\u5e73\u9762\uff08planar\uff09\u683c\u5f0f\u3002")),Object(i.b)("p",null,"\u524d\u8005\u5c06YUV\u5206\u91cf\u5b58\u653e\u5728\u540c\u4e00\u4e2a\u6570\u7ec4\u4e2d\uff0c\u901a\u5e38\u662f\u51e0\u4e2a\u76f8\u90bb\u7684\u50cf\u7d20\u7ec4\u6210\u4e00\u4e2a\u5b8f\u50cf\u7d20\uff08macro-pixel\uff09\uff1b\u800c\u540e\u8005\u4f7f\u7528\u4e09\u4e2a\u6570\u7ec4\u5206\u5f00\u5b58\u653eYUV\u4e09\u4e2a\u5206\u91cf\uff0c\u5c31\u50cf\u662f\u4e00\u4e2a\u4e09\u7ef4\u5e73\u9762\u4e00\u6837\u3002"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"YUV420 ")),Object(i.b)("p",null,"4:2:0\u5e76\u4e0d\u610f\u5473\u7740\u53ea\u6709Y\uff0cCb\u800c\u6ca1\u6709Cr\u5206\u91cf\u3002\u5b83\u6307\u5f97\u662f\u5bf9\u6bcf\u884c\u626b\u63cf\u7ebf\u6765\u8bf4\uff0c\u53ea\u6709\u4e00\u79cd\u8272\u5ea6\u5206\u91cf\u4ee52:1\u7684\u62bd\u6837\u7387\u5b58\u50a8\u3002\u76f8\u90bb\u7684\u626b\u63cf\u884c\u5b58\u50a8\u4e0d\u540c\u7684\u8272\u5ea6\u5206\u91cf\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u4e00\u884c\u662f4:2:0\u7684\u8bdd\uff0c\u4e0b\u4e00\u884c\u5c31\u662f4:0:2\uff0c\u518d\u4e0b\u4e00\u884c\u662f4:2:0...\u4ee5\u6b64\u7c7b\u63a8\u3002"),Object(i.b)("p",null,Object(i.b)("img",{alt:"image-20211005125901383",src:n(882).default})),Object(i.b)("hr",null),Object(i.b)("p",null,"\u6570\u636e\u91cf\u8ba1\u7b97"),Object(i.b)("p",null,"YUV = Y*1.5"),Object(i.b)("p",null,"YUV = RGB/2"),Object(i.b)("p",null,"\u4f7f\u7528YUV\u91c7\u96c6\uff0c\u6570\u636e\u91cf\u76f4\u63a5\u5c11\u4e00\u534a\u3002"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u65e2\u7136YUV\u66f4\u6709\u4f18\u52bf\uff0c\u4e3a\u4ec0\u4e48\u8fd8\u8981\u4fdd\u7559RGB\u5462\uff1f")),Object(i.b)("p",null,"\u56e0\u4e3a\u76ee\u524d\u4eba\u7c7b\u53d1\u660e\u7684\u6240\u6709\u5f69\u8272\u7684\u8f93\u5165\u8f93\u51fa\u8bbe\u5907\uff0c\u672c\u8d28\u4e0a\u90fd\u53ea\u652f\u6301RGB\u6570\u636e\u3002\u54ea\u6015\u8bbe\u5907\u5141\u8bb8YUV\u7684\u8f93\u5165\u8f93\u51fa\uff0c\u90a3\u4e5f\u662f\u7ecf\u8fc7\u5185\u90e8\u7684\u6570\u636e\u8f6c\u6362\u800c\u95f4\u63a5\u652f\u6301\u3002"),Object(i.b)("p",null,"yuv\u548crgb\u5404\u6709\u4ec0\u4e48\u4f18\u70b9\uff1f\uff1a",Object(i.b)("a",{parentName:"p",href:"https://www.zhihu.com/question/24994945"},"https://www.zhihu.com/question/24994945")),Object(i.b)("h5",{id:"\u683c\u5f0f\u8f6c\u6362pixelformat-\u8f6c\u6362"},"\u683c\u5f0f\u8f6c\u6362(PixelFormat \u8f6c\u6362)"),Object(i.b)("p",null,"ios\u8c03\u7528\u7cfb\u7edf\u6846\u67b6\u91c7\u96c6\u51fa\u7684\u89c6\u9891YUV\u683c\u5f0f\u9ed8\u8ba4\u4e3aNV12."),Object(i.b)("p",null,Object(i.b)("img",{alt:"img",src:n(883).default})),Object(i.b)("p",null,"\u53c2\u8003\uff1a\u89c6\u9891\u5b58\u50a8\u683c\u5f0fYUV420 NV12 NV21 i420 YV12\uff1a",Object(i.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/e67f79f10c65"},"https://www.jianshu.com/p/e67f79f10c65")),Object(i.b)("p",null,"I420:\u53c8\u53ebYU12\uff0c\u5b89\u5353\u7684\u6a21\u5f0f\u3002\u5b58\u50a8\u987a\u5e8f\u662f\u5148\u5b58Y\uff0c\u518d\u5b58U\uff0c\u6700\u540e\u5b58V\u3002YYYYUUUVVV"),Object(i.b)("p",null,"NV12:IOS\u53ea\u6709\u8fd9\u4e00\u79cd\u6a21\u5f0f\u3002\u5b58\u50a8\u987a\u5e8f\u662f\u5148\u5b58Y\uff0c\u518dUV\u4ea4\u66ff\u5b58\u50a8\u3002YYYYUVUVUV"),Object(i.b)("p",null,"NV21:\u5b89\u5353\u7684\u6a21\u5f0f\u3002\u5b58\u50a8\u987a\u5e8f\u662f\u5148\u5b58Y\uff0c\u518d\u5b58U\uff0c\u518dVU\u4ea4\u66ff\u5b58\u50a8\u3002YYYYVUVUVU"),Object(i.b)("p",null,"NV12 NV21 i420 YV12 \u8fd9\u4e9b\u662fyuv420\u7684\u5b58\u50a8\u683c\u5f0f\u3002\u4e5f\u5c31\u662f\u91c7\u96c6\u51fa\u6765\u7684\u6570\u636e\u5982\u4f55\u7ec4\u7ec7\uff1f\u7ec4\u7ec7\u6570\u636e\u7684\u4e0d\u540c\uff0c\u5c31\u662f\u4e0d\u540c\u7684\u6a21\u5f0f\u3002"),Object(i.b)("p",null,"YUV420\u5305\u542bYUV420p\u4e0eYUV420sp, \u533a\u522b\u5728\u4e8eplane\u6570\u91cf\u5206\u522b\u4e3a3\u548c2. "),Object(i.b)("p",null,"YUV420p\u5206\u4e3aYV12\u548cYU12(i420), \u6839\u636euv\u5206\u91cf\u7684\u987a\u5e8f\u4e0d\u540cYUV420p\u5206\u4e3aYV12\u548cYU12(i420), "),Object(i.b)("p",null,"YUV420sp\u5206\u4e3aNV12\u548cNV21. YUV420sp\u4e2duv\u5206\u91cf\u662f\u6742\u7cc5\u5728\u4e00\u4e2aplane\u4e2d\u4ee5uvuv\u6216\u8005vuvu\u7684\u987a\u5e8f\u5b58\u50a8\u4e0e\u7b2c\u4e8c\u4e2aplane."),Object(i.b)("p",null,"\u9700\u6c42\uff1a \u76ee\u524d\u9700\u8981\u5c06 nv12 \u8f6c\u6210 i420 \u7edf\u4e00\u5904\u7406\u3002"),Object(i.b)("p",null,"\u4e3a\u6ee1\u8db3\u4e0d\u540c\u4e1a\u52a1\u9700\u6c42,\u6211\u4eec\u9700\u8981\u628anv12\u8f6c\u6362\u4e3ai420\u6216\u8005rgba\u7b49\u683c\u5f0f.\nlibYUV\u5e93\u548cffmpeg\u90fd\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u8f7b\u677e\u641e\u5b9a.(\u63a8\u8350libyuv\u5e93,\u6027\u80fd\u6bd4ffmpeg\u9ad8\u51fa\u5f88\u591a)."),Object(i.b)("p",null,"libyuv\u63d0\u4f9b \u8fd9\u79cd\u8f6c\u6362\u80fd\u529b\u3002"),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://chromium.googlesource.com/libyuv/libyuv/"},"https://chromium.googlesource.com/libyuv/libyuv/")),Object(i.b)("p",null,"\u91c7\u96c6\u7684\u65f6\u5019\u6307\u5b9a\u683c\u5f0f"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-objective-c"},"        NSDictionary *settings = @{(NSString *)kCVPixelBufferPixelFormatTypeKey : @(kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange),\n                                   (NSString *)kCVPixelBufferWidthKey : @(self.videoConfig.dimension.width),\n                                   (NSString *)kCVPixelBufferHeightKey : @(self.videoConfig.dimension.height)\n\n")),Object(i.b)("p",null,"\u4e3b\u8981\u662f\uff1a",Object(i.b)("inlineCode",{parentName:"p"},"PixelFormatType")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"\u53d1\u73b0\u6709\u56db\u4e2a\uff0c\u5206\u522b\u5982\u4e0b\uff1a\n\nkCVPixelFormatType_420YpCbCr8Planar\n\nkCVPixelFormatType_420YpCbCr8PlanarFullRange\n\nkCVPixelFormatType_420YpCbCr8BiPlanarVideoRange\n\nkCVPixelFormatType_420YpCbCr8BiPlanarFullRange\n\n\u4f5c\u8005\uff1a\u7247\u7247\u788e\n\u94fe\u63a5\uff1ahttps://www.jianshu.com/p/e67f79f10c65\n\u6765\u6e90\uff1a\u7b80\u4e66\n\u8457\u4f5c\u6743\u5f52\u4f5c\u8005\u6240\u6709\u3002\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002\n")),Object(i.b)("p",null,"\u200b    //\u83b7\u5f97\u5e73\u9762\u6570"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"    CVPixelBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);\n    \n    CVPixelBufferLockBaseAddress(pixelBuffer, 0);\n    //\u83b7\u5f97\u5e73\u9762\u6570\n    int numberOfPlanes = (int)CVPixelBufferGetPlaneCount(pixelBuffer);\n")),Object(i.b)("p",null,"\u7ed3\u8bba\uff1aPlanar\u662f3  \u800cBiPlanar\u662f2"),Object(i.b)("p",null,"\u800cVideoRange\u548cFullRange\u662f\u53d6\u503c\u8303\u56f4"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange = '420v', /* Bi-Planar Component Y'CbCr 8-bit 4:2:0, video-range (luma=[16,235] chroma=[16,240]).\xa0 baseAddr points to a big-endian CVPlanarPixelBufferInfo_YCbCrBiPlanar struct */\n\nkCVPixelFormatType_420YpCbCr8BiPlanarFullRange\xa0 = '420f', /* Bi-Planar Component Y'CbCr 8-bit 4:2:0, full-range (luma=[0,255] chroma=[1,255]).\xa0 baseAddr points to a big-endian CVPlanarPixelBufferInfo_YCbCrBiPlanar struct */\n")),Object(i.b)("p",null,"Nv12 to i420"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-objective-c"},"    CVPixelBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);\n    \n    CVPixelBufferLockBaseAddress(pixelBuffer, 0);\n    //\u83b7\u5f97\u5e73\u9762\u6570\n    int numberOfPlanes = (int)CVPixelBufferGetPlaneCount(pixelBuffer);\n    assert(numberOfPlanes == 2);\n    if (numberOfPlanes != 2) {\n        CVPixelBufferUnlockBaseAddress(pixelBuffer, 0);\n        return;\n    }\n\n    int width = (int)CVPixelBufferGetWidth(pixelBuffer);\n    int height = (int)CVPixelBufferGetHeight(pixelBuffer);\n\n    void *src_y = CVPixelBufferGetBaseAddressOfPlane(pixelBuffer, 0);\n    void *src_uv = CVPixelBufferGetBaseAddressOfPlane(pixelBuffer, 1);\n        //\u5185\u5b58\u5bf9\u9f50\n    int src_stride_y = (int)CVPixelBufferGetBytesPerRowOfPlane(pixelBuffer, 0);\n    int src_stride_uv = (int)CVPixelBufferGetBytesPerRowOfPlane(pixelBuffer, 1);\n\n    void *i420 = malloc(width * height * 2);\n    \n    void *dst_y = i420;\n    void *dst_u = dst_y + width * height;\n    void *dst_v = dst_u + width * height / 4;\n    \n    \n    int dst_stride_y = width;\n    int dst_stride_u = width / 2;\n    int dst_stride_v = width / 2;\n    \n    NV12ToI420(src_y, src_stride_y,\n               src_uv, src_stride_uv,\n               dst_y, dst_stride_y,\n               dst_u, dst_stride_u,\n               dst_v, dst_stride_v,\n               width, height);\n")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"\u6df1\u5165\u7406\u89e3 CVPixelBufferRef"),"\uff1a",Object(i.b)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/24762605"},"https://zhuanlan.zhihu.com/p/24762605")),Object(i.b)("h6",{id:"\u8de8\u8ddd-stride"},"\u8de8\u8ddd-stride"),Object(i.b)("p",null,"\u8f6c\u4e00\u4e2ayuv\u7684stride\u77e5\u8bc6\uff1a",Object(i.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/907896648310"},"https://www.jianshu.com/p/907896648310")),Object(i.b)("p",null,"\u6211\u4eec\u90fd\u77e5\u9053\u73b0\u5728\u8ba1\u7b97\u673a\u7684cpu\u90fd\u662f32\u4f4d\u6216\u800564\u4f4d\u7684cpu\uff0c\u4ed6\u4eec\u4e00\u6b21\u6700\u5c11\u8bfb\u53d64\u30018\u4e2a\u5b57\u8282\uff0c\u5982\u679c\u5c11\u4e8e\u8fd9\u4e9b\uff0c\u53cd\u800c\u8981\u505a\u4e00\u4e9b\u989d\u5916\u7684\u5de5\u4f5c\uff0c\u4f1a\u82b1\u66f4\u957f\u7684\u65f6\u95f4\u3002\u6240\u6709\u4f1a\u6709\u4e00\u4e2a\u6982\u5ff5\u53eb\u505a\u5185\u5b58\u5bf9\u9f50\uff0c\u5c06\u7ed3\u6784\u4f53\u7684\u957f\u5ea6\u8bbe\u4e3a4\u30018\u7684\u500d\u6570\u3002"),Object(i.b)("p",null,"\u8de8\u8ddd\u5c31\u662f\u6307\u56fe\u50cf\u4e2d\u7684\u4e00\u884c\u56fe\u50cf\u6570\u636e\u6240\u5360\u7684\u5b58\u50a8\u7a7a\u95f4\u7684\u957f\u5ea6\uff0c\u5b83\u662f\u4e00\u4e2a\u5927\u4e8e\u7b49\u4e8e\u56fe\u50cf\u5bbd\u5ea6\u7684\u5185\u5b58\u5bf9\u9f50\u7684\u957f\u5ea6\u3002"),Object(i.b)("h5",{id:"\u91c7\u96c6\u53c2\u8003\u6587\u6863"},"\u91c7\u96c6\u53c2\u8003\u6587\u6863"),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://objccn.io/issue-21-3/"},Object(i.b)("strong",{parentName:"a"},"iOS \u4e0a\u7684\u76f8\u673a\u6355\u6349"))),Object(i.b)("p",null,"OC\u4e4bAVCaptureDevice: ",Object(i.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/155efb36e041"},"https://www.jianshu.com/p/155efb36e041")),Object(i.b)("p",null,"Activeformat: ",Object(i.b)("a",{parentName:"p",href:"https://developer.apple.com/documentation/avfoundation/avcapturedevice/1387810-lockforconfiguration?language=objc"},"https://developer.apple.com/documentation/avfoundation/avcapturedevice/1387810-lockforconfiguration?language=objc")),Object(i.b)("h2",{id:"\u95ee\u9898"},"\u95ee\u9898"),Object(i.b)("p",null,"\u66f4\u65b0capturesetting \u4f1a\u5bfc\u81f4mac\u754c\u9762\u5361\u987f\u3002"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"#pragma mark - setter\n- (void)setVideoConfig:(DbyCapturerConfig)videoConfig\n{\n    _videoConfig = videoConfig;\n\n\n    dispatch_async(self.sessionQueue, ^{\n        //\u8bbe\u7f6e\u5206\u8fa8\u7387\u548c\u5e27\u7387\n        [self.session beginConfiguration];\n\n#if TARGET_OS_OSX\n        NSDictionary *settings = @{(NSString *)kCVPixelBufferPixelFormatTypeKey : @(kCVPixelFormatType_420YpCbCr8BiPlanarFullRange),\n                                   (NSString *)kCVPixelBufferWidthKey : @(self.videoConfig.dimension.width),\n                                   (NSString *)kCVPixelBufferHeightKey : @(self.videoConfig.dimension.height)\n\n        };\n        self.videoOutput.videoSettings = settings;\n#endif\n        NSInteger dstRate;\n        [RZVideoUtil setCaptureFrameRate:videoConfig.frameRate\n                                  dstSize:videoConfig.dimension\n                                forDevice:self.currentDevice\n                          resultFrameRate:&dstRate];\n        [self.session commitConfiguration];\n    });\n}\n\n")),Object(i.b)("p",null,"\u62a5\u9519\u4fe1\u606f"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"2021-09-30 14:25:06.224700+0800 rzpaas_example_mac[32928:7429203] [] CMIOHardware.cpp:379:CMIOObjectGetPropertyData Error: 2003332927, failed\n")))}b.isMDXComponent=!0},331:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),l=function(e){var t=r.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},b=function(e){var t=l(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},s=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=A(e,["components","mdxType","originalType","parentName"]),b=l(n),s=a,d=b["".concat(c,".").concat(s)]||b[s]||u[s]||i;return n?r.a.createElement(d,o(o({ref:t},p),{},{components:n})):r.a.createElement(d,o({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,c=new Array(i);c[0]=s;var o={};for(var A in t)hasOwnProperty.call(t,A)&&(o[A]=t[A]);o.originalType=e,o.mdxType="string"==typeof e?e:a,c[1]=o;for(var p=2;p<i;p++)c[p]=n[p];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},876:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/47df73b5-5cba-4c41-894d-b0a2fb600d1c-20210321074130477-d54dc290f0d295e81efd14165a60cd0a.png"},877:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20210402113605597-36f003a71b7e7fe13cf6905abe2b9e65.png"},878:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20210202214731561-6a6d5e422ec6e7e6baa8a9f6e57385bf.png"},879:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20210318183505041-ea8ba3cc4c76ffcc4c4a5b22ecdc4d42.png"},880:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20210318183448988-00bf3830be40c8fc6f961307895ff980.png"},881:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/Barn-yuv-4e144e0ac5c81add849283d805e623a0.png"},882:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20211005125901383-102e2cfaeccd77d78d53f835169c569c.png"},883:function(e,t,n){"use strict";n.r(t),t.default="data:image/gif;base64,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"}}]);