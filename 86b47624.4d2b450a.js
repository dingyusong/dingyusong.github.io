(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{204:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return b})),n.d(t,"toc",(function(){return p})),n.d(t,"default",(function(){return s}));var a=n(3),l=n(7),c=(n(0),n(329)),r=["components"],i={},b={unversionedId:"\u7f16\u7a0b\u57fa\u7840/\u8ba1\u7b97\u673a\u7cfb\u7edf\u57fa\u7840/1-\u7a0b\u5e8f/1-\u6784\u5efa/CMake/CMake",id:"\u7f16\u7a0b\u57fa\u7840/\u8ba1\u7b97\u673a\u7cfb\u7edf\u57fa\u7840/1-\u7a0b\u5e8f/1-\u6784\u5efa/CMake/CMake",isDocsHomePage:!1,title:"CMake",description:"CMake",source:"@site/docs/\u7f16\u7a0b\u57fa\u7840/\u8ba1\u7b97\u673a\u7cfb\u7edf\u57fa\u7840/1-\u7a0b\u5e8f/1-\u6784\u5efa/CMake/CMake.md",slug:"/\u7f16\u7a0b\u57fa\u7840/\u8ba1\u7b97\u673a\u7cfb\u7edf\u57fa\u7840/1-\u7a0b\u5e8f/1-\u6784\u5efa/CMake/CMake",permalink:"/docs/\u7f16\u7a0b\u57fa\u7840/\u8ba1\u7b97\u673a\u7cfb\u7edf\u57fa\u7840/1-\u7a0b\u5e8f/1-\u6784\u5efa/CMake/CMake",editUrl:"dys-typora-open://mine/survival/docs/\u7f16\u7a0b\u57fa\u7840/\u8ba1\u7b97\u673a\u7cfb\u7edf\u57fa\u7840/1-\u7a0b\u5e8f/1-\u6784\u5efa/CMake/CMake.md",version:"current"},p=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",children:[{value:"\u4e3a\u4f55\u7528Cmake\uff1f",id:"\u4e3a\u4f55\u7528cmake\uff1f",children:[]},{value:"CMake\u662f\u4ec0\u4e48\uff1f",id:"cmake\u662f\u4ec0\u4e48\uff1f",children:[]}]},{value:"\u57fa\u7840",id:"\u57fa\u7840",children:[{value:"\u8bed\u6cd5",id:"\u8bed\u6cd5",children:[]},{value:"\u73af\u5883",id:"\u73af\u5883",children:[]},{value:"\u89e3\u91ca/\u6267\u884c",id:"\u89e3\u91ca\u6267\u884c",children:[]}]},{value:"\u4f7f\u7528\u8bf4\u660e",id:"\u4f7f\u7528\u8bf4\u660e",children:[{value:"target\u548cproject",id:"target\u548cproject",children:[]},{value:"\u8bbe\u7f6e",id:"\u8bbe\u7f6e",children:[]},{value:"CMake\u7f16\u8bd1\u6d41\u7a0b",id:"cmake\u7f16\u8bd1\u6d41\u7a0b",children:[]},{value:"cmake\u5de5\u7a0b\u76ee\u5f55\u7ed3\u6784",id:"cmake\u5de5\u7a0b\u76ee\u5f55\u7ed3\u6784",children:[]},{value:"\u6d4b\u8bd5",id:"\u6d4b\u8bd5",children:[]}]},{value:"\u4ea4\u53c9\u7f16\u8bd1",id:"\u4ea4\u53c9\u7f16\u8bd1",children:[]},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",children:[]},{value:"\u53c2\u8003\u6587\u6863",id:"\u53c2\u8003\u6587\u6863",children:[]}],o={toc:p};function s(e){var t=e.components,i=Object(l.a)(e,r);return Object(c.b)("wrapper",Object(a.a)({},o,i,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"cmake"},"CMake"),Object(c.b)("p",null,"[toc]"),Object(c.b)("p",null,"\u6e90\u7801\u6240\u5728\u4f4d\u7f6e"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://github.com/Kitware/CMake"},"https://github.com/Kitware/CMake")),Object(c.b)("h2",{id:"\u7b80\u4ecb"},"\u7b80\u4ecb"),Object(c.b)("h3",{id:"\u4e3a\u4f55\u7528cmake\uff1f"},"\u4e3a\u4f55\u7528Cmake\uff1f"),Object(c.b)("p",null,"\u5728linux\u73af\u5883\u7f16\u5199\u7a0b\u5e8f\uff0c\u56e0\u6ca1\u6709\u7c7b\u4f3c\u4e8evisual studio\u3001vs code\u7b49IDE(\u96c6\u6210\u5f00\u53d1\u73af\u5883)\uff0c\u90a3\u4e48\u5982\u4f55\u7f16\u8bd1\u3001\u8fd0\u884c\u7a0b\u5e8f\u5462\uff1f\u4e00\u79cd\u65b9\u6cd5\u662f\u7f16\u5199makefile\u6587\u4ef6\uff0c\u7528makefile\u6587\u4ef6\u7ba1\u7406\u7a0b\u5e8f\u811a\u672c\u4e4b\u95f4\u7684\u76f8\u4e92\u4f9d\u8d56\u5173\u7cfb\uff0c\u5176\u8bed\u6cd5\u76f8\u5bf9\u6bd4\u8f83\u590d\u6742\u3002\u53e6\u4e00\u79cd\u6709\u6548\u7684\u65b9\u6cd5\u5c31\u662f\u5229\u7528cmake\u5de5\u5177\uff0c\u81ea\u52a8\u751f\u6210makefile\u6587\u4ef6\u3002"),Object(c.b)("h3",{id:"cmake\u662f\u4ec0\u4e48\uff1f"},"CMake\u662f\u4ec0\u4e48\uff1f"),Object(c.b)("p",null,"CMake\u662f\u4e00\u4e2a",Object(c.b)("strong",{parentName:"p"},"\u8de8\u5e73\u53f0"),"\u7684\u5b89\u88c5\uff08\u7f16\u8bd1\uff09\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u7b80\u5355\u7684\u8bed\u53e5\u6765\u63cf\u8ff0\u6240\u6709\u5e73\u53f0\u7684\u5b89\u88c5(\u7f16\u8bd1\u8fc7\u7a0b)\u3002Linux/Ubuntu\u4e0a\u57fa\u672c\u90fd\u9884\u5148\u5b89\u88c5\u597d\u4e86cmake\u5de5\u5177\uff0c\u7528 sudo apt-get install \u4e5f\u53ef\u4ee5\u81ea\u52a8\u5b89\u88c5\u3002\u8981\u4f7f\u7528cmake\u5fc5\u987b\u5728\u5de5\u7a0b\u7684\u6bcf\u4e2a\u6587\u4ef6\u5939\u4e2d\u90fd\u7f16\u5199CMakeLists.txt\uff0c\u5c24\u5176\u6ce8\u610fC\u3001M\u3001L\u662f\u5927\u5199\uff0c\u5e76\u4e14\u662f\u590d\u6570\u5f62\u5f0f\u3002"),Object(c.b)("h2",{id:"\u57fa\u7840"},"\u57fa\u7840"),Object(c.b)("h3",{id:"\u8bed\u6cd5"},"\u8bed\u6cd5"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#cmake-language-variables"},"http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#cmake-language-variables")),Object(c.b)("p",null,"\u53ef\u4ee5\u5c06Cmake\u7406\u89e3\u4e3a\u4e00\u95e8\u8bed\u8a00\u3002"),Object(c.b)("h4",{id:"\u6570\u636e"},"\u6570\u636e"),Object(c.b)("p",null,"\u53d8\u91cf\u8bbe\u7f6e\uff0c\u53d8\u91cf\u5b58\u53d6"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#cmake-language-variables"},"http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#cmake-language-variables")),Object(c.b)("p",null,"Their values are always of string type, though some commands may interpret the strings as values of other types. "),Object(c.b)("p",null,"\u53d8\u91cf\u603b\u662fString\u7c7b\u578b\u3002"),Object(c.b)("p",null,"\u53c2\u8003 - ",Object(c.b)("a",{parentName:"p",href:"https://www.cnblogs.com/xianghang123/p/3556425.html"},"cmake \u5e38\u7528\u53d8\u91cf\u548c\u5e38\u7528\u73af\u5883\u53d8\u91cf\u67e5\u8868\u624b\u518c---\u6574\u7406 .")),Object(c.b)("h5",{id:"\u5185\u7f6e\u7684\u53d8\u91cf"},"\u5185\u7f6e\u7684\u53d8\u91cf"),Object(c.b)("h6",{id:"variables"},Object(c.b)("a",{parentName:"h6",href:"http://cmake.org/cmake/help/v3.21/manual/cmake-variables.7.html"},Object(c.b)("strong",{parentName:"a"},"variables"))),Object(c.b)("p",null,"9\u7c7b\u53d8\u91cf"),Object(c.b)("h6",{id:"env-variables"},Object(c.b)("a",{parentName:"h6",href:"http://cmake.org/cmake/help/v3.21/manual/cmake-env-variables.7.html"},Object(c.b)("strong",{parentName:"a"},"env-variables"))),Object(c.b)("p",null,"5\u7c7b\u73af\u5883\u53d8\u91cf"),Object(c.b)("hr",null),Object(c.b)("h6",{id:"property"},Object(c.b)("a",{parentName:"h6",href:"http://cmake.org/cmake/help/v3.21/manual/cmake-properties.7.html"},Object(c.b)("strong",{parentName:"a"},"property"))),Object(c.b)("p",null,"7\u7c7bproperty"),Object(c.b)("hr",null),Object(c.b)("p",null,"\u53d8\u91cf\u548cproperty\u7684\u533a\u522b"),Object(c.b)("p",null,"A very short and simple way to think about it is that properties are variables scoped to a target\u3002"),Object(c.b)("p",null,"Property\u662f\u4f5c\u7528\u5728target\u4e0a\u7684variables\u3002"),Object(c.b)("p",null,"\u53c2\u8003\uff1a",Object(c.b)("a",{parentName:"p",href:"https://stackoverflow.com/questions/49958208/what-is-the-difference-between-cmake-variables-and-properties"},"https://stackoverflow.com/questions/49958208/what-is-the-difference-between-cmake-variables-and-properties")),Object(c.b)("h5",{id:"\u81ea\u5b9a\u4e49\u53d8\u91cf"},"\u81ea\u5b9a\u4e49\u53d8\u91cf"),Object(c.b)("p",null,"The set() and unset() commands explicitly set or unset a variable"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"set(var ...) # \u6ca1\u6709\u7f13\u5b58\u7684\u53d8\u91cf\nset(Var ... CACHE) # \u6ca1\u6709\u7f13\u5b58\u624d\u8bbe\u7f6e\uff0c\u76f8\u5f53\u4e8eMakeFile \u7684 ?=\nset(Var ... FORCE) # \u5f3a\u5236\u4fee\u6539\u53d8\u91cf \n\n#eg\uff1aset(TTTT tttt) # \u4f7f\u7528${TTTT}\n")),Object(c.b)("hr",null),Object(c.b)("p",null,"\u5b57\u7b26\u4e32\u64cd\u4f5c"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"http://cmake.org/cmake/help/v3.21/command/string.html"},"http://cmake.org/cmake/help/v3.21/command/string.html")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'-- Found Python: /usr/local/Frameworks/Python.framework/Versions/3.9/bin/python3.9 (found version "3.9.6") found components: Interpreter\n-- Looking for pthread.h\n-- Looking for pthread.h - found\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD\n-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success\n-- Found Threads: TRUE\nCMake Error at CMakeLists.txt:34 (set_target_properties):\n  set_target_properties called with incorrect number of arguments.\n\n\n-- Configuring incomplete, errors occurred!\nSee also "/Users/dingyusong/Desktop/duobei/rz-logan-oc/build/CMakeFiles/CMakeOutput.log".\nCommand line invocation:\n    /Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild -project RZLogan.xcodeproj build -target ALL_BUILD -parallelizeTargets -configuration Debug -hideShellScriptEnvironment\n\nUser defaults from command line:\n    HideShellScriptEnvironment = YES\n    IDEPackageSupportUseBuiltinSCM = YES\n')),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'set_target_properties(${LIB_TARGET_NAME} \nPROPERTIES\nXCODE_ATTRIBUTE_CLANG_ENABLE_OBJC_ARC YES\nPUBLIC_HEADER "${public_headers}"\n# PUBLIC_HEADER ${public_headers}\n# CXX_VISIBILITY_PRESET hidden\n# VISIBILITY_INLINES_HIDDEN 1\n)\n')),Object(c.b)("h5",{id:"scope"},"Scope"),Object(c.b)("p",null,"\u53d8\u91cf\u7684\u4f5c\u7528\u57df"),Object(c.b)("h4",{id:"\u8fd0\u7b97"},"\u8fd0\u7b97"),Object(c.b)("p",null,"\u6570\u636e\u7684\u8fd0\u7b97\uff0c\u62fc\u63a5"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://cmake.org/cmake/help/v3.21/command/if.html#condition-syntax"},"https://cmake.org/cmake/help/v3.21/command/if.html#condition-syntax")),Object(c.b)("h5",{id:"\u903b\u8f91\u8fd0\u7b97"},"\u903b\u8f91\u8fd0\u7b97"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://cmake.org/cmake/help/v3.21/command/if.html#logic-operators"},"https://cmake.org/cmake/help/v3.21/command/if.html#logic-operators")),Object(c.b)("h5",{id:"\u6bd4\u8f83\u8fd0\u7b97"},"\u6bd4\u8f83\u8fd0\u7b97"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://cmake.org/cmake/help/v3.21/command/if.html#comparisons"},"https://cmake.org/cmake/help/v3.21/command/if.html#comparisons")),Object(c.b)("h4",{id:"\u63a7\u5236"},"\u63a7\u5236"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#control-structures"},"http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#control-structures")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'if(${PLATFORM} MATCHES "MAC")\n    project(RZLogan_macOS)\nelse()\n    project(RZLogan_iOS)\nendif()\n')),Object(c.b)("h4",{id:"\u8fc7\u7a0b"},"\u8fc7\u7a0b"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#command-definitions"},"http://cmake.org/cmake/help/v3.21/manual/cmake-language.7.html#command-definitions")),Object(c.b)("p",null,"The ",Object(c.b)("a",{parentName:"p",href:"https://cmake.org/cmake/help/v3.21/command/macro.html#command:macro"},Object(c.b)("inlineCode",{parentName:"a"},"macro()")),"/",Object(c.b)("a",{parentName:"p",href:"https://cmake.org/cmake/help/v3.21/command/endmacro.html#command:endmacro"},Object(c.b)("inlineCode",{parentName:"a"},"endmacro()")),", and ",Object(c.b)("a",{parentName:"p",href:"https://cmake.org/cmake/help/v3.21/command/function.html#command:function"},Object(c.b)("inlineCode",{parentName:"a"},"function()")),"/",Object(c.b)("a",{parentName:"p",href:"https://cmake.org/cmake/help/v3.21/command/endfunction.html#command:endfunction"},Object(c.b)("inlineCode",{parentName:"a"},"endfunction()"))," commands delimit code blocks to be recorded for later invocation as commands."),Object(c.b)("p",null,"\u7c7b\u4f3c\u51fd\u6570\uff0c\u81ea\u5b9a\u4e49\u51fd\u6570\uff0c\u51fd\u6570\u8c03\u7528\u7b49"),Object(c.b)("p",null,"cmake\u4e2d\u7684\u7c7b\u4f3c\u7684\u6982\u5ff5\u53ebcommand\u3002"),Object(c.b)("h5",{id:"\u81ea\u5b9a\u4e49\u51fd\u6570"},"\u81ea\u5b9a\u4e49\u51fd\u6570"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"http://cmake.org/cmake/help/v3.21/command/function.html"},"http://cmake.org/cmake/help/v3.21/command/function.html")),Object(c.b)("hr",null),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"macro")),Object(c.b)("p",null,"Start recording a macro for later invocation as a command"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"macro(<name> [<arg1> ...])\n  <commands>\nendmacro()\n")),Object(c.b)("p",null,"Defines a macro named ",Object(c.b)("inlineCode",{parentName:"p"},"<name>")," that takes arguments named ",Object(c.b)("inlineCode",{parentName:"p"},"<arg1>"),", \u2026 Commands listed after macro, but before the matching ","[",Object(c.b)("inlineCode",{parentName:"p"},"endmacro()"),"]",", are not executed until the macro is invoked."),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-cmake"},'macro(set_xcode_property TARGET XCODE_PROPERTY XCODE_VALUE XCODE_RELVERSION)\n  set(XCODE_RELVERSION_I "${XCODE_RELVERSION}")\n  if(XCODE_RELVERSION_I STREQUAL "All")\n    set_property(TARGET ${TARGET} PROPERTY\n    XCODE_ATTRIBUTE_${XCODE_PROPERTY} "${XCODE_VALUE}")\n  else()\n    set_property(TARGET ${TARGET} PROPERTY\n    XCODE_ATTRIBUTE_${XCODE_PROPERTY}[variant=${XCODE_RELVERSION_I}] "${XCODE_VALUE}")\n  endif()\nendmacro(set_xcode_property)\n')),Object(c.b)("h5",{id:"\u5185\u7f6e\u51fd\u6570"},"\u5185\u7f6e\u51fd\u6570"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"http://cmake.org/cmake/help/v3.21/manual/cmake-commands.7.html"},"http://cmake.org/cmake/help/v3.21/manual/cmake-commands.7.html")),Object(c.b)("hr",null),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"\u6253\u5370\u4fe1\u606f")),Object(c.b)("p",null,"Log a message."),Object(c.b)("p",null,"Synopsis"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'General messages\n  message([<mode>] "message text" ...)\n\nReporting checks\n  message(<checkState> "message text" ...)\n')),Object(c.b)("h3",{id:"\u73af\u5883"},"\u73af\u5883"),Object(c.b)("p",null,"\u73af\u5883\u53d8\u91cf\uff0c\u73af\u5883\u8fc7\u7a0b\u3002"),Object(c.b)("h3",{id:"\u89e3\u91ca\u6267\u884c"},"\u89e3\u91ca/\u6267\u884c"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-text"},"\u7f16\u5199\u6587\u4ef6CMakeLists.txt\n\u6267\u884c\u547d\u4ee4\u201ccmake PATH\u201d\u6216\u8005\u201cccmake PATH\u201d\u751f\u6210Makefile (PATH\u662fCMakeLists.txt\u6240\u5728\u7684\u76ee\u5f55)\n\u4f7f\u7528make\u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1\u6e90\u7801\u751f\u6210\u53ef\u6267\u884c\u7a0b\u5e8f\u6216\u5171\u4eab\u5e93\uff08so(shared object)\uff09\n")),Object(c.b)("p",null,"cmake \u6307\u5411CMakeLists.txt\u6240\u5728\u7684\u76ee\u5f55\uff0c\u4f8b\u5982 cmake .. \u8868\u793aCMakeLists.txt\u5728\u5f53\u524d\u76ee\u5f55\u7684\u4e0a\u4e00\u7ea7\u76ee\u5f55\u3002cmake\u540e\u4f1a\u751f\u6210\u5f88\u591a\u7f16\u8bd1\u7684\u4e2d\u95f4\u6587\u4ef6\u4ee5\u53camakefile\u6587\u4ef6\uff0c\u6240\u4ee5\u4e00\u822c\u5efa\u8bae\u65b0\u5efa\u4e00\u4e2a\u65b0\u7684\u76ee\u5f55\uff0c\u4e13\u95e8\u7528\u6765\u7f16\u8bd1"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-text"},"mkdir build\ncd build\ncmake ..\nmake\n")),Object(c.b)("h2",{id:"\u4f7f\u7528\u8bf4\u660e"},"\u4f7f\u7528\u8bf4\u660e"),Object(c.b)("p",null,"cmake\u662f\u4ee5\u5b8c\u6210\u4e8c\u8fdb\u5236\u7684\u6784\u5efa\u4e3a\u76ee\u7684\u7684\u5de5\u5177\u3002\u4e8c\u8fdb\u5236\u7684\u6784\u5efa\u4e00\u822c\u5206\u4e3a\uff0c\u9884\u7f16\u8bd1\uff0c\u7f16\u8bd1\uff0c\u6c47\u7f16\uff0c\u94fe\u63a5\uff0c4\u4e2a\u6b65\u9aa4\u3002\u5f53\u7136llvm\u7684\u6b65\u9aa4\u66f4\u591a\u3002\u4f46\u662f\u5927\u4f53\u53ef\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\u3002"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},"\u7f16\u8bd1",Object(c.b)("ol",{parentName:"li"},Object(c.b)("li",{parentName:"ol"},"\u9700\u8981\u6307\u5b9a\u6e90\u7801\uff0c\u5934\u6587\u4ef6\u4f4d\u7f6e\u3002"),Object(c.b)("li",{parentName:"ol"},"\u9700\u8981\u6307\u5b9a\u4e00\u4e9b\u7f16\u8bd1\u7684\u53c2\u6570\uff08\u76ee\u6807\u5e73\u53f0\uff0c\u67b6\u6784\u7b49\uff09"))),Object(c.b)("li",{parentName:"ol"},"\u94fe\u63a5",Object(c.b)("ol",{parentName:"li"},Object(c.b)("li",{parentName:"ol"},"\u9700\u8981\u6307\u5b9a\u9700\u8981\u8fde\u63a5\u7684\u5e93\u548c\u5e93\u4f4d\u7f6e\u3002")))),Object(c.b)("p",null,"\u4ee5\u4e0a\uff0c\u4fbf\u662fCMake\u5927\u6982\u9700\u8981\u505a\u7684\u5de5\u4f5c\u3002\u5982\u6b64\u4fbf\u53ef\u4ee5\u66f4\u597d\u7684\u7406\u89e3CMake\u4e86\u3002"),Object(c.b)("p",null,"Modern CMake \u56f4\u7ed5 ",Object(c.b)("strong",{parentName:"p"},"Targets")," \u548c ",Object(c.b)("strong",{parentName:"p"},"Properties")," \u5c55\u5f00\uff0c\u56e0\u6b64\u5e38\u7528\u7684\u547d\u4ee4\u5982\u4e0b:"),Object(c.b)("p",null,Object(c.b)("em",{parentName:"p"},"\u521b\u5efa target")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"add_library()\nadd_exectutable()\n\ntarget_sources()\n")),Object(c.b)("p",null,Object(c.b)("em",{parentName:"p"},"\u4e3a target \u6307\u5b9a\u53c2\u6570")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"## \u9884\u5904\u7406\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84 -I\ntarget_include_directories()\n\n## \u7f16\u8bd1\u5b8f \u81ea\u52a8\u5728\u6307\u5b9a\u7684\u5b8f\u524d\u6dfb\u52a0 -D\ntarget_compile_definitions()\n\n## \u7f16\u8bd1\u9009\u9879\ntarget_compile_options()\n\n## \u94fe\u63a5\u5e93\u641c\u7d22\u8def\u5f84 -L\ntarget_link_directories()\n\n## \u94fe\u63a5\u9009\u9879\ntarget_link_options()\n\n## \u94fe\u63a5\u5e93\ntarget_link_libraries()\n")),Object(c.b)("h3",{id:"target\u548cproject"},"target\u548cproject"),Object(c.b)("p",null,"target\u662f\u6574\u4e2amake\u7684\u76ee\u6807\u3002target\u5fc5\u987b\u4f9d\u8d56project\u5b58\u5728\uff0c\u6ca1\u6709project\u6ca1\u6cd5\u7f16\u8bd1\u3002\u7c7b\u4f3cXcode\u9879\u76ee\u3002"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'if(${PLATFORM} MATCHES "MAC")\n    project(RZLogan_macOS)\nelse()\n    project(RZLogan_iOS)\nendif()\n')),Object(c.b)("p",null,"\u76f8\u5f53\u4e8e\u7f16\u8bd1\u5668\u7684",Object(c.b)("inlineCode",{parentName:"p"},"-o"),"\u548c\u6e90\u4ee3\u7801\u5217\u8868"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"clang -o hello hello.c\n\u7b49\u4ef7\u4e8e\nadd_executable(hello hello.c)\n")),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"http://cmake.org/cmake/help/v3.21/manual/cmake-buildsystem.7.html#binary-targets"},"http://cmake.org/cmake/help/v3.21/manual/cmake-buildsystem.7.html#binary-targets")),Object(c.b)("h4",{id:"binary-executables"},"Binary Executables"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"add_executable(mytool mytool.cpp)\n")),Object(c.b)("h4",{id:"binary-library"},"Binary Library"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"add_library(archive SHARED archive.cpp zip.cpp lzma.cpp)\nadd_library(archive STATIC archive.cpp zip.cpp lzma.cpp)\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'add_library(MyFramework SHARED MyFramework.cpp)\nset_target_properties(MyFramework PROPERTIES\n  FRAMEWORK TRUE\n  FRAMEWORK_VERSION A # Version "A" is macOS convention\n  MACOSX_FRAMEWORK_IDENTIFIER org.cmake.MyFramework\n)\n')),Object(c.b)("hr",null),Object(c.b)("p",null,"\u8bbe\u7f6e\u4e00\u4e2a\u53d8\u91cf\uff1a\u6765\u4fdd\u5b58\u6e90\u6587\u4ef6\u5217\u8868"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"\u9700\u8981\u4e00\u4e9b\u73af\u5883\u53d8\u91cf\uff0c\u6765\u5b9a\u4f4d\u6e90\u6587\u4ef6\u6240\u5728\u7684\u6587\u4ef6\u5939"),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",{parentName:"p",href:"http://cmake.org/cmake/help/v3.21/manual/cmake-variables.7.html#variables-that-describe-the-system"},"http://cmake.org/cmake/help/v3.21/manual/cmake-variables.7.html#variables-that-describe-the-system"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},"\u9700\u8981\u53d8\u91cf\u6765\u4fdd\u5b58\u6e90\u6587\u4ef6\u5217\u8868"))),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'set(oc_src_folder "${CMAKE_CURRENT_LIST_DIR}")\nset(oc_src_upload_folder "${CMAKE_CURRENT_LIST_DIR}/Upload")\nfile(GLOB logan_oc_source_files \n"${oc_src_folder}/*.m"\n"${oc_src_folder}/*.mm"\n"${oc_src_folder}/*.h"\n"${oc_src_upload_folder}/*.m"\n"${oc_src_upload_folder}/*.mm"\n"${oc_src_upload_folder}/*.h"\n)\n')),Object(c.b)("hr",null),Object(c.b)("p",null,"\u8bbe\u7f6e\u4e00\u4e2a\u53d8\u91cf\uff1a\u6765\u4fdd\u5b58TargetName"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"set(LIB_TARGET_NAME rzlogan)\n")),Object(c.b)("h3",{id:"\u8bbe\u7f6e"},"\u8bbe\u7f6e"),Object(c.b)("p",null,"Properties"),Object(c.b)("h4",{id:"\u9884\u7f16\u8bd1\u8bbe\u7f6e"},"\u9884\u7f16\u8bd1\u8bbe\u7f6e"),Object(c.b)("h5",{id:"\u6307\u5b9a\u5934\u6587\u4ef6\u8def\u5f84"},Object(c.b)("strong",{parentName:"h5"},"\u6307\u5b9a\u5934\u6587\u4ef6\u8def\u5f84")),Object(c.b)("p",null,"include_directories"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"include_directories` vs `target_include_directories\n")),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},Object(c.b)("inlineCode",{parentName:"p"},"include_directories(x/y)")," affects directory scope. All targets in this CMakeList, as well as those in all subdirectories added after the point of its call, will have the path ",Object(c.b)("inlineCode",{parentName:"p"},"x/y")," added to their include path."),Object(c.b)("p",{parentName:"blockquote"},Object(c.b)("inlineCode",{parentName:"p"},"target_include_directories(t x/y)")," has target scope\u2014it adds ",Object(c.b)("inlineCode",{parentName:"p"},"x/y")," to the include path for target ",Object(c.b)("inlineCode",{parentName:"p"},"t"),"."),Object(c.b)("p",{parentName:"blockquote"},"You want the former one if all of your targets use the include directories in question. You want the latter one if the path is specific to a target, or if you want finer control of the path's visibility. The latter comes from the fact that ",Object(c.b)("inlineCode",{parentName:"p"},"target_include_directories()")," supports the ",Object(c.b)("inlineCode",{parentName:"p"},"PRIVATE"),", ",Object(c.b)("inlineCode",{parentName:"p"},"PUBLIC"),", and ",Object(c.b)("inlineCode",{parentName:"p"},"INTERFACE")," qualifiers.")),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"include_directories")," \u4e4b\u540e\uff0c\u4f1a\u5bf9\u4e4b\u540e\u7684target\u7684\u9020\u6210\u5f71\u54cd\u3002\u6709\u987a\u5e8f\u5173\u7cfb\u3002"),Object(c.b)("p",null,"\u5982\u679c\u6709\u4e0d\u540c\u76ee\u5f55\u76f8\u540c\u540d\u79f0\u7684\u5934\u6587\u4ef6\u4f1a\u4ea7\u751f\u5f71\u54cd\uff0c\u6240\u4ee5\u8fd9\u91cc\u5efa\u8bae\u9488\u5bf9\u7279\u5b9a\u7684target\u8fdb\u884c\u6dfb\u52a0\u5934\u6587\u4ef6\u7684\u64cd\u4f5c\uff0c\u4e0d\u8981\u4f7f\u7528",Object(c.b)("inlineCode",{parentName:"p"},"include_directories")),Object(c.b)("blockquote",null,Object(c.b)("p",{parentName:"blockquote"},"If PRIVATE is specified for a certain option/property, then that option/property will only impact the current target. If PUBLIC is specified, then the option/property impacts both the current target and any others that link to it. If INTERFACE is specified, then the option/property does not impact the current target but will propagate to other targets that link to it.")),Object(c.b)("p",null,"public: \u5934\u6587\u4ef6\u53ef\u4ee5\u63d0\u4f9b\u7ed9\u4f9d\u8d56\u7684\u5e93\u548c\u81ea\u5df1\u4f7f\u7528"),Object(c.b)("p",null,"interface\uff1a \u5934\u6587\u4ef6\u63d0\u4f9b\u7ed9\u4f9d\u8d56\u7684\u5e93\u4f7f\u7528\uff0c\u4f46\u81ea\u5df1\u4e0d\u4f7f\u7528\uff0c\u573a\u666f\uff1a\u5c01\u88c5\u4e00\u4e2asdk\uff0c\u4f9b\u5916\u90e8\u4f7f\u7528\u7684\u5934\u6587\u4ef6\u548c\u5185\u90e8\u4f7f\u7528\u7684\u5934\u6587\u4ef6\uff0c\u8fd9\u65f6\u5019\u5c31\u5f88\u6709\u7528\u4e86"),Object(c.b)("p",null,"private\uff1a\u5934\u6587\u4ef6\u81ea\u5df1\u4f7f\u7528\uff0c\u4e0d\u63d0\u4f9b\u7ed9\u5916\u90e8\u4f7f\u7528"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-cmake"},"target_include_directories(<target> [SYSTEM] [BEFORE]\n  <INTERFACE|PUBLIC|PRIVATE> [items1...]\n  [<INTERFACE|PUBLIC|PRIVATE> [items2...] ...])\n")),Object(c.b)("p",null,"\u5982\u4f55\u63d0\u4f9b\u7ed9\u5916\u90e8\u4f9d\u8d56\u7684\u5e93\u4f7f\u7528\u5462\uff1f"),Object(c.b)("p",null,"\u901a\u8fc7\u4f7f\u7528\uff1a",Object(c.b)("inlineCode",{parentName:"p"},"target_link_libraries")," \u6765\u63d0\u4f9b\u3002\u4f46\u662f\u8fd9\u4e2aapi\u4e5f\u6709public\u3001private\u3001interface\uff0c\u8fd9\u4e2a\u8bf7\u770b\u4e0b\u6587\u3002"),Object(c.b)("hr",null),Object(c.b)("p",null,"\u5982\u679c\u4f60\u5199\u4e00\u4e2a\u5e93\uff0c\u6307\u5b9a\u5e93\u7684\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84\u3002"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://stackoverflow.com/questions/13703647/how-to-properly-add-include-directories-with-cmake"},"https://stackoverflow.com/questions/13703647/how-to-properly-add-include-directories-with-cmake")),Object(c.b)("p",null,"Two things must be done."),Object(c.b)("p",null,"First add the directory to be included:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-cpp"},"target_include_directories(test PRIVATE ${YOUR_DIRECTORY})\n")),Object(c.b)("p",null,"In case you are stuck with a very old CMake version (2.8.10 or older) without support for ",Object(c.b)("inlineCode",{parentName:"p"},"target_include_directories"),", you can also use the legacy ",Object(c.b)("inlineCode",{parentName:"p"},"include_directories")," instead:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-cpp"},"include_directories(${YOUR_DIRECTORY})\n")),Object(c.b)("p",null,"Then you also must add the header files to the list of your source files for the current target, for instance:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-cpp"},"set(SOURCES file.cpp file2.cpp ${YOUR_DIRECTORY}/file1.h ${YOUR_DIRECTORY}/file2.h)\nadd_executable(test ${SOURCES})\n")),Object(c.b)("p",null,"This way, the header files will appear as dependencies in the Makefile, and also for example in the generated Visual Studio project, if you generate one."),Object(c.b)("p",null,"How to use those header files for several targets:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-cpp"},"set(HEADER_FILES ${YOUR_DIRECTORY}/file1.h ${YOUR_DIRECTORY}/file2.h)\n\nadd_library(mylib libsrc.cpp ${HEADER_FILES})\ntarget_include_directories(mylib PRIVATE ${YOUR_DIRECTORY})\nadd_executable(myexec execfile.cpp ${HEADER_FILES})\ntarget_include_directories(myexec PRIVATE ${YOUR_DIRECTORY})\n")),Object(c.b)("p",null,"First, you use ",Object(c.b)("inlineCode",{parentName:"p"},"include_directories()")," to tell CMake to add the directory as ",Object(c.b)("inlineCode",{parentName:"p"},"-I")," to the compilation command line. Second, you list the headers in your ",Object(c.b)("inlineCode",{parentName:"p"},"add_executable()")," or ",Object(c.b)("inlineCode",{parentName:"p"},"add_library()")," call."),Object(c.b)("p",null,"As an example, if your project's sources are in ",Object(c.b)("inlineCode",{parentName:"p"},"src"),", and you need headers from ",Object(c.b)("inlineCode",{parentName:"p"},"include"),", you could do it like this:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-cpp"},"include_directories(include)\n\nadd_executable(MyExec\n  src/main.c\n  src/other_source.c\n  include/header1.h\n  include/header2.h\n)\n")),Object(c.b)("hr",null),Object(c.b)("p",null,"target_include_directories"),Object(c.b)("p",null,"\u5207\u8bb0\u8fd9\u4e2a\u662f\u4f60\u6307\u5b9atarget\u7684include\u3002demo01 \u7684 hello_library \u5f15\u7528\u4e86hello.h\u3002"),Object(c.b)("p",null,"\u8fd9\u4e2a\u4e0d\u662f\u5fc5\u987b\uff0c\u8fd9\u4e2atarget\u7528\u5230\u4e86include\u5c31\u4f7f\u3002\u6b63\u5e38\u5927\u578b\u9879\u76ee\u90fd\u4f1a\u7528\u3002 \u8fd9\u4e2a\u548c\u5916\u754c\u4f7f\u7528\u5e93\u662f\u4e24\u56de\u4e8b\u3002"),Object(c.b)("p",null,"\u4e24\u4e2a\u6ce8\u610f\u70b9\uff1a"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},".a \u5e93\u6587\u4ef6 \u548c .h \u5934\u6587\u4ef6\u5206\u79bb"),Object(c.b)("li",{parentName:"ol"},"\u4fdd\u7559\u4e86\u6587\u4ef6\u5939\u7ed3\u6784 \u201chello/hello.h\u201d")),Object(c.b)("p",null,"[https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.3%20%20Static%20Library.html]","(",Object(c.b)("a",{parentName:"p",href:"https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.3"},"https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.3"),"  Static Library.html)"),Object(c.b)("p",null,"\u7f16\u8bd1\u8fd9\u4e2a\u5e93\u7684\u65f6\u5019 \u56e0\u4e3a\u8fd9\u4e2a\u5e93hello_library\u7531Hello.cpp\u751f\u6210\uff0cHello.cpp\u4e2d\u51fd\u6570\u7684\u5b9a\u4e49\u5728Hello.h\u4e2d\uff0cHello.h\u5728\u8fd9\u4e2ainclude\u76ee\u5f55\u4e0b\uff0c\u6240\u4ee5\u663e\u7136\u7f16\u8bd1\u8fd9\u4e2a\u5e93\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u76ee\u5f55\u4f1a\u7528\u5230"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"\u89c1\u540d\u77e5\u610f\u5c31\u662f \u90a3\u4e2atarget \u6240\u7528\u5230\u7684 include \u7684 directories")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"target_include_directories(hello_library\nPUBLIC\n${PROJECT_SOURCE_DIR}/include\n)\n")),Object(c.b)("p",null,"Demo2 \u6ca1\u6709\u7528\u5230 "),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'// #include "hello/hello.h"\n')),Object(c.b)("p",null,"\u6240\u4ee5demo02 \u4e5f\u4e0d\u5fc5\u4f7f\u7528 target_include_directories \u6765\u5305\u542b\u5934\u6587\u4ef6\uff0c\u56e0\u4e3a\u90a3\u4e2atarget\u6ca1\u6709\u7528\u5230 include\u3002"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"# target_include_directories(hello_library\n# PUBLIC\n# ${PROJECT_SOURCE_DIR}/include\n# )\n")),Object(c.b)("hr",null),Object(c.b)("p",null,"\u4f7f\u7528\u9759\u6001\u5e93"),Object(c.b)("p",null,"\u5e93\u7684\u5f15\u7528\u7684\u5934\u6587\u4ef6\u76ee\u5f55"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'/*\n\u6ce8\u610f header search path \u6240\u5bfc\u81f4\u5934\u6587\u4ef6\u5305\u542b\u7684\u4e0d\u540c\u3002\n */\n\n//"$(SRCROOT)/../hello/include/hello"\n//#include <hello.h>\n\n//"$(SRCROOT)/../hello/include"\n#include <hello/hello.h>\n')),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"\u8fd9\u4e2a\u5934\u6587\u4ef6\u7684\u8def\u5f84 \u53ea\u548c \u4f60\u5f15\u7528\u7684\u65b9\u5f0f\u6709\u5173\u7cfb")),Object(c.b)("h5",{id:"\u5b8f"},"\u5b8f"),Object(c.b)("p",null,"\u7f16\u8bd1\u7684\u65f6\u5019\u7528\u5230\u7684\u547d\u4ee4\uff1a"),Object(c.b)("p",null,"\u5982\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-c++"},'#include <iostream>\n\nint main(int argc, char *argv[]) {\n   std::cout << "Hello Compile Flags!" << std::endl;\n\n   // only print if compile flag set\n#ifdef EX2\n  std::cout << "Hello Compile Flag EX2!" << std::endl;\n#endif\n\n#ifdef EX3\n  std::cout << "Hello Compile Flag EX3!" << std::endl;\n#endif\n   return 0;\n}\n')),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.6%20%20Compile%20Flags.html"},"https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.6%20%20Compile%20Flags.html")),Object(c.b)("p",null,Object(c.b)("img",{alt:"image-20210506163025949",src:n(636).default})),Object(c.b)("p",null,"\u5c31\u548c\u9ed8\u8ba4\u7ed9\u7684debug\u7684\u5b9a\u4e49\u5dee\u4e0d\u591a\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002"),Object(c.b)("h4",{id:"\u7f16\u8bd1\u8bbe\u7f6e"},"\u7f16\u8bd1\u8bbe\u7f6e"),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"\u6307\u5b9a\u7f16\u8bd1\u5668")),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"CPPFLAGS")," is supposed to be for flags for the ",Object(c.b)("strong",{parentName:"p"},"C")," ",Object(c.b)("strong",{parentName:"p"},"P"),"re",Object(c.b)("strong",{parentName:"p"},"P"),"rocessor; ",Object(c.b)("inlineCode",{parentName:"p"},"CXXFLAGS")," is for flags for the C++ compiler."),Object(c.b)("p",null,"The default rules in make (on my machine, at any rate) pass ",Object(c.b)("inlineCode",{parentName:"p"},"CPPFLAGS")," to just about everything, ",Object(c.b)("inlineCode",{parentName:"p"},"CFLAGS")," is only passed when compiling and linking C, and ",Object(c.b)("inlineCode",{parentName:"p"},"CXXFLAGS")," is only passed when compiling and linking C++."),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"CMAKE_<LANG>_FLAGS\n\neg:\nCMAKE_C_FLAGS\n# \u8868\u793a\u9884\u7f16\u8bd1\u53c2\u6570\nCMAKE_CPP_FLAGS\n# \u8868\u793a\u7f16\u8bd1\u53c2\u6570\nCMAKE_CXX_FLAGS \n")),Object(c.b)("hr",null),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"\u52a0\u8f7dC++\u5168\u5c40\u53d8\u91cf")),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://gamedev.stackexchange.com/questions/37813/variables-in-static-library-are-never-initialized-why"},"https://gamedev.stackexchange.com/questions/37813/variables-in-static-library-are-never-initialized-why")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'Use the -all_load linker option to load all members of static libraries. Or for a specific library, use -force_load path_to_archive.\n\nIn Xcode, you\'ll want to add these options under "Other Linker Flags" for your executable (not your static library).\n')),Object(c.b)("hr",null),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"arc\u8bbe\u7f6e")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'set_property (TARGET ${LIB_TARGET_NAME} \nAPPEND_STRING \nPROPERTY \nCOMPILE_FLAGS "-fobjc-arc")\n')),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"http://cmake.org/cmake/help/v3.21/prop_tgt/COMPILE_FLAGS.html"},"http://cmake.org/cmake/help/v3.21/prop_tgt/COMPILE_FLAGS.html")),Object(c.b)("p",null,Object(c.b)("img",{alt:"image-20211014112102164",src:n(637).default})),Object(c.b)("p",null,Object(c.b)("img",{alt:"image-20211014112157933",src:n(638).default})),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"\u65b9\u5f0f1\uff1a\nset_property (TARGET ${LIB_TARGET_NAME} \nAPPEND_STRING \nPROPERTY \nXCODE_ATTRIBUTE_CLANG_ENABLE_OBJC_ARC YES)\n\n\u65b9\u5f0f2\uff1a\nset_target_properties(${LIB_TARGET_NAME} \nPROPERTIES\nXCODE_ATTRIBUTE_CLANG_ENABLE_OBJC_ARC YES\n)\n")),Object(c.b)("p",null,"\u4e89\u8bba\u5728\u8fd9\u91cc\uff1a",Object(c.b)("a",{parentName:"p",href:"https://developer.apple.com/forums/thread/673960"},"Xcode defaults ARC to off. CMake-based builds leak large amounts of memory.")),Object(c.b)("p",null,Object(c.b)("img",{alt:"image-20211014112748485",src:n(639).default})),Object(c.b)("p",null,"\u65b9\u5f0f2\u66f4\u597d\uff0c\u76f4\u63a5\u4fee\u6539\u4e86\u9879\u76ee\u5de5\u7a0b\u6587\u4ef6\u3002"),Object(c.b)("p",null,"\u5173\u4e8e XCODE",Object(c.b)("em",{parentName:"p"},"ATTRIBUTE"),"\uff1a"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"http://cmake.org/cmake/help/v3.21/prop_tgt/XCODE_ATTRIBUTE_an-attribute.html"},"http://cmake.org/cmake/help/v3.21/prop_tgt/XCODE_ATTRIBUTE_an-attribute.html")),Object(c.b)("p",null,"\u5173\u4e8eXcode\u7684",Object(c.b)("inlineCode",{parentName:"p"},"<an-attribute>"),"\u7684\u503c\uff0c\u53ef\u4ee5\u53c2\u8003\uff1a"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://help.apple.com/xcode/mac/current/#/itcaec37c2a6"},"Build settings reference")),Object(c.b)("p",null,"xcode \u7684build setting \u6ca1\u6709\uff0c\u76f4\u63a5\u8bbe\u7f6e\u76f8\u5173\u5c5e\u6027\u5219\u6dfb\u52a0\u5230User-Defined\u533a\u57df\u91cc\u9762\u3002"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'set_target_properties(${LIB_TARGET_NAME} \nPROPERTIES\nXCODE_ATTRIBUTE_CLANG_ENABLE_OBJC_ARC YES\nXCODE_ATTRIBUTE_CODE_SIGNING_REQUIRED NO\nXCODE_ATTRIBUTE_CODE_SIGN_STYLE     Manual\nXCODE_ATTRIBUTE_CODE_SIGN_IDENTITY ""\nXCODE_ATTRIBUTE_CODE_SIGNING_ALLOWED NO\nPUBLIC_HEADER "${public_headers}"\n# CXX_VISIBILITY_PRESET hidden\n# VISIBILITY_INLINES_HIDDEN 1\nPRODUCT_BUNDLE_IDENTIFIER com.rz.logan\n)\n')),Object(c.b)("p",null,Object(c.b)("img",{alt:"image-20211028170632502",src:n(640).default})),Object(c.b)("hr",null),Object(c.b)("h5",{id:"\u8bbe\u7f6e\u7f16\u8bd1\u9009\u9879"},Object(c.b)("strong",{parentName:"h5"},"\u8bbe\u7f6e\u7f16\u8bd1\u9009\u9879")),Object(c.b)("p",null,"\u7f16\u8bd1\u9009\u9879\u5206\u4e3a\u5bf9C\u7f16\u8bd1\u5668\u548cC++\u7f16\u8bd1\u5668\u7684\u7f16\u8bd1\u9009\u9879\u8bbe\u7f6e"),Object(c.b)("p",null,"CMAKE_C_COMPILER\uff1a\u6307\u5b9aC\u7f16\u8bd1\u5668\nCMAKE_CXX_COMPILER\uff1a\u6307\u5b9aC++\u7f16\u8bd1\u5668"),Object(c.b)("p",null,"\u8bbe\u7f6e\u7f16\u8bd1\u9009\u9879\uff08\u914d\u7f6e\u7f16\u8bd1\u5668\uff09\u6709\u5982\u4e0b\u4e09\u79cd\u65b9\u6cd5\uff1a"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"add_compile_options\u547d\u4ee4"),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-cmake"},"add_compile_options(-Wall -Werror -Wstrict-prototypes -Wmissing-prototypes)\n")))),Object(c.b)("ol",{start:2},Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"add_definitions\u547d\u4ee4"),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-cmake"},'ADD_DEFINITIONS("-Wall -Werror -Wstrict-prototypes -Wmissing-prototypes")\n')))),Object(c.b)("ol",{start:3},Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"set\u547d\u4ee4\u4fee\u6539CMAKE_CXX_FLAGS\u6216CMAKE_C_FLAGS"),Object(c.b)("pre",{parentName:"li"},Object(c.b)("code",{parentName:"pre",className:"language-cmake"},'set(CMAKE_C_FLAGS "-Wall -Werror -Wstrict-prototypes -Wmissing-prototypes)\n')))),Object(c.b)("p",null,"\u9488\u5bf9\u6240\u6709\u7f16\u8bd1\u5668\uff1a"),Object(c.b)("p",null,"add_compile_options"),Object(c.b)("p",null,"add_definitions"),Object(c.b)("p",null,"set\u547d\u4ee4\u9488\u5bf9\u6307\u5b9a\u7f16\u8bd1\u5668\uff1a"),Object(c.b)("p",null,"CMAKE_C_FLAGS\uff1a\u6307\u5b9a\u7f16\u8bd1C\u6587\u4ef6\u65f6\u7f16\u8bd1\u9009\u9879"),Object(c.b)("p",null,"CMAKE_CXX_FLAGS\uff1a\u6307\u5b9a\u7f16\u8bd1C++\u6587\u4ef6\u65f6\u7f16\u8bd1\u9009\u9879"),Object(c.b)("h5",{id:"\u9009\u62e9config"},"\u9009\u62e9config"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"http://cmake.org/cmake/help/v3.21/variable/CMAKE_BUILD_TYPE.html"},"http://cmake.org/cmake/help/v3.21/variable/CMAKE_BUILD_TYPE.html")),Object(c.b)("p",null,"This statically specifies what build type (configuration) will be built in this build tree. Possible values are empty, ",Object(c.b)("inlineCode",{parentName:"p"},"Debug"),", ",Object(c.b)("inlineCode",{parentName:"p"},"Release"),", ",Object(c.b)("inlineCode",{parentName:"p"},"RelWithDebInfo"),", ",Object(c.b)("inlineCode",{parentName:"p"},"MinSizeRel"),", ... "),Object(c.b)("p",null,"\u6784\u5efa\u53ef\u4ee5\u8c03\u8bd5\u7684\u7248\u672c"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"cmake .. -DCMAKE_BUILD_TYPE=Debug\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"\u279c  /Users/dingyusong/mine/gitee/cmake_demos/cmake\u751f\u6210\u9759\u6001\u5e93/demo03/libr2/build git:(master) \u2717 cmake .. -DCMAKE_BUILD_TYPE=Debug\n-- The C compiler identification is AppleClang 12.0.0.12000032\n-- The CXX compiler identification is AppleClang 12.0.0.12000032\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working C compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc - skipped\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++ - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /Users/dingyusong/mine/gitee/cmake_demos/cmake\u751f\u6210\u9759\u6001\u5e93/demo03/libr2/build\n\u279c  /Users/dingyusong/mine/gitee/cmake_demos/cmake\u751f\u6210\u9759\u6001\u5e93/demo03/libr2/build git:(master) \u2717 make\nScanning dependencies of target hello_library\n[ 50%] Building CXX object CMakeFiles/hello_library.dir/src/hello.cpp.o\n[100%] Linking CXX static library libhello_library.a\n[100%] Built target hello_library\n")),Object(c.b)("p",null,"\u53ef\u4ee5\u8fdb\u5165\u5e93\u4e2d\u8c03\u8bd5\u4e86\uff01"),Object(c.b)("p",null,Object(c.b)("img",{alt:"image-20210506153151820",src:n(641).default})),Object(c.b)("p",null,"\u5bf9\u6bd4\u5dee\u5f02\uff1a"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"\u5927\u5c0f\u5dee\u5f02")),Object(c.b)("p",null,"release\u7248\u672c\uff1a\u5927\u5c0f14KB"),Object(c.b)("p",null,"debug\u7248\u672c\uff1a\u5927\u5c0f95KB"),Object(c.b)("p",null,Object(c.b)("img",{alt:"image-20210506153305701",src:n(642).default})),Object(c.b)("h4",{id:"\u6c47\u7f16\u8bbe\u7f6e"},"\u6c47\u7f16\u8bbe\u7f6e"),Object(c.b)("h4",{id:"\u94fe\u63a5\u8bbe\u7f6e"},"\u94fe\u63a5\u8bbe\u7f6e"),Object(c.b)("h5",{id:"find_library"},"find_library"),Object(c.b)("p",null,"A short-hand signature is:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"find_library (<VAR> name1 [path1 path2 ...])\n")),Object(c.b)("p",null,"\u4e3a\u4ec0\u4e48\u4e0b\u9762\u7684\u65b9\u6cd5\u52a0\u4e2a.a\u5c31\u4e0d\u4f1a\u627e\u5230\u7cfb\u7edf\u7684\u5e93\u4e86\uff1f"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"find_library(PROTOBUF_LIBRARIES\n        NAMES\n            libprotobuf.a protobuf\n        HINTS\n            ${THIRD_PART_LIBS_PATH}\n        PATHS\n            ${THIRD_PART_LIBS_PATH}\n        PATH_SUFFIXES\n            lib libs)\n")),Object(c.b)("h5",{id:"\u94fe\u63a5\u7b2c\u4e09\u65b9\u5e93"},"\u94fe\u63a5\u7b2c\u4e09\u65b9\u5e93"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.7%20%20Including%20Third%20Party%20Library.html"},"https://sfumecjf.github.io/cmake-examples-Chinese/01-basic/1.7%20%20Including%20Third%20Party%20Library.html")),Object(c.b)("p",null,"\u67e5\u627e\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'# find a boost install with the libraries filesystem and system\n#\u4f7f\u7528\u5e93\u6587\u4ef6\u7cfb\u7edf\u548c\u7cfb\u7edf\u67e5\u627eboost install\nfind_package(Boost 1.46.1 REQUIRED COMPONENTS filesystem system)\n\n# check if boost was found\nif(Boost_FOUND)\n    message ("boost found")\nelse()\n    message (FATAL_ERROR "Cannot find Boost")\nendif()\n')),Object(c.b)("p",null,"inclue + link"),Object(c.b)("p",null,"\u65b9\u5f0f1\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"target_link_libraries( third_party_include\n      PRIVATE\n          Boost::filesystem\n  )\n")),Object(c.b)("p",null,"\u65b9\u5f0f2\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"  # Include the boost headers\n  target_include_directories( third_party_include\n      PRIVATE ${Boost_INCLUDE_DIRS}\n  )\n\n  # link against the boost libraries\n  target_link_libraries( third_party_include\n      PRIVATE\n      ${Boost_SYSTEM_LIBRARY}\n      ${Boost_FILESYSTEM_LIBRARY}\n  )\n")),Object(c.b)("h5",{id:"\u94fe\u63a5cmake\u5b50\u9879\u76ee"},"\u94fe\u63a5cmake\u5b50\u9879\u76ee"),Object(c.b)("p",null,"subbinary\u4f9d\u8d56lib1\u548clib2\u3002\u4ed6\u4eec\u90fd\u662f\u540c\u4e00\u7ea7\u522b\u7684\u3002"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://sfumecjf.github.io/cmake-examples-Chinese/02-sub-projects/A-basic/"},"https://sfumecjf.github.io/cmake-examples-Chinese/02-sub-projects/A-basic/")),Object(c.b)("p",null,"add_subdirectory \u4f1a\u81ea\u52a8\u6784\u5efa\u5b50\u9879\u76ee"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"add_subdirectory(sublibrary1)\nadd_subdirectory(sublibrary2)\nadd_subdirectory(subbinary)\n")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"\u96c6\u6210\u4e00\u4e2aCMake\u9879\u76ee\u5230\u53e6\u5916\u7684CMake\u9879\u76ee")),Object(c.b)("p",null,"\u4e3a\u4e86\u8ba9\u522b\u7684C++\u9879\u76ee\u5728CMakeLists.txt\u4e2d\u4f7f\u7528find_package\u6765\u5f15\u7528\u81ea\u5df1\u7684C++\u9879\u76ee\uff0c\u5219\u9700\u8981\u5728\u81ea\u5df1\u9879\u76ee\u7684CMakeLists.txt\u4e2d\u4f7f\u7528EXPORT\u8bed\u6cd5\u548cinstall(EXPORT ...)\u8bed\u6cd5\u3002\u4e00\u4e2a\u751f\u52a8\u7684\u4f8b\u5b50\u53ef\u4ee5\u53c2\u8003\uff1a"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("a",{parentName:"li",href:"https://github.com/DeepVAC/libdeepvac/blob/master/CMakeLists.txt"},"https://github.com/DeepVAC/libdeepvac/blob/master/CMakeLists.txt")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("a",{parentName:"li",href:"https://github.com/DeepVAC/libdeepvac/blob/master/cmake/deepvac-config.cmake"},"https://github.com/DeepVAC/libdeepvac/blob/master/cmake/deepvac-config.cmake"))),Object(c.b)("h4",{id:"\u76ee\u5f55\u67e5\u627e"},"\u76ee\u5f55\u67e5\u627e"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"http://www.voidcn.com/article/p-vowckywc-btg.html"},"http://www.voidcn.com/article/p-vowckywc-btg.html")),Object(c.b)("p",null,"\u53d8\u91cf ",Object(c.b)("a",{parentName:"p",href:"javascript:void()"},Object(c.b)("inlineCode",{parentName:"a"},"CMAKE_CURRENT_SOURCE_DIR")),"\u548c ",Object(c.b)("a",{parentName:"p",href:"javascript:void()"},Object(c.b)("inlineCode",{parentName:"a"},"CMAKE_CURRENT_LIST_DIR")),"\u53ef\u4ee5\u6307\u4ee3\u7531\u5177\u6709 ",Object(c.b)("a",{parentName:"p",href:"javascript:void()"},"include"),"\u547d\u4ee4\u7684\u4e0d\u540c\u6587\u4ef6\u5305\u62ec\u7684CMake\u5217\u8868\u6587\u4ef6\u7684\u4e0d\u540c\u76ee\u5f55.\u4f8b\u5982,\u5982\u679c\u76ee\u5f55\u9879\u76ee\u4e2d\u5b58\u5728CMakeLists.txt\u5e76\u4e14\u5305\u542b\u4ee5\u4e0b\u6307\u4ee4"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"include(src/CMakeLists.txt)\n")),Object(c.b)("p",null,"\u7136\u540e\u5728\u5904\u7406",Object(c.b)("inlineCode",{parentName:"p"},"src / CMakeLists.tx"),"t\u65f6,",Object(c.b)("inlineCode",{parentName:"p"},"CMAKE_CURRENT_LIST_DIR"),"\u5c06\u5f15\u7528",Object(c.b)("inlineCode",{parentName:"p"},"project / src"),",\u800c",Object(c.b)("inlineCode",{parentName:"p"},"CMAKE_CURRENT_SOURCE_DIR"),"\u4ecd\u7136\u6307\u5411\u5916\u90e8\u76ee\u5f55\u9879\u76ee."),Object(c.b)("p",null,"\u5f53\u60a8\u9700\u8981\u627e\u5230\u5f53\u524d\u6b63\u5728\u5904\u7406\u7684",Object(c.b)("inlineCode",{parentName:"p"},"CMakeLists.txt"),"\u6587\u4ef6\u65c1\u8fb9\u7684\u6a21\u677f\u6587\u4ef6\u6216\u6279\u5904\u7406\u811a\u672c\u7b49\u8d44\u6e90\u6587\u4ef6\u65f6,",Object(c.b)("inlineCode",{parentName:"p"},"CMAKE_CURRENT_LIST_DIR"),"\u4f1a\u6d3e\u4e0a\u7528\u573a."),Object(c.b)("hr",null),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"CMake\u4e2d\u7684CMAKE_SOURCE_DIR\u548cPROJECT_SOURCE_DIR\u662f\u5426\u76f8\u540c\uff1f")),Object(c.b)("p",null,Object(c.b)("em",{parentName:"p"},"\u539f\u6587"),"  ",Object(c.b)("a",{parentName:"p",href:"javascript:void()"},"https://stackoverflow.com/questions/32028667/are-cmake-source-dir-and-project-source-dir-the-same-in-cmake")),Object(c.b)("p",null,"CMake\u5df2\u7ecf\u4e3a\u6211\u4eec\u5b9a\u4e49\u4e86\u53d8\u91cf.\u6211\u89c9\u5f97\u6709\u4e9b\u53d8\u91cf\u662f\u4e00\u6837\u7684.\u4ee5CMAKE_SOURCE_DIR\u548cPROJECT_SOURCE_DIR\u4e3a\u4f8b.\u5b83\u4eec\u662f\u76f8\u540c\u7684,\u6307\u7684\u662f\u5b9a\u4e49\u9876\u7ea7CMakeLists.txt\u7684\u6587\u4ef6\u5939.\u6240\u4ee5\u6211\u7684\u95ee\u9898\u662f\uff1a\u4ed6\u4eec\u4e4b\u95f4\u6709\u5fae\u5999\u7684\u533a\u522b\u5417\uff1f\u8c22\u8c22."),Object(c.b)("p",null,"\u8fd9\u4e9b\u53d8\u91cf\u4e4b\u95f4\u6709\u5dee\u5f02. ",Object(c.b)("a",{parentName:"p",href:"javascript:void()"},Object(c.b)("inlineCode",{parentName:"a"},"CMAKE_SOURCE_DIR")),"\u786e\u5b9e\u662f\u6307\u5b9a\u4e49\u4e86\u9876\u7ea7CMakeLists.txt\u7684\u6587\u4ef6\u5939.\u4f46\u662f, ",Object(c.b)("a",{parentName:"p",href:"javascript:void()"},Object(c.b)("inlineCode",{parentName:"a"},"PROJECT_SOURCE_DIR")),"\u662f\u6307\u5305\u542b\u6700\u8fd1\u7684project()\u547d\u4ee4\u7684CMakeLists.txt\u7684\u6587\u4ef6\u5939."),Object(c.b)("p",null,"\u4f8b\u5982,\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u540d\u4e3aOuter\u7684\u9876\u7ea7\u9879\u76ee,\u5b83\u5305\u542b\u4e00\u4e2a\u5b50\u76ee\u5f55,\u5176\u81ea\u5df1\u7684\u9879\u76ee\u53eb\u505aInner.\u5916\u9762\u7684CMakeLists.txt\u6709\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"project(Outer)\nadd_subdirectory(Inner)\n")),Object(c.b)("p",null,"\u548c\u5185\u5728\u7684\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"project(Inner)\n")),Object(c.b)("p",null,"\u7136\u540e\u5728\u8fd9\u4e24\u4e2aCMakeLists\u6587\u4ef6\u4e2d,CMAKE_SOURCE_DIR\u5c06\u5f15\u7528Outer\u7684\u6e90\u76ee\u5f55.\u4f46\u662f\u5916\u90e8PROJECT_SOURCE_DIR\u4e5f\u662f\u540c\u4e00\u4e2a\u76ee\u5f55,\u800cInner\u5e76\u4e0d\u662f\u8fd9\u6837. Inner\u7684PROJECT_SOURCE_DIR\u662f\u5305\u542b\u5176CMakeLists.txt\u7684\u5b50\u76ee\u5f55."),Object(c.b)("p",null,"\u8be5\u5dee\u5f02\u9002\u7528\u4e8e\u6240\u6709",Object(c.b)("inlineCode",{parentName:"p"},"PROJECT_< var>")," vs",Object(c.b)("inlineCode",{parentName:"p"}," CMAKE_< var>"),"\u53d8\u91cf."),Object(c.b)("h3",{id:"cmake\u7f16\u8bd1\u6d41\u7a0b"},"CMake\u7f16\u8bd1\u6d41\u7a0b"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-text"},"\u7f16\u5199\u6587\u4ef6CMakeLists.txt\n\u6267\u884c\u547d\u4ee4\u201ccmake PATH\u201d\u6216\u8005\u201cccmake PATH\u201d\u751f\u6210Makefile (PATH\u662fCMakeLists.txt\u6240\u5728\u7684\u76ee\u5f55)\n\u4f7f\u7528make\u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1\u6e90\u7801\u751f\u6210\u53ef\u6267\u884c\u7a0b\u5e8f\u6216\u5171\u4eab\u5e93\uff08so(shared object)\uff09\n")),Object(c.b)("p",null,"cmake \u6307\u5411CMakeLists.txt\u6240\u5728\u7684\u76ee\u5f55\uff0c\u4f8b\u5982 cmake .. \u8868\u793aCMakeLists.txt\u5728\u5f53\u524d\u76ee\u5f55\u7684\u4e0a\u4e00\u7ea7\u76ee\u5f55\u3002cmake\u540e\u4f1a\u751f\u6210\u5f88\u591a\u7f16\u8bd1\u7684\u4e2d\u95f4\u6587\u4ef6\u4ee5\u53camakefile\u6587\u4ef6\uff0c\u6240\u4ee5\u4e00\u822c\u5efa\u8bae\u65b0\u5efa\u4e00\u4e2a\u65b0\u7684\u76ee\u5f55\uff0c\u4e13\u95e8\u7528\u6765\u7f16\u8bd1"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-text"},"mkdir build\ncd build\ncmake ..\nmake\n")),Object(c.b)("p",null,"make\u6839\u636e\u751f\u6210makefile\u6587\u4ef6\uff0c\u7f16\u8bd1\u7a0b\u5e8f"),Object(c.b)("p",null,"CMake\u8bed\u53e5\u4e3b\u8981\u67093\u7c7b\u7528\u6cd5\uff1a"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"\u8bbe\u7f6e\u53d8\u91cf\u3002\u8fd9\u6837\u7684\u8bed\u53e5\u6709set\u3001file\u3001list\u3001find_library\u3001aux_source_directory\u3001generator expressions\uff1b"),Object(c.b)("li",{parentName:"ul"},"\u8bbe\u7f6etarget\u3002\u4e5f\u5c31\u662f\u6784\u5efa\u7684\u76ee\u6807\u662f\u4ec0\u4e48\uff08\u4f60\u6784\u5efa\u4e2a\u9879\u76ee\u603b\u5f97\u6709\u4e2a\u76ee\u6807\u5427\uff0c\u4e00\u822c\u6765\u8bf4\u5c31\u662f\u5e93\u6216\u8005\u53ef\u6267\u884c\u6587\u4ef6\uff09\uff1b\u8fd9\u6837\u7684\u8bed\u53e5\u6709add_library\u3001add_executable\uff1b"),Object(c.b)("li",{parentName:"ul"},"\u8bbe\u7f6etarget\u7684\u5c5e\u6027\u3002\u4e5f\u5c31\u662f\u5b9a\u4e49\u5982\u4f55\u751f\u6210target\uff08\u6bd4\u5982\u6e90\u6587\u4ef6\u7684\u8def\u5f84\u3001\u7f16\u8bd1\u9009\u9879\u3001\u8981\u94fe\u63a5\u4ec0\u4e48\u5e93......\uff09\uff1b\u8fd9\u6837\u7684\u8bed\u53e5\u6709add_definitions\u3001target_link_libraries\u3001link_directories\u3001include_directories\u3001target_include_directories\uff1b")),Object(c.b)("p",null,"\u53c2\u8003\uff1a",Object(c.b)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/92928820"},"\u4f7f\u7528CMake\u6784\u5efaC++\u9879\u76ee")),Object(c.b)("p",null,"\u8d70\u4e00\u904dtutorial \u6e90\u7801\u5728\u8fd9\u91cc\uff1a"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://github.com/Kitware/CMake/tree/master/Help/guide/tutorial"},"https://github.com/Kitware/CMake/tree/master/Help/guide/tutorial")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-cmake"},"project\xa0(HELLO)\xa0\xa0\xa0#\u6307\u5b9a\u9879\u76ee\u540d\u79f0\uff0c\u751f\u6210\u7684VC\u9879\u76ee\u7684\u540d\u79f0\uff1b\n \n>>\u4f7f\u7528${HELLO_SOURCE_DIR}\u8868\u793a\u9879\u76ee\u6839\u76ee\u5f55\n \ninclude_directories\uff1a\u6307\u5b9a\u5934\u6587\u4ef6\u7684\u641c\u7d22\u8def\u5f84\uff0c\u76f8\u5f53\u4e8e\u6307\u5b9agcc\u7684-I\u53c2\u6570\n \n>> include_directories (${HELLO_SOURCE_DIR}/Hello)\xa0\xa0#\u589e\u52a0Hello\u4e3ainclude\u76ee\u5f55\n \nlink_directories\uff1a\u52a8\u6001\u94fe\u63a5\u5e93\u6216\u9759\u6001\u94fe\u63a5\u5e93\u7684\u641c\u7d22\u8def\u5f84\uff0c\u76f8\u5f53\u4e8egcc\u7684-L\u53c2\u6570\n \n>> link_directories (${HELLO_BINARY_DIR}/Hello)\xa0\xa0\xa0\xa0\xa0#\u589e\u52a0Hello\u4e3alink\u76ee\u5f55\n \nadd_subdirectory\uff1a\u5305\u542b\u5b50\u76ee\u5f55\n \n>> add_subdirectory (Hello)\n \nadd_executable\uff1a\u7f16\u8bd1\u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u6307\u5b9a\u7f16\u8bd1\uff0c\u597d\u50cf\u4e5f\u53ef\u4ee5\u6dfb\u52a0.o\u6587\u4ef6\n \n>> add_executable (helloDemo demo.cxx demo_b.cxx)\xa0\xa0\xa0#\u5c06cxx\u7f16\u8bd1\u6210\u53ef\u6267\u884c\u6587\u4ef6\u2014\u2014\n \nadd_definitions\uff1a\u6dfb\u52a0\u7f16\u8bd1\u53c2\u6570\n \n>> add_definitions(-DDEBUG)\u5c06\u5728gcc\u547d\u4ee4\u884c\u6dfb\u52a0DEBUG\u5b8f\u5b9a\u4e49\uff1b\n \n>> add_definitions( \u201c-Wall -ansi \u2013pedantic \u2013g\u201d)\n \ntarget_link_libraries\uff1a\u6dfb\u52a0\u94fe\u63a5\u5e93,\u76f8\u540c\u4e8e\u6307\u5b9a-l\u53c2\u6570\n \n>> target_link_libraries(demo Hello) #\u5c06\u53ef\u6267\u884c\u6587\u4ef6\u4e0eHello\u8fde\u63a5\u6210\u6700\u7ec8\u6587\u4ef6demo\n \nadd_library:\n \n>> add_library(Hello hello.cxx)\xa0\xa0#\u5c06hello.cxx\u7f16\u8bd1\u6210\u9759\u6001\u5e93\u5982libHello.a\n\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\n\u7248\u6743\u58f0\u660e\uff1a\u672c\u6587\u4e3aCSDN\u535a\u4e3b\u300cpotxxx\u300d\u7684\u539f\u521b\u6587\u7ae0\uff0c\u9075\u5faaCC 4.0 BY-SA\u7248\u6743\u534f\u8bae\uff0c\u8f6c\u8f7d\u8bf7\u9644\u4e0a\u539f\u6587\u51fa\u5904\u94fe\u63a5\u53ca\u672c\u58f0\u660e\u3002\n\u539f\u6587\u94fe\u63a5\uff1ahttps://blog.csdn.net/potxxx/article/details/86766378\n")),Object(c.b)("p",null,"\u7b2c\u4e09\u65b9\u5e93\u4e3b\u8981\u7531\u4e24\u4e2a\u90e8\u5206\u7ec4\u6210\uff0c\u5373 a)",Object(c.b)("strong",{parentName:"p"},"\u5934\u6587\u4ef6"),"\uff0c b)",Object(c.b)("strong",{parentName:"p"},"\u5e93\u6587\u4ef6"),"\u3002 \u5934\u6587\u4ef6\u4e00\u822c\u662f\u4e00\u7cfb\u5217\u540d\u4e3a",Object(c.b)("inlineCode",{parentName:"p"},"xxx.h"),"\uff08",Object(c.b)("strong",{parentName:"p"},"h"),"ead\uff09\u7684\u6587\u4ef6\uff0c\u76f8\u5f53\u4e8e\u66b4\u9732\u51fa\u7b2c\u4e09\u65b9\u5e93\u6240\u63d0\u4f9b\u7684API\u63a5\u53e3\uff08\u51fd\u6570\u7b7e\u540d\uff09\u3002 \u5e93\u6587\u4ef6\u4e00\u822c\u4f1a\u5305\u542b",Object(c.b)("strong",{parentName:"p"},"\u9759\u6001\u5e93\u6587\u4ef6"),"\u548c",Object(c.b)("strong",{parentName:"p"},"\u52a8\u6001\u5e93\u6587\u4ef6"),"\uff0c\u76f8\u5f53\u4e8e\u7b2c\u4e09\u65b9\u5e93\u5728\u529f\u80fd\u4e0a\u7684\u4e8c\u8fdb\u5236\u5b9e\u73b0\u3002 \u5176\u4e2d\uff0c\u9759\u6001\u5e93\u6587\u4ef6\u662f\u4e00\u7cfb\u5217\u540d\u4e3a",Object(c.b)("inlineCode",{parentName:"p"},"libxxx.a"),"\uff08",Object(c.b)("strong",{parentName:"p"},"a"),"rchive\uff09\u7684\u6587\u4ef6\uff08Windows\u4e0b\u4e3a",Object(c.b)("inlineCode",{parentName:"p"},"libxxx.lib"),"\uff0c",Object(c.b)("strong",{parentName:"p"},"lib"),"rary\uff09\u3002 \u52a8\u6001\u5e93\u6587\u4ef6\u5219\u662f\u4e00\u7cfb\u5217\u540d\u4e3a",Object(c.b)("inlineCode",{parentName:"p"},"libxxx.so"),"\uff08",Object(c.b)("strong",{parentName:"p"},"s"),"hared ",Object(c.b)("strong",{parentName:"p"},"o"),"bject\uff09\u7684\u6587\u4ef6\uff08Windows\u4e0b\u4e3a",Object(c.b)("inlineCode",{parentName:"p"},"libxxx.dll"),"\uff0c",Object(c.b)("strong",{parentName:"p"},"d"),"ynamic ",Object(c.b)("strong",{parentName:"p"},"l"),"ink ",Object(c.b)("strong",{parentName:"p"},"l"),"ibrary\uff0cmacOS\u4e0b\u4e3a",Object(c.b)("inlineCode",{parentName:"p"},"libxxx.dylib"),"\uff0c",Object(c.b)("strong",{parentName:"p"},"dy"),"namic ",Object(c.b)("strong",{parentName:"p"},"lib"),"rary\uff09\u3002 \u7cfb\u7edf\u81ea\u5e26\u7684\uff0c\u4ee5\u53ca\u7531\u7cfb\u7edf\u5305\u7ba1\u7406\u5668\u5b89\u88c5\u7684\u7b2c\u4e09\u65b9\u5e93\uff0c\u5176\u5934\u6587\u4ef6\u4e00\u822c\u5728",Object(c.b)("inlineCode",{parentName:"p"},"/usr/include"),"\u6216",Object(c.b)("inlineCode",{parentName:"p"},"/usr/local/include"),"\u8def\u5f84\u4e0b\uff0c\u5e93\u6587\u4ef6\u4e00\u822c\u5728",Object(c.b)("inlineCode",{parentName:"p"},"/lib"),"\uff0c",Object(c.b)("inlineCode",{parentName:"p"},"/usr/lib"),"\u548c",Object(c.b)("inlineCode",{parentName:"p"},"/usr/local/lib"),"\u76ee\u5f55\u4e0b\u3002"),Object(c.b)("p",null,"\u6b63\u662f\u7531\u4e8e\u4ee5\u4e0a\u56e0\u7d20\u7684\u5f71\u54cd\uff0cGCC\u5de5\u5177\u94fe\u4e0d\u8d1f\u8d23\u7ba1\u7406\u7b2c\u4e09\u65b9\u5e93\uff0c\u56e0\u6b64\u65e0\u6cd5\u5224\u5b9aC/C++\u9879\u76ee\u5177\u4f53\u9700\u8981\u4f7f\u7528\u54ea\u4e9b\u5e93\uff0c\u4ee5\u53ca\u8fd9\u4e9b\u5e93\u7684\u51c6\u786e\u4fe1\u606f\uff0c\u5982\u4f4d\u7f6e\u3001\u7248\u672c\u7b49\u3002 \u6240\u4ee5\uff0c\u4ec5\u4f7f\u7528GCC\uff0c\u65e0\u6cd5\u5b8c\u5168\u81ea\u52a8\u5730\u89e3\u51b3C/C++\u9879\u76ee\u7b2c\u4e09\u65b9\u5e93\u7684\u4f9d\u8d56\u95ee\u9898\u3002 \u6211\u4eec\u9700\u8981\u4eba\u5de5\u5730\u6dfb\u52a0\u5404\u79cd\u7f16\u8bd1\u53c2\u6570\uff0c\u5982",Object(c.b)("inlineCode",{parentName:"p"},"-I"),"\uff0c",Object(c.b)("inlineCode",{parentName:"p"},"-l"),"\u4ee5\u53ca",Object(c.b)("inlineCode",{parentName:"p"},"-L"),"\uff0c\u5c06\u6240\u4f9d\u8d56\u7684\u7b2c\u4e09\u65b9\u5e93\u7684\u76f8\u5173\u4fe1\u606f\uff0c\u4f20\u9012\u7ed9",Object(c.b)("inlineCode",{parentName:"p"},"gcc"),"\u7f16\u8bd1\u5668\u3002 \u5176\u4e2d",Object(c.b)("inlineCode",{parentName:"p"},"-I"),"\u4f20\u9012\u7684\u662f\u5934\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\uff0c",Object(c.b)("inlineCode",{parentName:"p"},"-l"),"\u4f20\u9012\u7684\u662f\u9700\u8981\u94fe\u63a5\u7684\u5e93\u7684\u540d\u79f0\uff0c",Object(c.b)("inlineCode",{parentName:"p"},"-L"),"\u4f20\u9012\u7684\u662f\u5e93\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u3002"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/342151242"},"GCC/Make/CMake \u4e4b GCC")),Object(c.b)("h3",{id:"cmake\u5de5\u7a0b\u76ee\u5f55\u7ed3\u6784"},"cmake\u5de5\u7a0b\u76ee\u5f55\u7ed3\u6784"),Object(c.b)("p",null,Object(c.b)("img",{alt:"img",src:n(643).default})),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"lib: \u751f\u6210\u7684\u5e93\u6587\u4ef6\n src: \u6e90\u6587\u4ef6\uff08*.cpp *.cc\uff09\n include: \u5934\u6587\u4ef6\uff08*.h *.hpp\uff09\n build: \u4e00\u822c\u5728\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e0b\u6267\u884ccmake ..(..\u4e4b\u524d\u6709\u4e00\u4e2a\u7a7a\u683c\uff0c\u8868\u793a\u4f60\u8981\u4f7f\u7528\u7684CMakeLists.txt\u6587\u4ef6\u5728\u5f53\u524d\u7684\u4e0a\u5c42\u8def\u5f84)\uff0c\u751f\u6210\u7684Makefile\u6587\u4ef6\u4e5f\u5728\u8fd9\u4e2a\u8def\u5f84\u4e0b\u3002\n bin: \u4e00\u822c\u653e\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\n CMakeLists.txt: cmake\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5173\u4e8e\u914d\u7f6e\u6587\u4ef6\u600e\u4e48\u5199\u7684\u6559\u7a0b\uff08[http://blog.csdn.net/kaizi318/article/details/7721624](https://links.jianshu.com/go?to=http%3A%2F%2Fblog.csdn.net%2Fkaizi318%2Farticle%2Fdetails%2F7721624)\uff09\n")),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-cmake"},'#\u4e95\u597d\u8868\u793a\u6ce8\u91ca\nCMAKE_MINIMUM_REQUIRED( VERSION 2.8 ) #\u8bbe\u5b9a\u6700\u5c0f\u7248\u672c\u53f7\nPROJECT( test )                       #\u8bbe\u5b9a\u5de5\u7a0b\u540d\n\nSET(CMAKE_CXX_COMPILER "g++")         #\u8bbe\u7f6e\u7f16\u8bd1\u5668\uff08\u53ef\u9009\u7684\u6709gcc\uff0cg++\uff09\n\n# \u8bbe\u7f6e\u7528debug\u8fd8\u662frelease\u6a21\u5f0f\u3002debug\u5141\u8bb8\u65ad\u70b9\uff0c\u800crelease\u66f4\u5feb\n#set( CMAKE_BUILD_TYPE Debug )\nset( CMAKE_BUILD_TYPE Release )\n\n# \u8bbe\u7f6e\u7f16\u8bd1\u9009\u9879\n# \u5141\u8bb8c++11\u6807\u51c6\u3001O3\u4f18\u5316\u3001\u591a\u7ebf\u7a0b\u3002match\u9009\u9879\u53ef\u907f\u514d\u4e00\u4e9bcpu\u4e0a\u7684\u95ee\u9898\nset( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11 -march=native -O3 -pthread" )\n\n#\u8bbe\u5b9a\u53ef\u6267\u884c\u4e8c\u8fdb\u5236\u6587\u4ef6\u7684\u76ee\u5f55\nSET( EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin) \n\n#\u8bbe\u5b9a\u5b58\u653e\u7f16\u8bd1\u51fa\u6765\u7684\u5e93\u6587\u4ef6\u7684\u76ee\u5f55\nSET( LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib) \n\n#\u5e76\u4e14\u628a\u8be5\u76ee\u5f55\u8bbe\u4e3a\u8fde\u63a5\u76ee\u5f55\nLINK_DIRECTORIES( ${PROJECT_SOURCE_DIR}/lib)\n#\nfind_package (Threads REQUIRED)\n#\u8bbe\u5b9a\u5934\u6587\u4ef6\u76ee\u5f55\nINCLUDE_DIRECTORIES( ${PROJECT_SOURCE_DIR}/include)\n\n#\u589e\u52a0\u5b50\u6587\u4ef6\u5939(\u6ce8\u610f\u6211\u4eec\u7684src\u8def\u5f84\u662f\u901a\u8fc7\u5b50\u6587\u4ef6\u5939\u7684\u5f62\u5f0f\u6dfb\u52a0\u7684\uff0c\u5728\u8fd9\u91cc\u9762\u4e5f\u662f\u53ef\u4ee5\u4e9bCMakeLists.txt\u7684)\nADD_SUBDIRECTORY( ${PROJECT_SOURCE_DIR}/src)\n\u6216\u5219\u662fADD_SUBDIRECTORY( src)\n')),Object(c.b)("p",null,"\u4f5c\u8005\uff1aCaiaolun\n\u94fe\u63a5\uff1a",Object(c.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/2287ed1080c3"},"https://www.jianshu.com/p/2287ed1080c3"),"\n\u6765\u6e90\uff1a\u7b80\u4e66\n\u8457\u4f5c\u6743\u5f52\u4f5c\u8005\u6240\u6709\u3002\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002"),Object(c.b)("p",null,"CMake   install \u4e4b\u540e"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'\u279c  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build git:(master) \u2717 cmake --install .                                                                                              (0s)[22:07:53] \n-- Install configuration: ""\n-- Installing: /usr/local/bin/Tutorial\n-- Installing: /usr/local/include/TutorialConfig.h\n-- Installing: /usr/local/lib/libMathFunctions.a\n-- Installing: /usr/local/include/MathFunctions.h\n')),Object(c.b)("p",null,"\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2acmake\u9879\u76ee\u6e90\u7801\u4e0b\u8f7d\u4e0b\u6765\u4e4b\u540e\uff0c\u6211\u4eec\u8fdb\u884c\u7f16\u8bd1\u5b89\u88c5\u4e4b\u540e\uff0c\u4f1a\u5230\u7cfb\u7edf\u7684/usr/local  \u76ee\u5f55\u4e0b"),Object(c.b)("p",null,"\u6ce8\u610f\uff1a \u548c\u7cfb\u7edf\u6267\u884c\u76ee\u5f55\u5982\u51fa\u4e00\u8f99"),Object(c.b)("p",null,Object(c.b)("img",{alt:"image-20210221221424232",src:n(644).default})),Object(c.b)("p",null,"cmake \u6307\u5b9a\u5b89\u88c5\u8def\u5f84"),Object(c.b)("p",null,"The CMake variable ","[",Object(c.b)("inlineCode",{parentName:"p"},"CMAKE_INSTALL_PREFIX"),"]"," is used to determine the root of where the files will be installed. If using the ",Object(c.b)("inlineCode",{parentName:"p"},"cmake --install")," command, the installation prefix can be overridden via the ",Object(c.b)("inlineCode",{parentName:"p"},"--prefix")," argument. For example:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'cmake --install . --prefix "/home/myuser/installdir"\n')),Object(c.b)("p",null,"Navigate to the install directory and verify that the installed Tutorial runs."),Object(c.b)("h3",{id:"\u6d4b\u8bd5"},"\u6d4b\u8bd5"),Object(c.b)("p",null,"Rebuild the application and then cd to the binary directory and run the ","[",Object(c.b)("inlineCode",{parentName:"p"},"ctest"),"]"," executable: ",Object(c.b)("inlineCode",{parentName:"p"},"ctest -N")," and ",Object(c.b)("inlineCode",{parentName:"p"},"ctest -VV"),"."),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'# \u6ce8\u610f\u8fd9\u4e2atest\u4e0d\u8981\u5199\u9519\u5730\u65b9\u4e86\n\n  enable_testing()\n\n  # does the application run\n  add_test(NAME Runs COMMAND Tutorial 25)\n  \n  # does the usage message work?\n  add_test(NAME Usage COMMAND Tutorial)\n  set_tests_properties(Usage\n    PROPERTIES PASS_REGULAR_EXPRESSION "Usage:.*number"\n    )\n  \n  # define a function to simplify adding tests\n  function(do_test target arg result)\n    add_test(NAME Comp${arg} COMMAND ${target} ${arg})\n    set_tests_properties(Comp${arg}\n      PROPERTIES PASS_REGULAR_EXPRESSION ${result}\n      )\n  endfunction(do_test)\n  \n  # do a bunch of result based tests\n  do_test(Tutorial 4 "4 is 2")\n  do_test(Tutorial 9 "9 is 3")\n  do_test(Tutorial 5 "5 is 2.236")\n  do_test(Tutorial 7 "7 is 2.645")\n  do_test(Tutorial 25 "25 is 5")\n  do_test(Tutorial -25 "-25 is [-nan|nan|0]")\n  do_test(Tutorial 0.0001 "0.0001 is 0.01")\n')),Object(c.b)("p",null,"\u53c2\u8003cmake\u5de5\u7a0b\uff1a"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://github.com/Tencent/rapidjson"},"https://github.com/Tencent/rapidjson")),Object(c.b)("p",null,"ios-cmake"),Object(c.b)("p",null,Object(c.b)("a",{parentName:"p",href:"https://github.com/leetal/ios-cmake"},"https://github.com/leetal/ios-cmake")),Object(c.b)("h2",{id:"\u4ea4\u53c9\u7f16\u8bd1"},"\u4ea4\u53c9\u7f16\u8bd1"),Object(c.b)("h2",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"install(TARGETS MyLib\n        EXPORT MyLibTargets \n        LIBRARY DESTINATION lib  # \u52a8\u6001\u5e93\u5b89\u88c5\u8def\u5f84\n        ARCHIVE DESTINATION lib  # \u9759\u6001\u5e93\u5b89\u88c5\u8def\u5f84\n        RUNTIME DESTINATION bin  # \u53ef\u6267\u884c\u6587\u4ef6\u5b89\u88c5\u8def\u5f84\n        PUBLIC_HEADER DESTINATION include  # \u5934\u6587\u4ef6\u5b89\u88c5\u8def\u5f84\n        )\n")),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"\u751f\u6210\u6784\u5efa\u7cfb\u7edf"),Object(c.b)("p",{parentName:"li"},Object(c.b)("inlineCode",{parentName:"p"},"cmake ../Step4 "))),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"\u7f16\u8bd1"),Object(c.b)("p",{parentName:"li"},Object(c.b)("inlineCode",{parentName:"p"},"cmake --build ."))),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"\u5b89\u88c5"),Object(c.b)("p",{parentName:"li"},Object(c.b)("inlineCode",{parentName:"p"},'cmake --install . --prefix "des"')))),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},'\u279c  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2 git:(master) \u2717 cmake ../Step4 \n-- The C compiler identification is AppleClang 12.0.0.12000032\n-- The CXX compiler identification is AppleClang 12.0.0.12000032\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working C compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc - skipped\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++ - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2\n\u279c  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2 git:(master) \u2717 ls\nCMakeCache.txt      CMakeFiles          CTestTestfile.cmake Makefile            MathFunctions       TutorialConfig.h    cmake_install.cmake\n\u279c  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2 git:(master) \u2717 cmake --install . --prefix "des"              \n-- Install configuration: ""\nCMake Error at cmake_install.cmake:41 (file):\n  file INSTALL cannot find\n  "/Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2/Tutorial":\n  No such file or directory.\n\u279c  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2 git:(master) \u2717 cmake --build .         \nScanning dependencies of target MathFunctions\n[ 25%] Building CXX object MathFunctions/CMakeFiles/MathFunctions.dir/mysqrt.cxx.o\n[ 50%] Linking CXX static library libMathFunctions.a\n[ 50%] Built target MathFunctions\nScanning dependencies of target Tutorial\n[ 75%] Building CXX object CMakeFiles/Tutorial.dir/tutorial.cxx.o\n[100%] Linking CXX executable Tutorial\n[100%] Built target Tutorial\n\u279c  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2 git:(master) \u2717 cmake --install . --prefix "des"\n-- Install configuration: ""\n-- Installing: /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2/des/bin/Tutorial\n-- Installing: /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2/des/include/TutorialConfig.h\n-- Installing: /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2/des/lib/libMathFunctions.a\n-- Installing: /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2/des/include/MathFunctions.h\n\u279c  /Users/dingyusong/mine/gitee/cmake_demos/tutorial/Step4_build2 git:(master) \u2717 \n')),Object(c.b)("p",null,"\u53c2\u8003\uff1aCMake\u4e4binstall\u65b9\u6cd5\u7684\u4f7f\u7528\uff1a",Object(c.b)("a",{parentName:"p",href:"https://zhuanlan.zhihu.com/p/102955723"},"https://zhuanlan.zhihu.com/p/102955723")),Object(c.b)("h2",{id:"\u53c2\u8003\u6587\u6863"},"\u53c2\u8003\u6587\u6863"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("a",{parentName:"p",href:"https://github.com/ttroy50/cmake-examples"},"https://github.com/ttroy50/cmake-examples"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("a",{parentName:"p",href:"https://sfumecjf.github.io/cmake-examples-Chinese/"},"https://sfumecjf.github.io/cmake-examples-Chinese/"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("a",{parentName:"p",href:"https://zhjwpku.com/category/2020/04/04/effective-modern-cmake-practice.html"},"Effective Modern CMake \u5b9e\u8df5"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("a",{parentName:"p",href:"https://phenix3443.github.io/notebook/cmake/effective-modern-cmake.html"},"https://phenix3443.github.io/notebook/cmake/effective-modern-cmake.html"))),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("a",{parentName:"p",href:"https://www.jianshu.com/p/9e8e0566ccc5"},"\u5e26\u4f60\u770b CMake")))))}s.isMDXComponent=!0},329:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var a=n(0),l=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var p=l.a.createContext({}),o=function(e){var t=l.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=o(e.components);return l.a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return l.a.createElement(l.a.Fragment,{},t)}},d=l.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,c=e.originalType,r=e.parentName,p=b(e,["components","mdxType","originalType","parentName"]),s=o(n),d=a,u=s["".concat(r,".").concat(d)]||s[d]||m[d]||c;return n?l.a.createElement(u,i(i({ref:t},p),{},{components:n})):l.a.createElement(u,i({ref:t},p))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var c=n.length,r=new Array(c);r[0]=d;var i={};for(var b in t)hasOwnProperty.call(t,b)&&(i[b]=t[b]);i.originalType=e,i.mdxType="string"==typeof e?e:a,r[1]=i;for(var p=2;p<c;p++)r[p]=n[p];return l.a.createElement.apply(null,r)}return l.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},636:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20210506163025949-5c3d36844f1aa52b66fd18ea442b8f5f.png"},637:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20211014112102164-c9102c7f423f52267e91b7e21179bd6b.png"},638:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20211014112157933-fc7911881b23f4e317c686c6c073dbad.png"},639:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20211014112748485-be63e5ec0f2661e294b5c9dd0c7236d4.png"},640:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20211028170632502-8cca6f834d653884a999184ae6dbdfa4.png"},641:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20210506153151820-735495ac38623d8381b20e96f701e3ba.png"},642:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20210506153305701-b66bf9b1d4715f51aa39dd298c47edc5.png"},643:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/12730381-d319a7e97d4390af-b57f2d5a9c1b3f90e6bd2d2beeacc336.jpg"},644:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/image-20210221221424232-4fd51bb3717dfd709ac7e85964fc6838.png"}}]);